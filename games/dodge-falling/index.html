<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dodge Falling - Ïû•Ïï†Î¨º ÌîºÌïòÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }
        #game-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            text-align: center;
        }
        h1 {
            color: #333;
            margin-bottom: 15px;
            font-size: 28px;
        }
        #score-display {
            background: #f0f0f0;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 20px;
        }
        #canvas {
            border: 3px solid #333;
            border-radius: 10px;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
            display: block;
            margin: 0 auto;
            touch-action: none;
            max-width: 100%;
        }
        button {
            padding: 20px 40px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            background: #4CAF50;
            color: white;
            margin-top: 20px;
        }
        button:active {
            transform: scale(0.95);
        }
        #game-over {
            display: none;
        }
        #final-score {
            font-size: 48px;
            color: #4CAF50;
            margin: 20px 0;
        }
        #final-time {
            font-size: 24px;
            color: #666;
            margin-bottom: 20px;
        }
        .instruction {
            color: #666;
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
        }
        #controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }
        .control-btn {
            width: 80px;
            height: 80px;
            font-size: 32px;
            padding: 0;
            margin: 0;
            background: #2196F3;
            border-radius: 50%;
        }
        @media (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            .control-btn {
                width: 70px;
                height: 70px;
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>üéÆ Dodge Falling</h1>
        
        <div id="game-start">
            <p class="instruction">
                <strong>Ï¢åÏö∞Î°ú Ïù¥Îèô</strong>ÌïòÏó¨ Îñ®Ïñ¥ÏßÄÎäî Ïû•Ïï†Î¨ºÏùÑ ÌîºÌïòÏÑ∏Ïöî!<br>
                Î≤ÑÌäºÏùÑ ÌÉ≠ÌïòÍ±∞ÎÇò ÌôîÎ©¥ÏùÑ Ïä§ÏôÄÏù¥ÌîÑÌïòÏÑ∏Ïöî.<br>
                Ïò§Îûò ÏÇ¥ÏïÑÎÇ®ÏúºÎ©¥ ÎÜíÏùÄ Ï†êÏàò!
            </p>
            <button onclick="startGame()">Í≤åÏûÑ ÏãúÏûë</button>
        </div>

        <div id="game-play" style="display: none;">
            <div id="score-display">‚è±Ô∏è 0.0Ï¥à | üéØ 0Ï†ê</div>
            <canvas id="canvas" width="360" height="480"></canvas>
            <div id="controls">
                <button class="control-btn" onclick="moveLeft()">‚óÄÔ∏è</button>
                <button class="control-btn" onclick="moveRight()">‚ñ∂Ô∏è</button>
            </div>
        </div>

        <div id="game-over">
            <h2>Í≤åÏûÑ Ï¢ÖÎ£å!</h2>
            <div id="final-score"></div>
            <div id="final-time"></div>
            <button onclick="startGame()">Îã§Ïãú ÌïòÍ∏∞</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let player = {
            x: 180,
            y: 420,
            width: 40,
            height: 40,
            speed: 60,
            targetX: 180
        };
        
        let obstacles = [];
        let gameActive = false;
        let score = 0;
        let startTime = 0;
        let animationId = null;
        let lastTime = 0;
        
        let touchStartX = 0;
        let keys = {};

        function startGame() {
            player.x = 180;
            player.targetX = 180;
            player.y = 420;
            obstacles = [];
            score = 0;
            startTime = Date.now();
            gameActive = true;
            
            document.getElementById('game-start').style.display = 'none';
            document.getElementById('game-over').style.display = 'none';
            document.getElementById('game-play').style.display = 'block';
            
            lastTime = performance.now();
            gameLoop(lastTime);
        }

        function gameLoop(currentTime) {
            if (!gameActive) return;
            
            const deltaTime = (currentTime - lastTime) / 1000;
            lastTime = currentTime;
            
            update(deltaTime);
            draw();
            
            animationId = requestAnimationFrame(gameLoop);
        }

        function update(deltaTime) {
            // Update score
            const elapsed = (Date.now() - startTime) / 1000;
            score = Math.floor(elapsed * 10);
            document.getElementById('score-display').textContent = 
                `‚è±Ô∏è ${elapsed.toFixed(1)}Ï¥à | üéØ ${score}Ï†ê`;
            
            // Smooth player movement
            if (player.x < player.targetX) {
                player.x = Math.min(player.x + player.speed * deltaTime * 6, player.targetX);
            } else if (player.x > player.targetX) {
                player.x = Math.max(player.x - player.speed * deltaTime * 6, player.targetX);
            }
            
            // Keep player in bounds
            player.x = Math.max(player.width/2, Math.min(canvas.width - player.width/2, player.x));
            
            // Spawn obstacles
            if (Math.random() < 0.02 + elapsed * 0.0005) {
                obstacles.push({
                    x: Math.random() * (canvas.width - 40) + 20,
                    y: -40,
                    width: 30 + Math.random() * 20,
                    height: 30 + Math.random() * 20,
                    speed: 100 + elapsed * 5
                });
            }
            
            // Update obstacles
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].y += obstacles[i].speed * deltaTime;
                
                // Remove off-screen obstacles
                if (obstacles[i].y > canvas.height) {
                    obstacles.splice(i, 1);
                    continue;
                }
                
                // Check collision
                if (checkCollision(player, obstacles[i])) {
                    endGame();
                    return;
                }
            }
        }

        function draw() {
            // Clear canvas
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw player
            ctx.fillStyle = '#4CAF50';
            ctx.fillRect(
                player.x - player.width/2,
                player.y - player.height/2,
                player.width,
                player.height
            );
            
            // Draw player emoji
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('üöó', player.x, player.y);
            
            // Draw obstacles
            for (let obs of obstacles) {
                ctx.fillStyle = '#f44336';
                ctx.fillRect(obs.x - obs.width/2, obs.y - obs.height/2, obs.width, obs.height);
                
                ctx.font = '20px Arial';
                ctx.fillText('üí•', obs.x, obs.y);
            }
        }

        function checkCollision(player, obstacle) {
            return Math.abs(player.x - obstacle.x) < (player.width + obstacle.width) / 2 &&
                   Math.abs(player.y - obstacle.y) < (player.height + obstacle.height) / 2;
        }

        function moveLeft() {
            player.targetX -= 60;
        }

        function moveRight() {
            player.targetX += 60;
        }

        function endGame() {
            gameActive = false;
            cancelAnimationFrame(animationId);
            
            const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
            
            document.getElementById('game-play').style.display = 'none';
            document.getElementById('game-over').style.display = 'block';
            document.getElementById('final-score').textContent = `${score}Ï†ê`;
            document.getElementById('final-time').textContent = `ÏÉùÏ°¥ ÏãúÍ∞Ñ: ${elapsed}Ï¥à`;
        }

        // Touch controls
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            touchStartX = e.touches[0].clientX;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touchX = e.touches[0].clientX;
            const diff = touchX - touchStartX;
            
            if (Math.abs(diff) > 20) {
                player.targetX += diff * 0.5;
                touchStartX = touchX;
            }
        });

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') moveLeft();
            if (e.key === 'ArrowRight') moveRight();
        });

        // Prevent double-tap zoom on iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
