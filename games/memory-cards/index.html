<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Memory Cards | eastsea.monster</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #eee; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            min-height: 100vh; touch-action: manipulation; padding: 20px;
        }
        #game-container { text-align: center; max-width: 600px; width: 100%; }
        h1 { font-size: 2rem; margin-bottom: 10px; color: #a78bfa; }
        #scoreboard { display: flex; justify-content: space-around; margin: 20px 0; font-size: 1rem; }
        #scoreboard div { padding: 10px 15px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        #scoreboard span { color: #a78bfa; font-weight: bold; }
        #grid {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 10px; max-width: 450px; margin: 0 auto;
        }
        .card {
            aspect-ratio: 1; background: linear-gradient(145deg, #1e1e3f, #2a2a4e);
            border: 2px solid rgba(167,139,250,0.3); border-radius: 12px;
            cursor: pointer; display: flex; align-items: center;
            justify-content: center; font-size: 2.5rem;
            transition: all 0.3s; user-select: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .card.flipped {
            background: linear-gradient(145deg, #7c3aed, #a78bfa);
            border-color: #a78bfa; transform: scale(1.05);
            box-shadow: 0 0 20px rgba(167,139,250,0.5);
        }
        .card.matched {
            background: rgba(74,222,128,0.2); border-color: #4ade80;
            pointer-events: none; opacity: 0.6;
        }
        .card.hidden { opacity: 0; pointer-events: none; }
        .card:not(.flipped):not(.matched)::after {
            content: '?'; color: rgba(255,255,255,0.3);
            font-size: 3rem; font-weight: bold;
        }
        #message {
            margin-top: 20px; font-size: 1.2rem; color: #a78bfa;
            min-height: 30px; font-weight: bold;
        }
        .controls { margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .btn {
            background: rgba(167,139,250,0.2); border: 2px solid #a78bfa;
            color: #eee; font-size: 0.9rem; padding: 10px 20px;
            border-radius: 8px; cursor: pointer; transition: all 0.2s;
        }
        .btn:hover { background: rgba(167,139,250,0.3); }
        .btn:active { transform: scale(0.95); }
        .btn.active { background: rgba(167,139,250,0.4); border-color: #fff; }
        .back { margin-top: 20px; }
        .back a {
            color: #a78bfa; text-decoration: none; font-size: 0.9rem;
            padding: 10px 20px; border: 2px solid #a78bfa;
            border-radius: 8px; display: inline-block;
            transition: all 0.2s;
        }
        .back a:hover { background: rgba(167,139,250,0.1); }
        @media (max-width: 600px) {
            h1 { font-size: 1.5rem; }
            #scoreboard { font-size: 0.85rem; gap: 5px; }
            #grid { gap: 8px; }
            .card { font-size: 2rem; }
            .card:not(.flipped):not(.matched)::after { font-size: 2.5rem; }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>üÉè Memory Cards</h1>
        <div id="scoreboard">
            <div>Moves: <span id="moves">0</span></div>
            <div>Pairs: <span id="pairs">0</span>/<span id="total">8</span></div>
            <div>Time: <span id="timer">0</span>s</div>
        </div>
        <div id="grid"></div>
        <div id="message">Find all matching pairs!</div>
        <div class="controls">
            <button class="btn active" onclick="setDifficulty(4)">Easy (4√ó4)</button>
            <button class="btn" onclick="setDifficulty(6)">Hard (6√ó6)</button>
            <button class="btn" onclick="restart()">üîÑ Restart</button>
        </div>
        <div class="back"><a href="../">‚Üê Back to Games</a></div>
    </div>
    <script>
        const gridEl = document.getElementById('grid');
        const movesEl = document.getElementById('moves');
        const pairsEl = document.getElementById('pairs');
        const totalEl = document.getElementById('total');
        const timerEl = document.getElementById('timer');
        const msgEl = document.getElementById('message');

        const EMOJIS = ['üçé','üçå','üçá','üçä','üçì','üçí','üçë','üçç','ü•ù','ü••','üçâ','üçã','üçê','ü•≠','üçè','ü´ê','üçà','ü•ë'];
        let cards = [], flipped = [], matches = 0, moves = 0, cols = 4;
        let startTime = 0, timerInterval;

        function setDifficulty(c) {
            cols = c;
            document.querySelectorAll('.controls .btn').forEach((b, i) => {
                b.classList.toggle('active', (i === 0 && c === 4) || (i === 1 && c === 6));
            });
            restart();
        }

        function restart() {
            clearInterval(timerInterval);
            const pairCount = (cols * cols) / 2;
            const symbols = EMOJIS.slice(0, pairCount);
            cards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            flipped = []; matches = 0; moves = 0; startTime = 0;
            movesEl.textContent = 0;
            pairsEl.textContent = 0;
            totalEl.textContent = pairCount;
            timerEl.textContent = 0;
            msgEl.textContent = 'Find all matching pairs!';
            
            gridEl.innerHTML = '';
            gridEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            
            cards.forEach((emoji, i) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = i;
                card.dataset.emoji = emoji;
                card.onclick = () => flipCard(i);
                gridEl.appendChild(card);
            });
        }

        function flipCard(i) {
            if (flipped.length >= 2) return;
            const card = gridEl.children[i];
            if (card.classList.contains('flipped') || card.classList.contains('matched')) return;
            
            if (!startTime) {
                startTime = Date.now();
                timerInterval = setInterval(() => {
                    timerEl.textContent = Math.floor((Date.now() - startTime) / 1000);
                }, 1000);
            }

            card.classList.add('flipped');
            card.textContent = card.dataset.emoji;
            flipped.push(i);

            if (flipped.length === 2) {
                moves++;
                movesEl.textContent = moves;
                const [a, b] = flipped;
                const cardA = gridEl.children[a];
                const cardB = gridEl.children[b];

                setTimeout(() => {
                    if (cardA.dataset.emoji === cardB.dataset.emoji) {
                        cardA.classList.add('matched');
                        cardB.classList.add('matched');
                        matches++;
                        pairsEl.textContent = matches;
                        
                        if (matches === cards.length / 2) {
                            clearInterval(timerInterval);
                            const time = Math.floor((Date.now() - startTime) / 1000);
                            msgEl.textContent = `üéâ You won in ${moves} moves and ${time}s!`;
                        }
                    } else {
                        cardA.classList.remove('flipped');
                        cardB.classList.remove('flipped');
                        cardA.textContent = '';
                        cardB.textContent = '';
                    }
                    flipped = [];
                }, 600);
            }
        }

        restart();
    </script>
</body>
</html>
