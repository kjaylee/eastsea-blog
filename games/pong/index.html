<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üèì Pong | eastsea.monster</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #0a0a0a; --card: #1a1a2e; --accent: #e94560;
            --text: #eee; --sub: #aaa; --glow: rgba(233,69,96,0.3);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg); color: var(--text);
            min-height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; padding: 20px;
            touch-action: none; overflow: hidden;
        }
        .container { max-width: 700px; width: 100%; }
        header { text-align: center; margin-bottom: 20px; }
        h1 { font-size: 2.5rem; background: linear-gradient(135deg, #e94560, #0f3460);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px; }
        .stats { display: flex; justify-content: space-around; background: var(--card);
            border-radius: 12px; padding: 15px; margin-bottom: 20px; }
        .stat { text-align: center; }
        .stat .label { font-size: 0.8rem; color: var(--sub); margin-bottom: 4px; }
        .stat .value { font-size: 2rem; font-weight: bold; color: var(--accent); }
        .difficulty { display: flex; gap: 8px; margin-bottom: 15px; }
        .difficulty button {
            flex: 1; background: var(--card); color: var(--text); border: 1px solid rgba(255,255,255,0.1);
            padding: 10px; border-radius: 8px; font-size: 0.9rem; cursor: pointer; transition: all 0.2s;
        }
        .difficulty button.active { background: var(--accent); border-color: var(--accent); }
        .btn {
            width: 100%; background: var(--accent); color: white; border: none;
            padding: 14px; border-radius: 10px; font-size: 1rem; font-weight: bold;
            cursor: pointer; transition: all 0.2s; margin-bottom: 20px;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 20px var(--glow); }
        .btn:active { transform: translateY(0); }
        #canvas {
            background: var(--card); border-radius: 12px; display: block;
            margin: 0 auto; max-width: 100%; box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.05);
        }
        .instructions {
            text-align: center; margin-top: 20px; color: var(--sub); font-size: 0.85rem;
        }
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            display: none; align-items: center; justify-content: center; z-index: 100;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: var(--card); padding: 30px; border-radius: 16px;
            text-align: center; max-width: 90%; animation: pop 0.3s;
        }
        @keyframes pop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal h2 { font-size: 2rem; margin-bottom: 10px; }
        .modal .result { font-size: 1.2rem; color: var(--sub); margin-bottom: 20px; }
        .modal .emoji { font-size: 4rem; margin: 20px 0; }
        footer { margin-top: 30px; text-align: center; }
        footer a { color: var(--accent); text-decoration: none; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèì Pong</h1>
        </header>
        <div class="difficulty">
            <button data-level="easy" class="active">Easy</button>
            <button data-level="medium">Medium</button>
            <button data-level="hard">Hard</button>
        </div>
        <div class="stats">
            <div class="stat">
                <div class="label">You</div>
                <div class="value" id="playerScore">0</div>
            </div>
            <div class="stat">
                <div class="label">AI</div>
                <div class="value" id="aiScore">0</div>
            </div>
        </div>
        <button class="btn" id="startBtn">Start Game</button>
        <canvas id="canvas" width="600" height="400"></canvas>
        <div class="instructions">
            Touch/drag or use mouse to move your paddle.<br>
            First to 5 points wins!
        </div>
        <footer>
            <a href="../">‚Üê Back to Games</a> &nbsp;|&nbsp; <a href="https://eastsea.monster">eastsea.monster</a>
        </footer>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="emoji" id="emoji">üéâ</div>
            <h2 id="modalTitle">You Win!</h2>
            <div class="result" id="modalText"></div>
            <button class="btn" onclick="resetGame()">Play Again</button>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const modal = document.getElementById('modal');
        const startBtn = document.getElementById('startBtn');
        
        const difficulties = {
            easy: { aiSpeed: 0.03, ballSpeed: 4 },
            medium: { aiSpeed: 0.05, ballSpeed: 5 },
            hard: { aiSpeed: 0.07, ballSpeed: 6 }
        };
        let difficulty = 'easy';

        let gameStarted = false, gameOver = false;
        let playerScore = 0, aiScore = 0;
        let paddleHeight = 80, paddleWidth = 12;
        let playerY = canvas.height / 2 - paddleHeight / 2;
        let aiY = canvas.height / 2 - paddleHeight / 2;
        let ballX = canvas.width / 2, ballY = canvas.height / 2;
        let ballSpeedX = 4, ballSpeedY = 3;
        let ballRadius = 8;
        let mouseY = canvas.height / 2;

        document.querySelectorAll('.difficulty button').forEach(btn => {
            btn.addEventListener('click', () => {
                if (gameStarted) return;
                document.querySelector('.difficulty button.active')?.classList.remove('active');
                btn.classList.add('active');
                difficulty = btn.dataset.level;
            });
        });

        startBtn.addEventListener('click', () => {
            if (!gameStarted) {
                gameStarted = true;
                startBtn.textContent = 'Playing...';
                startBtn.disabled = true;
                gameLoop();
            }
        });

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseY = e.clientY - rect.top;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            mouseY = e.touches[0].clientY - rect.top;
        });

        function resetGame() {
            gameStarted = false;
            gameOver = false;
            playerScore = 0;
            aiScore = 0;
            playerY = canvas.height / 2 - paddleHeight / 2;
            aiY = canvas.height / 2 - paddleHeight / 2;
            resetBall();
            document.getElementById('playerScore').textContent = 0;
            document.getElementById('aiScore').textContent = 0;
            startBtn.textContent = 'Start Game';
            startBtn.disabled = false;
            modal.classList.remove('show');
        }

        function resetBall() {
            ballX = canvas.width / 2;
            ballY = canvas.height / 2;
            const config = difficulties[difficulty];
            ballSpeedX = (Math.random() > 0.5 ? 1 : -1) * config.ballSpeed;
            ballSpeedY = (Math.random() - 0.5) * 4;
        }

        function gameLoop() {
            if (gameOver) return;
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            if (!gameStarted) return;

            // Player paddle follows mouse/touch
            const targetY = mouseY - paddleHeight / 2;
            playerY += (targetY - playerY) * 0.15;
            playerY = Math.max(0, Math.min(canvas.height - paddleHeight, playerY));

            // AI follows ball
            const aiCenter = aiY + paddleHeight / 2;
            const aiSpeed = difficulties[difficulty].aiSpeed;
            if (ballY > aiCenter + 10) aiY += (ballY - aiCenter) * aiSpeed * canvas.height;
            else if (ballY < aiCenter - 10) aiY += (ballY - aiCenter) * aiSpeed * canvas.height;
            aiY = Math.max(0, Math.min(canvas.height - paddleHeight, aiY));

            // Ball movement
            ballX += ballSpeedX;
            ballY += ballSpeedY;

            // Ball collision with top/bottom
            if (ballY - ballRadius < 0 || ballY + ballRadius > canvas.height) {
                ballSpeedY = -ballSpeedY;
            }

            // Ball collision with player paddle
            if (ballX - ballRadius < paddleWidth && ballY > playerY && ballY < playerY + paddleHeight) {
                ballSpeedX = Math.abs(ballSpeedX);
                ballSpeedY += (ballY - (playerY + paddleHeight / 2)) * 0.1;
            }

            // Ball collision with AI paddle
            if (ballX + ballRadius > canvas.width - paddleWidth && ballY > aiY && ballY < aiY + paddleHeight) {
                ballSpeedX = -Math.abs(ballSpeedX);
                ballSpeedY += (ballY - (aiY + paddleHeight / 2)) * 0.1;
            }

            // Scoring
            if (ballX < 0) {
                aiScore++;
                document.getElementById('aiScore').textContent = aiScore;
                if (aiScore >= 5) endGame(false);
                else resetBall();
            } else if (ballX > canvas.width) {
                playerScore++;
                document.getElementById('playerScore').textContent = playerScore;
                if (playerScore >= 5) endGame(true);
                else resetBall();
            }
        }

        function draw() {
            // Background
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Center line
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 10]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);

            // Player paddle
            ctx.fillStyle = '#e94560';
            ctx.fillRect(0, playerY, paddleWidth, paddleHeight);

            // AI paddle
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(canvas.width - paddleWidth, aiY, paddleWidth, paddleHeight);

            // Ball
            ctx.fillStyle = '#eee';
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
            ctx.fill();

            // Ball glow
            const gradient = ctx.createRadialGradient(ballX, ballY, 0, ballX, ballY, ballRadius * 2);
            gradient.addColorStop(0, 'rgba(238,238,238,0.3)');
            gradient.addColorStop(1, 'rgba(238,238,238,0)');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(ballX, ballY, ballRadius * 2, 0, Math.PI * 2);
            ctx.fill();
        }

        function endGame(won) {
            gameOver = true;
            setTimeout(() => {
                document.getElementById('emoji').textContent = won ? 'üéâ' : 'üò¢';
                document.getElementById('modalTitle').textContent = won ? 'You Win!' : 'AI Wins!';
                document.getElementById('modalText').textContent = won 
                    ? `You defeated the AI ${playerScore}-${aiScore}!`
                    : `The AI beat you ${aiScore}-${playerScore}. Try again!`;
                modal.classList.add('show');
            }, 500);
        }

        // Initial draw
        draw();

        // Responsive canvas
        function resizeCanvas() {
            const container = canvas.parentElement;
            const maxWidth = Math.min(container.offsetWidth, 600);
            const scale = maxWidth / 600;
            canvas.style.width = maxWidth + 'px';
            canvas.style.height = (400 * scale) + 'px';
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
    </script>
</body>
</html>
