<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checklist Maker</title>
<style>
:root{--bg:#f5f5f5;--card:#fff;--text:#333;--border:#ddd;--accent:#ec4899;--accent2:#f472b6;--muted:#888;--success:#22c55e;--danger:#ef4444}
@media(prefers-color-scheme:dark){:root{--bg:#1a1a2e;--card:#16213e;--text:#e0e0e0;--border:#2a2a4a;--accent:#f472b6;--accent2:#f9a8d4;--muted:#999;--success:#4ade80;--danger:#f87171}}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:20px}
.container{max-width:700px;margin:0 auto}
h1{text-align:center;margin-bottom:8px;font-size:1.8rem}
.subtitle{text-align:center;color:var(--muted);margin-bottom:24px;font-size:.95rem}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;margin-bottom:16px}
label{display:block;font-weight:600;margin-bottom:6px;font-size:.85rem}
input[type=text],textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;font-size:1rem;background:var(--bg);color:var(--text);font-family:inherit}
textarea{min-height:80px;resize:vertical}
.field{margin-bottom:14px}
.add-row{display:flex;gap:8px;margin-bottom:12px}
.add-row input{flex:1}
.btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .2s}
.btn-primary{background:var(--accent);color:#fff}
.btn-primary:hover{background:var(--accent2)}
.btn-sm{padding:6px 14px;font-size:.8rem}
.btn-outline{border:1px solid var(--border);background:transparent;color:var(--text)}
.btn-danger{border:1px solid var(--danger);background:transparent;color:var(--danger)}
.btn-row{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}
.items{list-style:none;min-height:40px}
.item{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid var(--border);border-radius:8px;margin-bottom:6px;background:var(--card);transition:all .2s;cursor:grab}
.item:hover{border-color:var(--accent)}
.item.checked .item-text{text-decoration:line-through;color:var(--muted)}
.item input[type=checkbox]{width:18px;height:18px;accent-color:var(--accent);cursor:pointer;flex-shrink:0}
.item-text{flex:1;font-size:.95rem}
.item-edit{background:none;border:none;color:var(--muted);cursor:pointer;font-size:.8rem;padding:4px}
.item-delete{background:none;border:none;color:var(--danger);cursor:pointer;font-size:1rem;padding:4px;opacity:.5}
.item-delete:hover{opacity:1}
.drag-handle{color:var(--muted);cursor:grab;font-size:1.1rem;user-select:none}
.progress-bar{height:8px;background:var(--border);border-radius:4px;overflow:hidden;margin:12px 0}
.progress-fill{height:100%;background:var(--accent);border-radius:4px;transition:width .3s}
.progress-text{text-align:center;font-size:.85rem;color:var(--muted);margin-bottom:8px}
.template-btns{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.template-btns button{padding:6px 12px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text);cursor:pointer;font-size:.8rem}
.template-btns button:hover{border-color:var(--accent)}
.print-only{display:none}
.toast{position:fixed;bottom:20px;right:20px;background:var(--success);color:#fff;padding:12px 20px;border-radius:8px;font-weight:600;opacity:0;transition:opacity .3s;pointer-events:none}
.toast.show{opacity:1}
@media print{body{padding:0;background:#fff;color:#000}.card{border:none;box-shadow:none;padding:12px}.btn,.btn-row,.template-btns,.add-row,.item-delete,.item-edit,.drag-handle,.subtitle,.progress-bar{display:none!important}.print-only{display:block}.item{border:none;border-bottom:1px solid #ddd;border-radius:0;padding:6px 0}}
</style>
</head>
<body>
<div class="container">
<h1>‚úÖ Checklist Maker</h1>
<p class="subtitle">Create, manage, and print beautiful checklists</p>

<div class="card">
<div class="field">
<label>Checklist Title</label>
<input type="text" id="title" placeholder="My Checklist" value="My Checklist" oninput="save()">
</div>
<label>Quick Templates</label>
<div class="template-btns">
<button onclick="loadTemplate('travel')">‚úàÔ∏è Travel</button>
<button onclick="loadTemplate('grocery')">üõí Grocery</button>
<button onclick="loadTemplate('move')">üì¶ Moving</button>
<button onclick="loadTemplate('project')">üìã Project</button>
<button onclick="loadTemplate('wedding')">üíí Wedding</button>
<button onclick="loadTemplate('morning')">üåÖ Morning</button>
</div>
</div>

<div class="card">
<div class="progress-text" id="progressText">0 / 0 completed</div>
<div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>

<div class="add-row">
<input type="text" id="newItem" placeholder="Add new item..." onkeydown="if(event.key==='Enter')addItem()">
<button class="btn btn-primary" onclick="addItem()">+ Add</button>
</div>

<ul class="items" id="items"></ul>

<div class="btn-row">
<button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Print</button>
<button class="btn btn-outline" onclick="exportMarkdown()">üìù Export MD</button>
<button class="btn btn-outline" onclick="copyText()">üìã Copy Text</button>
<button class="btn btn-danger btn-sm" onclick="uncheckAll()">‚Ü©Ô∏è Uncheck All</button>
<button class="btn btn-danger btn-sm" onclick="clearChecked()">üóë Clear Done</button>
<button class="btn btn-danger btn-sm" onclick="clearAll()">üóë Clear All</button>
</div>
</div>
</div>
<div class="toast" id="toast"></div>
<script>
let items=JSON.parse(localStorage.getItem('checklist-items')||'[]');
let dragIdx=null;

function save(){localStorage.setItem('checklist-items',JSON.stringify(items));localStorage.setItem('checklist-title',document.getElementById('title').value)}
function load(){const t=localStorage.getItem('checklist-title');if(t)document.getElementById('title').value=t}

function render(){
  const ul=document.getElementById('items');
  ul.innerHTML=items.map((item,i)=>`
    <li class="item${item.done?' checked':''}" draggable="true" ondragstart="dragStart(${i})" ondragover="dragOver(event,${i})" ondrop="drop(${i})">
      <span class="drag-handle">‚†ø</span>
      <input type="checkbox" ${item.done?'checked':''} onchange="toggle(${i})">
      <span class="item-text">${esc(item.text)}</span>
      <button class="item-edit" onclick="editItem(${i})" title="Edit">‚úèÔ∏è</button>
      <button class="item-delete" onclick="removeItem(${i})" title="Delete">‚úï</button>
    </li>`).join('');
  const done=items.filter(i=>i.done).length;
  document.getElementById('progressText').textContent=`${done} / ${items.length} completed`;
  document.getElementById('progressFill').style.width=items.length?`${done/items.length*100}%`:'0%';
  save();
}

function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}

function addItem(){
  const inp=document.getElementById('newItem');
  const text=inp.value.trim();
  if(!text)return;
  // Support multi-line (paste list)
  const lines=text.split('\n').map(l=>l.trim()).filter(Boolean);
  lines.forEach(l=>items.push({text:l,done:false}));
  inp.value='';render();inp.focus();
}

function toggle(i){items[i].done=!items[i].done;render()}
function removeItem(i){items.splice(i,1);render()}
function editItem(i){const t=prompt('Edit item:',items[i].text);if(t!==null&&t.trim()){items[i].text=t.trim();render()}}
function uncheckAll(){items.forEach(i=>i.done=false);render()}
function clearChecked(){items=items.filter(i=>!i.done);render()}
function clearAll(){if(confirm('Clear all items?')){items=[];render()}}

function dragStart(i){dragIdx=i}
function dragOver(e,i){e.preventDefault()}
function drop(i){if(dragIdx===null||dragIdx===i)return;const item=items.splice(dragIdx,1)[0];items.splice(i,0,item);dragIdx=null;render()}

function exportMarkdown(){
  const title=document.getElementById('title').value;
  const md=`# ${title}\n\n`+items.map(i=>`- [${i.done?'x':' '}] ${i.text}`).join('\n');
  const blob=new Blob([md],{type:'text/markdown'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=title.toLowerCase().replace(/\s+/g,'-')+'.md';a.click();
}

function copyText(){
  const title=document.getElementById('title').value;
  const text=`${title}\n${'='.repeat(title.length)}\n`+items.map(i=>`[${i.done?'‚úì':' '}] ${i.text}`).join('\n');
  navigator.clipboard.writeText(text);
  showToast('Copied!');
}

const templates={
  travel:['Passport & visa','Flight tickets','Hotel confirmation','Travel insurance','Charger & adapter','Toiletries','Medications','Snacks','Neck pillow','Downloaded maps'],
  grocery:['Bread','Milk','Eggs','Butter','Fruits','Vegetables','Chicken','Rice','Pasta','Olive oil','Coffee','Cheese'],
  move:['Get boxes & packing tape','Change address (post, bank, etc)','Disconnect utilities','Pack room by room','Label all boxes','Hire movers / rent truck','Clean old place','Set up new utilities','Unpack essentials first','Update driver\'s license'],
  project:['Define project scope','Create timeline','Assign team roles','Set up communication channel','Design mockups','Review & approve design','Develop MVP','Test & QA','Gather feedback','Launch!'],
  wedding:['Set budget','Choose venue','Send invitations','Book photographer','Arrange catering','Select flowers','Plan seating chart','Arrange music/DJ','Book honeymoon','Final rehearsal'],
  morning:['Wake up at 6:00 AM','Drink water','10 min meditation','Exercise / stretch','Shower','Healthy breakfast','Review today\'s schedule','Check emails','Set top 3 priorities','Start deep work']
};

function loadTemplate(key){
  if(items.length&&!confirm('Replace current list?'))return;
  items=templates[key].map(t=>({text:t,done:false}));
  document.getElementById('title').value=key.charAt(0).toUpperCase()+key.slice(1)+' Checklist';
  render();
}

function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1500)}

load();render();
document.getElementById('newItem').focus();
</script>
</body>
</html>
