<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chmod ê³„ì‚°ê¸° | ì›¹ ë„êµ¬ ëª¨ìŒ</title>
    <style>
        :root {
            --bg-primary: #ffffff; --bg-secondary: #f8f9fa;
            --text-primary: #212529; --text-secondary: #6c757d;
            --accent: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --border: #dee2e6; --shadow: rgba(0,0,0,0.1); --card-bg: #ffffff;
        }
        [data-theme="dark"] {
            --bg-primary: #1a1a1a; --bg-secondary: #121212;
            --text-primary: #f8f9fa; --text-secondary: #adb5bd;
            --border: #444; --shadow: rgba(0,0,0,0.3); --card-bg: #2d2d2d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: var(--bg-secondary); color: var(--text-primary);
            line-height: 1.6; padding: 20px; min-height: 100vh;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; }
        .back-btn { text-decoration: none; color: var(--text-secondary); display: flex; align-items: center; gap: 5px; font-weight: 500; }
        .back-btn:hover { color: var(--text-primary); }
        .theme-toggle { background: none; border: none; cursor: pointer; font-size: 1.5rem; }
        .card {
            background: var(--card-bg); border-radius: 20px; padding: 30px;
            box-shadow: 0 10px 30px var(--shadow); border: 1px solid var(--border); margin-bottom: 20px;
        }
        h1 { font-size: 1.8rem; margin-bottom: 10px; background: var(--accent); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
        .desc { color: var(--text-secondary); margin-bottom: 20px; }
        .perm-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .perm-table th, .perm-table td { padding: 12px; text-align: center; border-bottom: 1px solid var(--border); }
        .perm-table th { font-size: 0.85rem; color: var(--text-secondary); font-weight: 600; }
        .perm-table td label { display: inline-flex; align-items: center; gap: 4px; cursor: pointer; font-size: 0.9rem; margin: 0; font-weight: 400; }
        .perm-table input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: #667eea; }
        .result-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 16px; }
        .result-box {
            background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px;
            padding: 16px; text-align: center;
        }
        .result-label { font-size: 0.8rem; color: var(--text-secondary); font-weight: 600; margin-bottom: 6px; }
        .result-value { font-family: 'Courier New', monospace; font-size: 1.4rem; font-weight: 700; }
        .cmd-box {
            background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px;
            padding: 16px; font-family: 'Courier New', monospace; font-size: 1rem;
            display: flex; justify-content: space-between; align-items: center;
        }
        .copy-btn {
            padding: 6px 14px; background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 8px; cursor: pointer; font-size: 0.8rem; color: var(--text-primary);
        }
        .copy-btn:hover { background: var(--bg-primary); }
        .octal-input {
            width: 120px; padding: 10px; border: 2px solid var(--border); border-radius: 12px;
            background: var(--bg-primary); color: var(--text-primary); font-size: 1.4rem;
            font-family: 'Courier New', monospace; text-align: center; outline: none;
        }
        .octal-input:focus { border-color: #667eea; }
        .common-presets { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
        .preset-btn {
            padding: 8px 14px; border: 1px solid var(--border); border-radius: 8px;
            background: var(--bg-primary); cursor: pointer; font-size: 0.85rem; color: var(--text-primary);
        }
        .preset-btn:hover { border-color: #667eea; background: rgba(102,126,234,0.1); }
        @media (max-width: 600px) { .result-row { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
        </header>

        <div class="card">
            <h1>ğŸ” Chmod ê³„ì‚°ê¸°</h1>
            <p class="desc">Unix/Linux íŒŒì¼ í¼ë¯¸ì…˜ì„ ì²´í¬ë°•ìŠ¤ë¡œ ì„¤ì •í•˜ê±°ë‚˜, ìˆ«ìë¥¼ ì…ë ¥í•˜ì—¬ ë³€í™˜í•©ë‹ˆë‹¤.</p>

            <div style="text-align:center;margin-bottom:20px;">
                <label style="font-weight:600;font-size:0.9rem;">ìˆ«ì ì§ì ‘ ì…ë ¥: </label>
                <input type="text" class="octal-input" id="octalInput" value="755" maxlength="4" oninput="fromOctal()">
            </div>

            <table class="perm-table">
                <thead>
                    <tr><th></th><th>Read (r)</th><th>Write (w)</th><th>Execute (x)</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Owner</strong></td>
                        <td><label><input type="checkbox" data-who="u" data-perm="r" checked onchange="calc()"> r</label></td>
                        <td><label><input type="checkbox" data-who="u" data-perm="w" checked onchange="calc()"> w</label></td>
                        <td><label><input type="checkbox" data-who="u" data-perm="x" checked onchange="calc()"> x</label></td>
                    </tr>
                    <tr>
                        <td><strong>Group</strong></td>
                        <td><label><input type="checkbox" data-who="g" data-perm="r" checked onchange="calc()"> r</label></td>
                        <td><label><input type="checkbox" data-who="g" data-perm="w" onchange="calc()"> w</label></td>
                        <td><label><input type="checkbox" data-who="g" data-perm="x" checked onchange="calc()"> x</label></td>
                    </tr>
                    <tr>
                        <td><strong>Others</strong></td>
                        <td><label><input type="checkbox" data-who="o" data-perm="r" checked onchange="calc()"> r</label></td>
                        <td><label><input type="checkbox" data-who="o" data-perm="w" onchange="calc()"> w</label></td>
                        <td><label><input type="checkbox" data-who="o" data-perm="x" checked onchange="calc()"> x</label></td>
                    </tr>
                </tbody>
            </table>

            <div class="result-row">
                <div class="result-box">
                    <div class="result-label">ìˆ«ì (Octal)</div>
                    <div class="result-value" id="resOctal">755</div>
                </div>
                <div class="result-box">
                    <div class="result-label">ì‹¬ë³¼ë¦­</div>
                    <div class="result-value" id="resSymbolic">rwxr-xr-x</div>
                </div>
                <div class="result-box">
                    <div class="result-label">íŒŒì¼ ìœ í˜•</div>
                    <div class="result-value" id="resType" style="font-size:1rem;">-rwxr-xr-x</div>
                </div>
            </div>

            <div class="cmd-box">
                <span id="cmdText">chmod 755 filename</span>
                <button class="copy-btn" onclick="copyCmd()">ë³µì‚¬</button>
            </div>

            <div class="common-presets">
                <strong style="width:100%;font-size:0.85rem;margin-bottom:4px;">ìì£¼ ì“°ëŠ” í¼ë¯¸ì…˜:</strong>
                <button class="preset-btn" onclick="setOctal('644')">644 (íŒŒì¼)</button>
                <button class="preset-btn" onclick="setOctal('755')">755 (ë””ë ‰í† ë¦¬)</button>
                <button class="preset-btn" onclick="setOctal('700')">700 (ë¹„ê³µê°œ)</button>
                <button class="preset-btn" onclick="setOctal('600')">600 (ë¹„ë°€ íŒŒì¼)</button>
                <button class="preset-btn" onclick="setOctal('777')">777 (ëª¨ë‘ í—ˆìš©)</button>
                <button class="preset-btn" onclick="setOctal('400')">400 (ì½ê¸° ì „ìš©)</button>
                <button class="preset-btn" onclick="setOctal('666')">666 (rw ëª¨ë‘)</button>
            </div>
        </div>
    </div>

    <script>
        const PERM_MAP = { r: 4, w: 2, x: 1 };
        const WHOS = ['u', 'g', 'o'];

        function getCheckbox(who, perm) {
            return document.querySelector(`input[data-who="${who}"][data-perm="${perm}"]`);
        }

        function calc() {
            let octal = '';
            let symbolic = '';
            WHOS.forEach(who => {
                let val = 0;
                let sym = '';
                ['r', 'w', 'x'].forEach(p => {
                    const checked = getCheckbox(who, p).checked;
                    if (checked) { val += PERM_MAP[p]; sym += p; }
                    else { sym += '-'; }
                });
                octal += val;
                symbolic += sym;
            });
            document.getElementById('resOctal').textContent = octal;
            document.getElementById('resSymbolic').textContent = symbolic;
            document.getElementById('resType').textContent = '-' + symbolic;
            document.getElementById('cmdText').textContent = `chmod ${octal} filename`;
            document.getElementById('octalInput').value = octal;
        }

        function fromOctal() {
            let val = document.getElementById('octalInput').value.replace(/[^0-7]/g, '');
            if (val.length > 4) val = val.slice(0, 4);
            // pad to 3
            while (val.length < 3) val = '0' + val;
            // use last 3
            const digits = val.slice(-3);
            WHOS.forEach((who, i) => {
                const d = parseInt(digits[i]) || 0;
                getCheckbox(who, 'r').checked = !!(d & 4);
                getCheckbox(who, 'w').checked = !!(d & 2);
                getCheckbox(who, 'x').checked = !!(d & 1);
            });
            calc();
        }

        function setOctal(val) {
            document.getElementById('octalInput').value = val;
            fromOctal();
        }

        function copyCmd() {
            const text = document.getElementById('cmdText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.cmd-box .copy-btn');
                btn.textContent = 'ë³µì‚¬ë¨!';
                setTimeout(() => btn.textContent = 'ë³µì‚¬', 1500);
            });
        }

        function toggleTheme() {
            const t = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        }
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');
    </script>
</body>
</html>
