<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS ëª…í™•ë„ ê³„ì‚°ê¸° | CSS Specificity Calculator</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#fff;--bg2:#f8f9fa;--text:#212529;--text2:#6c757d;--accent:#667eea;--border:#dee2e6;--shadow:rgba(0,0,0,.1);--card:#fff;--code-bg:#f1f3f5}
        [data-theme="dark"]{--bg:#1a1a1a;--bg2:#2d2d2d;--text:#f8f9fa;--text2:#adb5bd;--border:#495057;--shadow:rgba(0,0,0,.3);--card:#2d2d2d;--code-bg:#3d3d3d}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:var(--bg2);color:var(--text);padding:20px;min-height:100vh;transition:all .3s}
        .container{max-width:800px;margin:0 auto}
        header{text-align:center;margin-bottom:30px}
        h1{font-size:1.8rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
        .subtitle{color:var(--text2);font-size:.95rem}
        .theme-toggle{position:fixed;top:15px;right:15px;background:var(--card);border:1px solid var(--border);border-radius:50%;width:40px;height:40px;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;z-index:10}
        .home-btn{position:fixed;top:15px;left:15px;text-decoration:none;background:var(--card);border:1px solid var(--border);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;z-index:10}
        .panel{background:var(--card);border-radius:12px;padding:24px;margin-bottom:20px;box-shadow:0 2px 8px var(--shadow)}
        .input-area{width:100%;padding:14px 16px;border:2px solid var(--border);border-radius:8px;font-size:1.1rem;font-family:'SF Mono',Monaco,Consolas,monospace;background:var(--bg);color:var(--text);transition:border .3s}
        .input-area:focus{outline:none;border-color:var(--accent)}
        .specificity-display{display:flex;justify-content:center;gap:0;margin:30px 0}
        .spec-block{text-align:center;padding:20px 30px;min-width:90px}
        .spec-block:first-child{border-radius:12px 0 0 12px}
        .spec-block:last-child{border-radius:0 12px 12px 0}
        .spec-num{font-size:3rem;font-weight:800;font-family:'SF Mono',Monaco,Consolas,monospace;line-height:1}
        .spec-label{font-size:.75rem;margin-top:8px;text-transform:uppercase;letter-spacing:1px;font-weight:600}
        .spec-inline{background:#ff6b6b;color:#fff}
        .spec-id{background:#ffd43b;color:#333}
        .spec-class{background:#51cf66;color:#fff}
        .spec-element{background:#339af0;color:#fff}
        .comma{font-size:2rem;align-self:center;color:var(--text2);padding:0 2px}
        .selector-list{margin-top:20px}
        .selector-item{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border:1px solid var(--border);border-radius:8px;margin-bottom:8px;background:var(--bg);transition:all .2s}
        .selector-item:hover{border-color:var(--accent)}
        .selector-item code{font-family:'SF Mono',Monaco,Consolas,monospace;font-size:.9rem}
        .selector-item .spec-badge{font-family:'SF Mono',Monaco,Consolas,monospace;font-size:.85rem;background:var(--code-bg);padding:4px 10px;border-radius:6px;font-weight:600}
        .selector-item .remove{background:none;border:none;color:#e74c3c;cursor:pointer;font-size:1.2rem;padding:0 4px}
        .btn-row{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
        .btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .2s}
        .btn-primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
        .btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(102,126,234,.4)}
        .btn-secondary{background:#e9ecef;color:var(--text)}
        [data-theme="dark"] .btn-secondary{background:#3d3d3d}
        .examples{margin-top:16px}
        .examples h3{font-size:.9rem;color:var(--text2);margin-bottom:10px}
        .example-tags{display:flex;flex-wrap:wrap;gap:6px}
        .example-tag{padding:5px 12px;border-radius:16px;background:var(--code-bg);border:1px solid var(--border);color:var(--text);cursor:pointer;font-family:'SF Mono',Monaco,Consolas,monospace;font-size:.8rem;transition:all .2s}
        .example-tag:hover{border-color:var(--accent);color:var(--accent)}
        .breakdown{margin-top:16px;font-size:.85rem;color:var(--text2);line-height:1.8}
        .breakdown .match{padding:2px 6px;border-radius:4px;font-family:'SF Mono',Monaco,Consolas,monospace;font-size:.8rem}
        .match-id{background:rgba(255,212,59,.2);color:#e67700}
        .match-class{background:rgba(81,207,102,.2);color:#2b8a3e}
        .match-element{background:rgba(51,154,240,.2);color:#1864ab}
        .winner{border-left:4px solid #51cf66;padding-left:12px}
        .loser{opacity:.6}
        .toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 24px;border-radius:8px;font-size:.9rem;opacity:0;transition:opacity .3s;z-index:100}
        .toast.show{opacity:1}
        .reference{margin-top:24px}
        .ref-table{width:100%;border-collapse:collapse;font-size:.85rem}
        .ref-table th,.ref-table td{padding:10px 12px;text-align:left;border-bottom:1px solid var(--border)}
        .ref-table th{background:var(--bg2);font-weight:600;color:var(--text2)}
        @media(max-width:600px){h1{font-size:1.4rem}.spec-block{padding:14px 16px;min-width:60px}.spec-num{font-size:2rem}.specificity-display{gap:0}}
    </style>
</head>
<body>
    <a href="/tools/" class="home-btn" title="ë„êµ¬ ëª©ë¡">ğŸ </a>
    <button class="theme-toggle" onclick="toggleTheme()" title="í…Œë§ˆ ì „í™˜">ğŸŒ“</button>
    <div class="container">
        <header>
            <h1>ğŸ¯ CSS ëª…í™•ë„ ê³„ì‚°ê¸°</h1>
            <p class="subtitle">CSS ì„ íƒìì˜ Specificityë¥¼ ê³„ì‚°í•˜ê³  ë¹„êµí•©ë‹ˆë‹¤</p>
        </header>
        <div class="panel">
            <input type="text" class="input-area" id="selectorInput" placeholder="CSS ì„ íƒì ì…ë ¥... (ì˜ˆ: #main .nav > li a:hover)" oninput="calculate()" autofocus>
            <div class="specificity-display" id="specDisplay">
                <div class="spec-block spec-inline"><div class="spec-num" id="specInline">0</div><div class="spec-label">Inline</div></div>
                <div class="spec-block spec-id"><div class="spec-num" id="specId">0</div><div class="spec-label">ID</div></div>
                <div class="spec-block spec-class"><div class="spec-num" id="specClass">0</div><div class="spec-label">Class</div></div>
                <div class="spec-block spec-element"><div class="spec-num" id="specElement">0</div><div class="spec-label">Element</div></div>
            </div>
            <div class="breakdown" id="breakdown"></div>
            <div class="examples">
                <h3>ì˜ˆì œ ì„ íƒì:</h3>
                <div class="example-tags">
                    <button class="example-tag" onclick="setExample(this.textContent)">*</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">div</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">.class</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">#id</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">div.class</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">#id .class tag</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">nav > ul > li > a:hover</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">#main .content p::first-line</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">body #app .nav-item.active > a</button>
                    <button class="example-tag" onclick="setExample(this.textContent)">input[type="email"]:focus</button>
                </div>
            </div>
        </div>
        <div class="panel">
            <h2 style="font-size:1.1rem;margin-bottom:12px">âš–ï¸ ì„ íƒì ë¹„êµ</h2>
            <div class="btn-row" style="margin-bottom:14px">
                <button class="btn btn-primary" onclick="addToCompare()">+ í˜„ì¬ ì„ íƒì ì¶”ê°€</button>
                <button class="btn btn-secondary" onclick="clearCompare()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
            </div>
            <div class="selector-list" id="compareList"></div>
        </div>
        <div class="panel reference">
            <h2 style="font-size:1.1rem;margin-bottom:12px">ğŸ“š ëª…í™•ë„ ì°¸ì¡°í‘œ</h2>
            <table class="ref-table">
                <thead><tr><th>ì„ íƒì</th><th>ì˜ˆì‹œ</th><th>ëª…í™•ë„</th></tr></thead>
                <tbody>
                    <tr><td>Inline style</td><td>style="..."</td><td>1,0,0,0</td></tr>
                    <tr><td>ID ì„ íƒì</td><td>#navbar</td><td>0,1,0,0</td></tr>
                    <tr><td>Class ì„ íƒì</td><td>.active</td><td>0,0,1,0</td></tr>
                    <tr><td>ì†ì„± ì„ íƒì</td><td>[type="text"]</td><td>0,0,1,0</td></tr>
                    <tr><td>ê°€ìƒ í´ë˜ìŠ¤</td><td>:hover, :nth-child()</td><td>0,0,1,0</td></tr>
                    <tr><td>ìš”ì†Œ ì„ íƒì</td><td>div, p, span</td><td>0,0,0,1</td></tr>
                    <tr><td>ê°€ìƒ ìš”ì†Œ</td><td>::before, ::after</td><td>0,0,0,1</td></tr>
                    <tr><td>ì „ì²´ ì„ íƒì</td><td>*</td><td>0,0,0,0</td></tr>
                    <tr><td>ê²°í•©ì</td><td>>, +, ~, (space)</td><td>0,0,0,0</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="toast" id="toast"></div>
<script>
const compareItems=[];

function calculateSpecificity(selector){
    let s=selector.trim();
    if(!s)return [0,0,0,0];
    let a=0,b=0,c=0; // id, class, element (inline=0 for selectors)
    // Remove :not() content but count inside
    s=s.replace(/:not\(([^)]*)\)/g,(_,inner)=>{
        const [ia,ib,ic]=calcInner(inner);
        b+=ib;c+=ic;a+=ia;
        return '';
    });
    // Remove :is(), :has(), :where() â€” :where() has 0 specificity
    s=s.replace(/:where\([^)]*\)/g,'');
    s=s.replace(/:(is|has)\(([^)]*)\)/g,(_,fn,inner)=>{
        const [ia,ib,ic]=calcInner(inner);
        a+=ia;b+=ib;c+=ic;
        return '';
    });
    const [ra,rb,rc]=calcInner(s);
    return [0,a+ra,b+rb,c+rc];
}
function calcInner(s){
    let a=0,b=0,c=0;
    // Remove strings in attribute selectors
    s=s.replace(/\[([^\]]*)\]/g,(_)=>{b++;return ''});
    // Count IDs
    s=s.replace(/#[\w-]+/g,()=>{a++;return ''});
    // Pseudo-elements (::before, ::after, ::first-line, etc)
    s=s.replace(/::[\w-]+/g,()=>{c++;return ''});
    // Pseudo-classes
    s=s.replace(/:[\w-]+(\([^)]*\))?/g,()=>{b++;return ''});
    // Classes
    s=s.replace(/\.[\w-]+/g,()=>{b++;return ''});
    // Remove combinators, universal
    s=s.replace(/[>+~*]/g,' ');
    // Elements
    const els=s.trim().split(/\s+/).filter(e=>e&&/^[a-zA-Z][\w-]*$/.test(e));
    c+=els.length;
    return [a,b,c];
}
function specToString(spec){return spec.join(',');}
function specToScore(spec){return spec[0]*1000+spec[1]*100+spec[2]*10+spec[3];}

function calculate(){
    const input=document.getElementById('selectorInput').value;
    const spec=calculateSpecificity(input);
    document.getElementById('specInline').textContent=spec[0];
    document.getElementById('specId').textContent=spec[1];
    document.getElementById('specClass').textContent=spec[2];
    document.getElementById('specElement').textContent=spec[3];
    // Breakdown
    const bd=document.getElementById('breakdown');
    if(!input.trim()){bd.innerHTML='';return;}
    let html=`<strong>ëª…í™•ë„: ${specToString(spec)}</strong> â€” `;
    if(spec[1])html+=`<span class="match match-id">IDÃ—${spec[1]}</span> `;
    if(spec[2])html+=`<span class="match match-class">Class/Attr/PseudoClassÃ—${spec[2]}</span> `;
    if(spec[3])html+=`<span class="match match-element">Element/PseudoElementÃ—${spec[3]}</span> `;
    if(!spec[1]&&!spec[2]&&!spec[3])html+='ì „ì²´ ì„ íƒì(*) ë˜ëŠ” ê²°í•©ìë§Œ ì‚¬ìš©ë¨';
    bd.innerHTML=html;
}
function setExample(sel){document.getElementById('selectorInput').value=sel;calculate();}
function addToCompare(){
    const input=document.getElementById('selectorInput').value.trim();
    if(!input){showToast('ì„ íƒìë¥¼ ì…ë ¥í•˜ì„¸ìš”');return;}
    const spec=calculateSpecificity(input);
    compareItems.push({selector:input,spec});
    renderCompare();
}
function renderCompare(){
    const list=document.getElementById('compareList');
    if(!compareItems.length){list.innerHTML='';return;}
    const maxScore=Math.max(...compareItems.map(i=>specToScore(i.spec)));
    list.innerHTML=compareItems.map((item,i)=>{
        const score=specToScore(item.spec);
        const isWinner=score===maxScore&&compareItems.length>1;
        return `<div class="selector-item ${isWinner?'winner':compareItems.length>1?'loser':''}"><code>${item.selector}</code><span class="spec-badge">${specToString(item.spec)}</span><button class="remove" onclick="compareItems.splice(${i},1);renderCompare()">Ã—</button></div>`;
    }).join('');
}
function clearCompare(){compareItems.length=0;renderCompare();}
function toggleTheme(){const d=document.documentElement;const t=d.getAttribute('data-theme')==='dark'?'':'dark';d.setAttribute('data-theme',t);localStorage.setItem('theme',t);}
function showToast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000);}
if(localStorage.getItem('theme')==='dark')document.documentElement.setAttribute('data-theme','dark');
calculate();
</script>
</body>
</html>