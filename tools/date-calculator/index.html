<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #ffffff; --bg-secondary: #f8f9fa; --bg-tertiary: #e9ecef;
            --text-primary: #212529; --text-secondary: #6c757d;
            --accent: #6366f1; --accent-light: #818cf8;
            --border: #dee2e6; --shadow: rgba(0,0,0,0.1);
        }
        [data-theme="dark"] {
            --bg-primary: #0f0f23; --bg-secondary: #1a1a2e; --bg-tertiary: #16213e;
            --text-primary: #e4e4e7; --text-secondary: #a1a1aa;
            --border: #27272a; --shadow: rgba(0,0,0,0.5);
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: var(--bg-primary); color: var(--text-primary);
            padding: 20px; min-height: 100vh; transition: background 0.3s, color 0.3s;
        }
        .container { max-width: 600px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        h1 { font-size: 2rem; color: var(--accent); margin-bottom: 8px; }
        .subtitle { color: var(--text-secondary); font-size: 0.9rem; }
        .theme-toggle {
            position: fixed; top: 20px; right: 20px; width: 44px; height: 44px;
            border-radius: 50%; background: var(--bg-secondary); border: 2px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; cursor: pointer; z-index: 1000;
        }
        .card {
            background: var(--bg-secondary); border-radius: 16px; padding: 24px;
            border: 1px solid var(--border); margin-bottom: 20px;
        }
        .card h2 { font-size: 1.1rem; margin-bottom: 16px; color: var(--accent); }
        .row { display: flex; gap: 12px; margin-bottom: 14px; align-items: center; flex-wrap: wrap; }
        label { font-size: 0.85rem; color: var(--text-secondary); display: block; margin-bottom: 4px; }
        input[type="date"], input[type="number"], select {
            padding: 10px 14px; border: 1px solid var(--border); border-radius: 10px;
            background: var(--bg-primary); color: var(--text-primary);
            font-size: 1rem; flex: 1; min-width: 0;
        }
        select { cursor: pointer; }
        .btn {
            padding: 10px 20px; border: none; border-radius: 10px;
            background: var(--accent); color: white; font-weight: 700;
            cursor: pointer; font-size: 0.95rem; transition: opacity 0.2s;
        }
        .btn:hover { opacity: 0.85; }
        .result-box {
            background: var(--bg-tertiary); border-radius: 12px; padding: 20px;
            text-align: center; border: 1px solid var(--border); margin-top: 12px;
        }
        .result-big { font-size: 2rem; font-weight: 800; color: var(--accent); }
        .result-detail { color: var(--text-secondary); font-size: 0.85rem; margin-top: 8px; line-height: 1.6; }
        @media (max-width: 500px) {
            .row { flex-direction: column; }
            input[type="date"], input[type="number"], select { width: 100%; }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" id="theme-btn">üåô</button>
    <div class="container">
        <header>
            <h1>üìÖ Date Calculator</h1>
            <p class="subtitle">ÎÇ†Ïßú Ï∞®Ïù¥ Í≥ÑÏÇ∞ & ÎÇ†Ïßú ÎçîÌïòÍ∏∞/ÎπºÍ∏∞</p>
        </header>

        <div class="card">
            <h2>üìè Îëê ÎÇ†Ïßú ÏÇ¨Ïù¥ Ï∞®Ïù¥</h2>
            <div class="row">
                <div style="flex:1"><label>ÏãúÏûëÏùº</label><input type="date" id="diff-start"></div>
                <div style="flex:1"><label>Ï¢ÖÎ£åÏùº</label><input type="date" id="diff-end"></div>
            </div>
            <button class="btn" onclick="calcDiff()">Í≥ÑÏÇ∞</button>
            <div class="result-box" id="diff-result" style="display:none">
                <div class="result-big" id="diff-days"></div>
                <div class="result-detail" id="diff-detail"></div>
            </div>
        </div>

        <div class="card">
            <h2>‚ûï ÎÇ†Ïßú ÎçîÌïòÍ∏∞/ÎπºÍ∏∞</h2>
            <div class="row">
                <div style="flex:1"><label>Í∏∞Ï§ÄÏùº</label><input type="date" id="add-base"></div>
            </div>
            <div class="row">
                <div style="flex:1"><label>Í∞í</label><input type="number" id="add-value" value="7" min="-9999" max="9999"></div>
                <div style="flex:1">
                    <label>Îã®ÏúÑ</label>
                    <select id="add-unit">
                        <option value="days">Ïùº</option>
                        <option value="weeks">Ï£º</option>
                        <option value="months">Í∞úÏõî</option>
                        <option value="years">ÎÖÑ</option>
                    </select>
                </div>
            </div>
            <button class="btn" onclick="calcAdd()">Í≥ÑÏÇ∞</button>
            <div class="result-box" id="add-result" style="display:none">
                <div class="result-big" id="add-date"></div>
                <div class="result-detail" id="add-detail"></div>
            </div>
        </div>

        <div class="card">
            <h2>üéÇ D-Day Ïπ¥Ïö¥ÌÑ∞</h2>
            <div class="row">
                <div style="flex:1"><label>Î™©ÌëúÏùº</label><input type="date" id="dday-target"></div>
            </div>
            <button class="btn" onclick="calcDday()">Í≥ÑÏÇ∞</button>
            <div class="result-box" id="dday-result" style="display:none">
                <div class="result-big" id="dday-count"></div>
                <div class="result-detail" id="dday-detail"></div>
            </div>
        </div>
    </div>
    <script>
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('diff-start').value = today;
        document.getElementById('diff-end').value = today;
        document.getElementById('add-base').value = today;
        document.getElementById('dday-target').value = today;

        function initTheme() {
            const s = localStorage.getItem('date-calc-theme') || 'light';
            document.documentElement.setAttribute('data-theme', s);
            document.getElementById('theme-btn').textContent = s === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }
        function toggleTheme() {
            const c = document.documentElement.getAttribute('data-theme') || 'light';
            const n = c === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', n);
            localStorage.setItem('date-calc-theme', n);
            document.getElementById('theme-btn').textContent = n === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }

        function calcDiff() {
            const s = new Date(document.getElementById('diff-start').value);
            const e = new Date(document.getElementById('diff-end').value);
            if (isNaN(s) || isNaN(e)) return;
            const diffMs = e - s;
            const days = Math.round(diffMs / 86400000);
            const absDays = Math.abs(days);
            const weeks = Math.floor(absDays / 7);
            const remDays = absDays % 7;
            const months = Math.round(absDays / 30.44);
            const years = (absDays / 365.25).toFixed(1);
            document.getElementById('diff-days').textContent = `${days}Ïùº`;
            document.getElementById('diff-detail').innerHTML =
                `${weeks}Ï£º ${remDays}Ïùº ¬∑ ÏïΩ ${months}Í∞úÏõî ¬∑ ÏïΩ ${years}ÎÖÑ<br>${absDays.toLocaleString()}Ïùº (${(absDays*24).toLocaleString()}ÏãúÍ∞Ñ)`;
            document.getElementById('diff-result').style.display = '';
        }

        function calcAdd() {
            const base = new Date(document.getElementById('add-base').value);
            if (isNaN(base)) return;
            const val = parseInt(document.getElementById('add-value').value) || 0;
            const unit = document.getElementById('add-unit').value;
            const result = new Date(base);
            if (unit === 'days') result.setDate(result.getDate() + val);
            else if (unit === 'weeks') result.setDate(result.getDate() + val * 7);
            else if (unit === 'months') result.setMonth(result.getMonth() + val);
            else if (unit === 'years') result.setFullYear(result.getFullYear() + val);
            const dayNames = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
            const fmt = result.toISOString().split('T')[0];
            document.getElementById('add-date').textContent = fmt;
            document.getElementById('add-detail').textContent = `${dayNames[result.getDay()]}ÏöîÏùº`;
            document.getElementById('add-result').style.display = '';
        }

        function calcDday() {
            const target = new Date(document.getElementById('dday-target').value);
            if (isNaN(target)) return;
            const now = new Date(); now.setHours(0,0,0,0);
            target.setHours(0,0,0,0);
            const diff = Math.round((target - now) / 86400000);
            let text;
            if (diff > 0) text = `D-${diff}`;
            else if (diff < 0) text = `D+${Math.abs(diff)}`;
            else text = 'D-Day! üéâ';
            document.getElementById('dday-count').textContent = text;
            const dayNames = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
            document.getElementById('dday-detail').textContent = `${target.toISOString().split('T')[0]} ${dayNames[target.getDay()]}ÏöîÏùº`;
            document.getElementById('dday-result').style.display = '';
        }
        initTheme();
    </script>
</body>
</html>
