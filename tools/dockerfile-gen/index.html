<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dockerfile ìƒì„±ê¸° | Dockerfile Generator</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#fff;--bg2:#f8fafc;--card:#fff;--text:#1f2937;--muted:#6b7280;--border:#e5e7eb;--accent:#2563eb}
    [data-theme="dark"]{--bg:#0b1220;--bg2:#0f172a;--card:#1e293b;--text:#f8fafc;--muted:#94a3b8;--border:#334155;--accent:#60a5fa}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:var(--bg2);color:var(--text);padding:20px}
    .container{max-width:980px;margin:0 auto}
    h1{text-align:center;font-size:1.8rem;background:linear-gradient(135deg,#2563eb,#4f46e5);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .sub{text-align:center;color:var(--muted);margin:8px 0 18px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .panel{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
    label{display:block;font-size:.82rem;color:var(--muted);margin-bottom:4px;font-weight:600}
    input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);margin-bottom:8px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .out{white-space:pre-wrap;background:var(--bg);border:1px solid var(--border);padding:12px;border-radius:8px;min-height:420px;font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:.85rem}
    .btn{padding:9px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(135deg,#2563eb,#4f46e5);color:#fff}
    .btn.gray{background:#e5e7eb}
    [data-theme="dark"] .btn.gray{background:#334155;color:#fff}
    .top{position:fixed;top:14px;width:40px;height:40px;border:1px solid var(--border);border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--card);text-decoration:none}
    .home{left:14px}.theme{right:14px;cursor:pointer}
    @media(max-width:760px){.grid,.row{grid-template-columns:1fr}.out{min-height:280px}}
  </style>
</head>
<body>
  <a class="top home" href="/tools/">ğŸ </a>
  <button class="top theme" onclick="toggleTheme()">ğŸŒ“</button>
  <div class="container">
    <h1>ğŸ³ Dockerfile ìƒì„±ê¸°</h1>
    <p class="sub">ëŸ°íƒ€ì„/ë¹Œë“œ ì˜µì…˜ì„ ì„ íƒí•´ Dockerfileì„ ìƒì„±í•©ë‹ˆë‹¤.</p>

    <div class="grid">
      <div>
        <div class="panel">
          <label>Preset</label>
          <select id="preset" onchange="applyPreset()">
            <option value="node">Node.js</option>
            <option value="python">Python</option>
            <option value="go">Go</option>
            <option value="rust">Rust</option>
            <option value="java">Java (JAR)</option>
            <option value="nginx">Static + Nginx</option>
          </select>
          <div class="row">
            <div>
              <label>Base Image</label>
              <input id="base" oninput="gen()">
            </div>
            <div>
              <label>Workdir</label>
              <input id="workdir" value="/app" oninput="gen()">
            </div>
          </div>
          <div class="row">
            <div>
              <label>Port</label>
              <input id="port" value="3000" oninput="gen()">
            </div>
            <div>
              <label>User</label>
              <input id="user" placeholder="node / appuser" oninput="gen()">
            </div>
          </div>
          <label>Build Command</label>
          <input id="buildCmd" placeholder="npm run build" oninput="gen()">
          <label>Start Command</label>
          <input id="startCmd" placeholder="npm start" oninput="gen()">
          <label>ì¶”ê°€ íŒ¨í‚¤ì§€ ì„¤ì¹˜ (apt)</label>
          <input id="apt" placeholder="curl git" oninput="gen()">
          <label>ENV (KEY=VALUE, ì¤„ë°”ê¿ˆ êµ¬ë¶„)</label>
          <textarea id="envs" rows="4" oninput="gen()"></textarea>
          <label>ë³µì‚¬ ì œì™¸ íŒ¨í„´ (.dockerignore)</label>
          <textarea id="ignore" rows="4" oninput="gen()">node_modules
.git
*.log</textarea>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn primary" onclick="copyDockerfile()">ğŸ“‹ Dockerfile ë³µì‚¬</button>
            <button class="btn gray" onclick="copyIgnore()">ğŸ“‹ .dockerignore ë³µì‚¬</button>
          </div>
        </div>
      </div>
      <div>
        <div class="panel">
          <label>Dockerfile</label>
          <div class="out" id="out"></div>
        </div>
      </div>
    </div>
  </div>
<script>
const presets={
  node:{base:'node:20-alpine',workdir:'/app',port:'3000',start:'npm start',build:'npm run build'},
  python:{base:'python:3.12-slim',workdir:'/app',port:'8000',start:'python app.py',build:''},
  go:{base:'golang:1.23-alpine',workdir:'/app',port:'8080',start:'./app',build:'go build -o app .'},
  rust:{base:'rust:1.85-slim',workdir:'/app',port:'8080',start:'./target/release/app',build:'cargo build --release'},
  java:{base:'eclipse-temurin:21-jre',workdir:'/app',port:'8080',start:'java -jar app.jar',build:''},
  nginx:{base:'nginx:alpine',workdir:'/usr/share/nginx/html',port:'80',start:'nginx -g "daemon off;"',build:''}
};
function applyPreset(){
  const p=presets[document.getElementById('preset').value];
  document.getElementById('base').value=p.base;
  document.getElementById('workdir').value=p.workdir;
  document.getElementById('port').value=p.port;
  document.getElementById('startCmd').value=p.start;
  document.getElementById('buildCmd').value=p.build;
  gen();
}
function gen(){
  const base=v('base'),wd=v('workdir'),port=v('port'),user=v('user'),apt=v('apt');
  const build=v('buildCmd'),start=v('startCmd');
  const envs=v('envs').split('\n').map(x=>x.trim()).filter(Boolean);
  let s='';
  s+=`FROM ${base}\n\n`;
  if(apt) s+=`RUN apt-get update && apt-get install -y ${apt} && rm -rf /var/lib/apt/lists/*\n\n`;
  if(wd) s+=`WORKDIR ${wd}\n\n`;
  s+=`COPY . .\n\n`;
  if(build) s+=`RUN ${build}\n\n`;
  envs.forEach(e=>{if(e.includes('='))s+=`ENV ${e}\n`});
  if(envs.length) s+='\n';
  if(port) s+=`EXPOSE ${port}\n\n`;
  if(user) s+=`USER ${user}\n\n`;
  if(start){
    const arr=start.split(' ').map(x=>`"${x.replace(/"/g,'\\"')}"`).join(', ');
    s+=`CMD [${arr}]\n`;
  }
  document.getElementById('out').textContent=s.trim();
}
function v(id){return document.getElementById(id).value.trim()}
function copyDockerfile(){navigator.clipboard.writeText(document.getElementById('out').textContent)}
function copyIgnore(){navigator.clipboard.writeText(document.getElementById('ignore').value)}
function toggleTheme(){const d=document.documentElement;const t=d.getAttribute('data-theme')==='dark'?'':'dark';d.setAttribute('data-theme',t);localStorage.setItem('theme',t)}
if(localStorage.getItem('theme')==='dark')document.documentElement.setAttribute('data-theme','dark');
applyPreset();
</script>
</body>
</html>