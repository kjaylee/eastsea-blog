<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì „ê¸°ìš”ê¸ˆ ê³„ì‚°ê¸° | Electricity Bill Calculator (í•œêµ­)</title>
<meta name="description" content="í•œêµ­ ê°€ì •ìš© ì „ê¸°ìš”ê¸ˆì„ ëˆ„ì§„êµ¬ê°„ìœ¼ë¡œ ê³„ì‚°í•˜ê³ , ê°€ì „ê¸°ê¸° ì‚¬ìš©ëŸ‰ìœ¼ë¡œ ì›” ì „ê¸°ìš”ê¸ˆì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤." />
<style>
  :root {
    --primary: #0f766e;
    --primary-dark: #115e59;
    --primary-light: #ccfbf1;
    --blue: #2563eb;
    --blue-light: #dbeafe;
    --orange: #ea580c;
    --orange-light: #ffedd5;
    --yellow: #ca8a04;
    --yellow-light: #fef9c3;
    --green: #16a34a;
    --green-light: #dcfce7;
    --danger: #dc2626;
    --danger-light: #fee2e2;
    --bg: #f8fafc;
    --card: #ffffff;
    --text: #0f172a;
    --text-secondary: #64748b;
    --border: #e2e8f0;
    --shadow: 0 1px 2px rgba(0,0,0,0.08), 0 1px 1px rgba(0,0,0,0.04);
    --shadow-lg: 0 10px 24px rgba(15,23,42,0.12);
    --radius: 14px;
    --radius-sm: 10px;
    --transition: all 0.2s ease;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --primary: #2dd4bf;
      --primary-dark: #14b8a6;
      --primary-light: #042f2e;
      --blue: #60a5fa;
      --blue-light: #172554;
      --orange: #fb923c;
      --orange-light: #431407;
      --yellow: #facc15;
      --yellow-light: #422006;
      --green: #4ade80;
      --green-light: #052e16;
      --danger: #f87171;
      --danger-light: #450a0a;
      --bg: #020617;
      --card: #0f172a;
      --text: #e2e8f0;
      --text-secondary: #94a3b8;
      --border: #1e293b;
      --shadow: 0 2px 8px rgba(0,0,0,0.35);
    }
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.55;
    min-height: 100vh;
  }

  .container {
    width: 100%;
    max-width: 980px;
    margin: 0 auto;
    padding: 20px 14px 28px;
  }

  header {
    text-align: center;
    margin-bottom: 20px;
  }

  h1 {
    font-size: clamp(1.35rem, 4vw, 2.1rem);
    font-weight: 900;
    letter-spacing: -0.02em;
    background: linear-gradient(135deg, var(--primary), var(--blue));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 8px;
  }

  .subtitle {
    font-size: 0.92rem;
    color: var(--text-secondary);
  }

  .notice {
    margin-top: 10px;
    background: var(--yellow-light);
    color: #854d0e;
    border: 1px solid rgba(202,138,4,0.35);
    border-radius: 10px;
    padding: 9px 12px;
    font-size: 0.8rem;
  }

  @media (prefers-color-scheme: dark) {
    .notice { color: #fde68a; }
  }

  .tab-nav {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 6px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 6px;
    box-shadow: var(--shadow);
    margin-bottom: 14px;
  }

  .tab-btn {
    border: 0;
    border-radius: 10px;
    padding: 11px 8px;
    background: transparent;
    color: var(--text-secondary);
    font-size: 0.84rem;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition);
  }

  .tab-btn.active {
    background: var(--primary-light);
    color: var(--primary);
    box-shadow: var(--shadow);
  }

  .panel {
    display: none;
  }

  .panel.active {
    display: block;
    animation: fade .25s ease;
  }

  @keyframes fade {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 16px;
    margin-bottom: 12px;
  }

  .card h2 {
    font-size: 1.03rem;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }

  .grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  @media (max-width: 700px) {
    .grid, .grid-3 { grid-template-columns: 1fr; }
    .tab-nav { grid-template-columns: 1fr; }
  }

  .field { display: flex; flex-direction: column; gap: 6px; }

  label {
    font-size: 0.82rem;
    color: var(--text-secondary);
    font-weight: 700;
  }

  .input-wrap {
    position: relative;
  }

  .suffix {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.82rem;
    color: var(--text-secondary);
    pointer-events: none;
  }

  input[type="number"], input[type="text"], select {
    width: 100%;
    border: 2px solid var(--border);
    background: var(--card);
    color: var(--text);
    border-radius: 10px;
    padding: 10px 12px;
    font-size: 0.95rem;
    transition: var(--transition);
    -webkit-appearance: none;
    appearance: none;
  }

  input.has-suffix { padding-right: 44px; }

  input:focus, select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(20,184,166,.15);
  }

  .inline {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
  }

  .chip {
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--text-secondary);
    border-radius: 999px;
    font-size: .75rem;
    padding: 4px 10px;
    cursor: pointer;
    transition: var(--transition);
  }

  .chip:hover, .chip.active {
    background: var(--primary);
    color: #fff;
    border-color: var(--primary);
  }

  .toggle {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: .84rem;
    color: var(--text-secondary);
    font-weight: 700;
  }

  .switch {
    position: relative;
    width: 44px;
    height: 24px;
    display: inline-block;
  }

  .switch input { display: none; }

  .slider {
    position: absolute; inset: 0;
    border-radius: 999px;
    background: var(--border);
    transition: var(--transition);
    cursor: pointer;
  }

  .slider::before {
    content: '';
    position: absolute;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fff;
    left: 3px;
    top: 3px;
    transition: var(--transition);
  }

  .switch input:checked + .slider {
    background: var(--primary);
  }

  .switch input:checked + .slider::before {
    transform: translateX(20px);
  }

  .btn {
    border: 0;
    border-radius: 11px;
    padding: 12px 14px;
    font-weight: 800;
    cursor: pointer;
    transition: var(--transition);
  }

  .btn.primary {
    color: #fff;
    background: linear-gradient(135deg, var(--primary), var(--blue));
  }

  .btn.primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-lg); }

  .btn.ghost {
    color: var(--text);
    background: var(--card);
    border: 1px solid var(--border);
  }

  .btn.ghost:hover {
    border-color: var(--primary);
    color: var(--primary);
  }

  .btn.danger {
    background: var(--danger-light);
    color: var(--danger);
    border: 1px solid rgba(220,38,38,0.25);
  }

  .result-hero {
    border-radius: var(--radius);
    padding: 18px;
    background: linear-gradient(130deg, var(--primary), var(--blue));
    color: #fff;
    text-align: center;
    margin-bottom: 12px;
  }

  .result-hero .label {
    font-size: .82rem;
    opacity: .9;
    font-weight: 600;
  }

  .result-hero .value {
    margin-top: 4px;
    font-weight: 900;
    font-size: clamp(1.6rem, 5.5vw, 2.5rem);
    letter-spacing: -0.02em;
  }

  .result-hero .sub {
    font-size: .8rem;
    opacity: .88;
  }

  .summary-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }

  @media (max-width: 800px) {
    .summary-grid { grid-template-columns: repeat(2, 1fr); }
  }

  .sum-box {
    border: 1px solid var(--border);
    background: var(--bg);
    border-radius: 10px;
    padding: 11px;
    text-align: center;
  }

  .sum-box .k {
    font-size: .74rem;
    color: var(--text-secondary);
    margin-bottom: 3px;
    font-weight: 600;
  }

  .sum-box .v {
    font-size: 1rem;
    font-weight: 900;
  }

  .sum-box.highlight {
    background: var(--primary-light);
    border-color: rgba(15,118,110,.25);
  }

  .sum-box.warn {
    background: var(--orange-light);
    border-color: rgba(234,88,12,.3);
  }

  .table-wrap {
    overflow: auto;
    border: 1px solid var(--border);
    border-radius: 10px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 660px;
  }

  th, td {
    border-bottom: 1px solid var(--border);
    padding: 9px 10px;
    text-align: right;
    font-size: .83rem;
    white-space: nowrap;
  }

  th {
    position: sticky;
    top: 0;
    background: var(--bg);
    color: var(--text-secondary);
    font-weight: 800;
  }

  th:first-child, td:first-child { text-align: left; }

  .badge {
    font-size: .7rem;
    border-radius: 99px;
    padding: 2px 8px;
    font-weight: 800;
    display: inline-block;
  }

  .badge.t1 { background: var(--green-light); color: var(--green); }
  .badge.t2 { background: var(--yellow-light); color: #92400e; }
  .badge.t3 { background: var(--orange-light); color: var(--orange); }

  .chart-box { height: 260px; }
  .chart-box canvas { width: 100%; height: 100%; }

  .appliance-row {
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 8px;
    background: var(--bg);
  }

  .appliance-grid {
    display: grid;
    grid-template-columns: 1.6fr 0.9fr 0.9fr 0.9fr auto;
    gap: 8px;
    align-items: center;
  }

  @media (max-width: 860px) {
    .appliance-grid {
      grid-template-columns: 1fr 1fr;
    }
    .appliance-grid .remove-btn {
      grid-column: 1 / -1;
    }
  }

  .kpi {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
  }

  @media (max-width: 680px) {
    .kpi { grid-template-columns: 1fr; }
  }

  .kpi .item {
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px;
    background: var(--bg);
  }

  .kpi .item .label {
    font-size: .75rem;
    color: var(--text-secondary);
    font-weight: 700;
  }

  .kpi .item .value {
    font-size: 1.35rem;
    margin-top: 4px;
    font-weight: 900;
  }

  .saved-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px;
    margin-bottom: 6px;
    background: var(--bg);
  }

  .saved-name {
    font-size: .9rem;
    font-weight: 800;
  }

  .saved-meta {
    font-size: .76rem;
    color: var(--text-secondary);
    margin-top: 2px;
  }

  .actions { display: flex; gap: 6px; flex-wrap: wrap; }

  .hidden { display: none !important; }

  .muted {
    color: var(--text-secondary);
    font-size: .82rem;
  }

  .divider {
    border: 0;
    border-top: 1px dashed var(--border);
    margin: 10px 0;
  }

  .cost-big {
    color: var(--danger);
    font-size: 1.5rem;
    font-weight: 900;
  }

  .tip-list {
    list-style: none;
    display: grid;
    gap: 8px;
    margin-top: 8px;
  }

  .tip-list li {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px;
    font-size: .82rem;
  }

  footer {
    margin-top: 18px;
    text-align: center;
    color: var(--text-secondary);
    font-size: .78rem;
  }

  footer a { color: var(--primary); text-decoration: none; }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>âš¡ ì „ê¸°ìš”ê¸ˆ ê³„ì‚°ê¸°</h1>
    <p class="subtitle">í•œêµ­ ê°€ì •ìš© ëˆ„ì§„ ìš”ê¸ˆ ê¸°ì¤€ ì¶”ì • + ê°€ì „ ì‚¬ìš©ëŸ‰ ê³„ì‚°</p>
    <div class="notice">â€» ì°¸ê³ ìš© ì¶”ì •ì¹˜ì…ë‹ˆë‹¤. ì‹¤ì œ ì²­êµ¬ì„œëŠ” ê²€ì¹¨ì¼, ê³„ì•½ì¢…ë³„, ë³µì§€í• ì¸, ì—°ë£Œë¹„ ì¡°ì •ë‹¨ê°€, ì •ì±… ë³€ê²½ ë“±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
  </header>

  <div class="tab-nav">
    <button class="tab-btn active" onclick="switchTab('direct', event)">ğŸ“„ ì§ì ‘ ìš”ê¸ˆ ê³„ì‚°</button>
    <button class="tab-btn" onclick="switchTab('appliance', event)">ğŸ  ê°€ì „ ì‚¬ìš©ëŸ‰ ê³„ì‚°</button>
    <button class="tab-btn" onclick="switchTab('saved', event)">ğŸ’¾ ì €ì¥ ì‹œë‚˜ë¦¬ì˜¤</button>
  </div>

  <!-- DIRECT PANEL -->
  <section id="panel-direct" class="panel active">
    <div class="card">
      <h2>ğŸ§® ì›” ì‚¬ìš©ëŸ‰ ì…ë ¥</h2>
      <div class="grid">
        <div class="field">
          <label>ì›” ì „ë ¥ ì‚¬ìš©ëŸ‰</label>
          <div class="input-wrap">
            <input id="monthlyKwh" class="has-suffix" type="number" min="0" step="1" value="320" oninput="autoDirect()" />
            <span class="suffix">kWh</span>
          </div>
          <div class="inline">
            <button class="chip" onclick="setKwhPreset(150)">150</button>
            <button class="chip" onclick="setKwhPreset(250)">250</button>
            <button class="chip" onclick="setKwhPreset(350)">350</button>
            <button class="chip" onclick="setKwhPreset(450)">450</button>
            <button class="chip" onclick="setKwhPreset(650)">650</button>
          </div>
        </div>

        <div class="field">
          <label>ê³„ì ˆ êµ¬ê°„</label>
          <select id="season" onchange="autoDirect()">
            <option value="normal" selected>ì¼ë°˜(ë´„Â·ê°€ì„)</option>
            <option value="summer">ì—¬ë¦„(7~8ì›”)</option>
            <option value="winter">ê²¨ìš¸(12~2ì›”)</option>
          </select>
          <p class="muted">ê³„ì ˆë³„ ëˆ„ì§„êµ¬ê°„ ê¸°ì¤€ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div class="field">
          <label>ì—°ë£Œë¹„ ì¡°ì •ë‹¨ê°€</label>
          <div class="input-wrap">
            <input id="fuelAdj" class="has-suffix" type="number" step="0.1" value="5.0" oninput="autoDirect()" />
            <span class="suffix">ì›/kWh</span>
          </div>
        </div>

        <div class="field">
          <label>ê¸°í›„í™˜ê²½ìš”ê¸ˆ</label>
          <div class="input-wrap">
            <input id="envCharge" class="has-suffix" type="number" step="0.1" value="9.0" oninput="autoDirect()" />
            <span class="suffix">ì›/kWh</span>
          </div>
        </div>
      </div>

      <hr class="divider" />

      <div class="grid-3">
        <div class="field">
          <label>ë¶€ê°€ê°€ì¹˜ì„¸(VAT)</label>
          <div class="input-wrap">
            <input id="vatRate" class="has-suffix" type="number" step="0.1" value="10" oninput="autoDirect()" />
            <span class="suffix">%</span>
          </div>
        </div>

        <div class="field">
          <label>ì „ë ¥ì‚°ì—…ê¸°ë°˜ê¸°ê¸ˆ</label>
          <div class="input-wrap">
            <input id="fundRate" class="has-suffix" type="number" step="0.1" value="3.7" oninput="autoDirect()" />
            <span class="suffix">%</span>
          </div>
        </div>

        <div class="field">
          <label>í• ì¸/ê°€ì‚°</label>
          <div class="input-wrap">
            <input id="discount" class="has-suffix" type="number" step="1" value="0" oninput="autoDirect()" />
            <span class="suffix">ì›</span>
          </div>
        </div>
      </div>

      <div class="inline" style="margin-top:10px;">
        <label class="toggle">
          <span class="switch">
            <input id="roundToggle" type="checkbox" checked onchange="autoDirect()" />
            <span class="slider"></span>
          </span>
          ì²­êµ¬ì„œì²˜ëŸ¼ 10ì› ë‹¨ìœ„ ë°˜ì˜¬ë¦¼
        </label>
      </div>

      <div class="inline" style="margin-top:12px;">
        <button class="btn primary" onclick="calcDirect()">âš¡ ìš”ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
        <button class="btn ghost" onclick="resetDirect()">ì´ˆê¸°í™”</button>
        <button class="btn ghost" onclick="saveScenario()">ğŸ’¾ ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥</button>
      </div>
    </div>

    <div id="directResult" class="hidden">
      <div class="result-hero">
        <div class="label">ì˜ˆìƒ ì›” ì „ê¸°ìš”ê¸ˆ (ì´ ì²­êµ¬ì•¡)</div>
        <div class="value" id="heroTotal">0ì›</div>
        <div class="sub" id="heroSub">ê¸°ë³¸ìš”ê¸ˆ + ì „ë ¥ëŸ‰ìš”ê¸ˆ + ë¶€ê°€ë¹„ìš© ë°˜ì˜</div>
      </div>

      <div class="card">
        <h2>ğŸ“Œ ìš”ì•½</h2>
        <div class="summary-grid" id="sumGrid"></div>
      </div>

      <div class="card">
        <h2>ğŸ§¾ í•­ëª©ë³„ ê³„ì‚° ìƒì„¸</h2>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>í•­ëª©</th>
                <th>ìˆ˜ì‹/êµ¬ê°„</th>
                <th>ê¸ˆì•¡</th>
              </tr>
            </thead>
            <tbody id="detailBody"></tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“‰ ëˆ„ì§„êµ¬ê°„ ì‚¬ìš© ë¹„ì¤‘</h2>
        <div class="chart-box"><canvas id="tierChart"></canvas></div>
      </div>

      <div class="card">
        <h2>ğŸ’¡ ì ˆì•½ íŒ (ì…ë ¥ê°’ ê¸°ë°˜)</h2>
        <ul class="tip-list" id="tipsList"></ul>
      </div>
    </div>
  </section>

  <!-- APPLIANCE PANEL -->
  <section id="panel-appliance" class="panel">
    <div class="card">
      <h2>ğŸ”Œ ê°€ì „ ëª©ë¡ìœ¼ë¡œ ì›” ì‚¬ìš©ëŸ‰ ê³„ì‚°</h2>
      <p class="muted">ì†Œë¹„ì „ë ¥(W) Ã— í•˜ë£¨ ì‚¬ìš©ì‹œê°„ Ã— ì›” ì‚¬ìš©ì¼ìˆ˜ Ã· 1000 = ì›” kWh</p>

      <div class="inline" style="margin-bottom:10px;">
        <select id="presetSelect" style="min-width:220px;">
          <option value="">ê°€ì „ í”„ë¦¬ì…‹ ì„ íƒ...</option>
        </select>
        <button class="btn ghost" onclick="addPresetAppliance()">â• í”„ë¦¬ì…‹ ì¶”ê°€</button>
        <button class="btn ghost" onclick="addCustomAppliance()">âœï¸ ì§ì ‘ ì¶”ê°€</button>
        <button class="btn danger" onclick="clearAppliances()">ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ</button>
      </div>

      <div id="applianceList"></div>

      <div class="inline" style="margin-top:10px;">
        <button class="btn primary" onclick="calcFromAppliances()">ğŸ“Š ì‚¬ìš©ëŸ‰ í•©ê³„ ê³„ì‚°</button>
        <button class="btn ghost" onclick="copyToDirect()">â†—ï¸ ì§ì ‘ ê³„ì‚° íƒ­ìœ¼ë¡œ ë³´ë‚´ê¸°</button>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ“¦ ê°€ì „ í•©ê³„ ê²°ê³¼</h2>
      <div class="kpi">
        <div class="item">
          <div class="label">ì›” ì´ ì‚¬ìš©ëŸ‰</div>
          <div class="value" id="kpiKwh">0 kWh</div>
        </div>
        <div class="item">
          <div class="label">ì¼ í‰ê·  ì‚¬ìš©ëŸ‰</div>
          <div class="value" id="kpiDaily">0 kWh</div>
        </div>
        <div class="item">
          <div class="label">ì˜ˆìƒ ìš”ê¸ˆ</div>
          <div class="value cost-big" id="kpiCost">0ì›</div>
        </div>
      </div>
      <p class="muted" id="kpiGuide" style="margin-top:8px;">ê°€ì „ì„ ì…ë ¥í•œ ë’¤ ê³„ì‚°í•˜ë©´ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.</p>
    </div>

    <div class="card">
      <h2>ğŸ“„ ê°€ì „ë³„ ì‚¬ìš©ëŸ‰ ìƒì„¸</h2>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>ê°€ì „</th>
              <th>ì†Œë¹„ì „ë ¥</th>
              <th>ì‹œê°„/ì¼</th>
              <th>ì¼ìˆ˜/ì›”</th>
              <th>ì›” ì‚¬ìš©ëŸ‰</th>
              <th>ë¹„ì¤‘</th>
            </tr>
          </thead>
          <tbody id="applianceDetailBody"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- SAVED PANEL -->
  <section id="panel-saved" class="panel">
    <div class="card">
      <h2>ğŸ’¾ ì €ì¥ëœ ì‹œë‚˜ë¦¬ì˜¤</h2>
      <div class="inline" style="margin-bottom:8px;">
        <button class="btn ghost" onclick="exportSaved()">ğŸ“¤ JSON ë‚´ë³´ë‚´ê¸°</button>
        <button class="btn ghost" onclick="importSavedPrompt()">ğŸ“¥ JSON ê°€ì ¸ì˜¤ê¸°</button>
        <button class="btn danger" onclick="clearSavedAll()">ğŸ§¹ ì „ì²´ ì‚­ì œ</button>
      </div>
      <div id="savedList"></div>
    </div>

    <div class="card">
      <h2>â„¹ï¸ ê³„ì‚° ê¸°ì¤€ ì•ˆë‚´</h2>
      <ul class="tip-list">
        <li>ë³¸ ë„êµ¬ëŠ” "ê°€ì •ìš© ì €ì••" í˜•íƒœì˜ ëˆ„ì§„ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•œ ì¶”ì • ê³„ì‚°ê¸°ì…ë‹ˆë‹¤.</li>
        <li>ì •í™• ì²­êµ¬ì•¡ì€ ì‹¤ì œ ê²€ì¹¨ê¸°ê°„(ì˜ˆ: 29~33ì¼), ê³„ì•½ ì¢…ë¥˜, í• ì¸ì œë„, ë‹¨ê°€ ê³µì§€ì— ì˜í•´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
        <li>ë³µì§€/ëŒ€ê°€ì¡±/ì¶œì‚°ê°€êµ¬/ë‹¤ìë…€ ë“± í• ì¸ ì ìš© ì‹œ ì²­êµ¬ì•¡ì´ í¬ê²Œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
        <li>ì—°ë£Œë¹„ì¡°ì •ë‹¨ê°€ ë° ê¸°í›„í™˜ê²½ìš”ê¸ˆì€ ì •ì±… ë³€ê²½ì— ë”°ë¼ ë³€ë™ë©ë‹ˆë‹¤.</li>
      </ul>
    </div>
  </section>

  <footer>
    <p>âš¡ ì „ê¸°ìš”ê¸ˆ ê³„ì‚°ê¸° â€” <a href="/tools/">ë„êµ¬ ëª¨ìŒ</a> | <a href="/">eastsea.monster</a></p>
    <p style="margin-top:4px;">ë°ì´í„°ëŠ” ì¶”ì • ì°¸ê³ ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ì²­êµ¬ì„œëŠ” í•œêµ­ì „ë ¥ ê³ ì§€ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”.</p>
  </footer>
</div>

<script>
// ===========================
// State
// ===========================
let lastDirectResult = null;
let applianceItems = [];
let directAutoTimer = null;

const STORAGE_KEYS = {
  lastInput: 'electricity-calc-last-input',
  appliances: 'electricity-calc-appliances',
  saved: 'electricity-calc-scenarios'
};

// í”„ë¦¬ì…‹ ê°€ì „ ë°ì´í„°ë² ì´ìŠ¤ (í‰ê·  ì†Œë¹„ì „ë ¥)
const APPLIANCE_PRESETS = [
  { name: 'ëƒ‰ì¥ê³ (ì¤‘í˜•)', watt: 55, hours: 24, days: 30, category: 'ì£¼ë°©' },
  { name: 'ëƒ‰ì¥ê³ (ëŒ€í˜•)', watt: 80, hours: 24, days: 30, category: 'ì£¼ë°©' },
  { name: 'ê¹€ì¹˜ëƒ‰ì¥ê³ ', watt: 45, hours: 24, days: 30, category: 'ì£¼ë°©' },
  { name: 'ì—ì–´ì»¨ ë²½ê±¸ì´(ì ˆì „)', watt: 750, hours: 5, days: 24, category: 'ëƒ‰ë°©' },
  { name: 'ì—ì–´ì»¨ ìŠ¤íƒ ë“œ(ì¼ë°˜)', watt: 1800, hours: 4, days: 22, category: 'ëƒ‰ë°©' },
  { name: 'ì—ì–´ì»¨ ì‹œìŠ¤í…œ(ëŒ€í˜•)', watt: 2500, hours: 5, days: 24, category: 'ëƒ‰ë°©' },
  { name: 'ì„ í’ê¸°', watt: 45, hours: 8, days: 30, category: 'ëƒ‰ë°©' },
  { name: 'ì„œí˜ë ˆì´í„°', watt: 35, hours: 8, days: 30, category: 'ëƒ‰ë°©' },
  { name: 'ì „ê¸°íˆí„°', watt: 1500, hours: 4, days: 20, category: 'ë‚œë°©' },
  { name: 'ì˜¨í’ê¸°', watt: 1800, hours: 3, days: 20, category: 'ë‚œë°©' },
  { name: 'ì „ê¸°ì¥íŒ(ì‹±ê¸€)', watt: 120, hours: 8, days: 25, category: 'ë‚œë°©' },
  { name: 'ì „ê¸°ì¥íŒ(ë”ë¸”)', watt: 180, hours: 8, days: 25, category: 'ë‚œë°©' },
  { name: 'ì „ê¸°ë³´ì¼ëŸ¬(ë¶€ë¶„)', watt: 3000, hours: 2, days: 25, category: 'ë‚œë°©' },
  { name: 'ì„¸íƒê¸°', watt: 500, hours: 1, days: 16, category: 'ì„¸íƒ' },
  { name: 'ê±´ì¡°ê¸°', watt: 2500, hours: 1, days: 12, category: 'ì„¸íƒ' },
  { name: 'ì˜ë¥˜ê´€ë¦¬ê¸°', watt: 1700, hours: 1, days: 16, category: 'ì„¸íƒ' },
  { name: 'ì²­ì†Œê¸° ìœ ì„ ', watt: 1200, hours: 0.5, days: 18, category: 'ìƒí™œ' },
  { name: 'ë¡œë´‡ì²­ì†Œê¸°', watt: 45, hours: 1.5, days: 25, category: 'ìƒí™œ' },
  { name: 'ê³µê¸°ì²­ì •ê¸°(ì¤‘í˜•)', watt: 35, hours: 12, days: 30, category: 'ìƒí™œ' },
  { name: 'ê°€ìŠµê¸°', watt: 30, hours: 8, days: 20, category: 'ìƒí™œ' },
  { name: 'ì œìŠµê¸°', watt: 320, hours: 6, days: 20, category: 'ìƒí™œ' },
  { name: 'TV 55ì¸ì¹˜', watt: 110, hours: 5, days: 28, category: 'ë¯¸ë””ì–´' },
  { name: 'TV 75ì¸ì¹˜', watt: 180, hours: 5, days: 28, category: 'ë¯¸ë””ì–´' },
  { name: 'ì…‹í†±ë°•ìŠ¤', watt: 12, hours: 24, days: 30, category: 'ë¯¸ë””ì–´' },
  { name: 'ê²Œì„ ì½˜ì†”', watt: 180, hours: 2, days: 22, category: 'ë¯¸ë””ì–´' },
  { name: 'ë°ìŠ¤í¬íƒ‘ PC', watt: 300, hours: 6, days: 26, category: 'IT' },
  { name: 'ë…¸íŠ¸ë¶', watt: 70, hours: 8, days: 28, category: 'IT' },
  { name: 'ëª¨ë‹ˆí„° 27ì¸ì¹˜', watt: 30, hours: 8, days: 28, category: 'IT' },
  { name: 'ì™€ì´íŒŒì´ ê³µìœ ê¸°', watt: 10, hours: 24, days: 30, category: 'IT' },
  { name: 'ì „ìë ˆì¸ì§€', watt: 1100, hours: 0.3, days: 30, category: 'ì£¼ë°©' },
  { name: 'ì¸ë•ì…˜ 1êµ¬', watt: 1800, hours: 0.8, days: 26, category: 'ì£¼ë°©' },
  { name: 'ì „ê¸°ë°¥ì†¥ ë³´ì˜¨í¬í•¨', watt: 130, hours: 8, days: 30, category: 'ì£¼ë°©' },
  { name: 'ì—ì–´í”„ë¼ì´ì–´', watt: 1500, hours: 0.4, days: 20, category: 'ì£¼ë°©' },
  { name: 'ì˜¤ë¸', watt: 2000, hours: 0.4, days: 14, category: 'ì£¼ë°©' },
  { name: 'ì»¤í”¼ë¨¸ì‹ ', watt: 900, hours: 0.2, days: 30, category: 'ì£¼ë°©' },
  { name: 'ì „ê¸°í¬íŠ¸', watt: 1500, hours: 0.15, days: 30, category: 'ì£¼ë°©' },
  { name: 'í—¤ì–´ë“œë¼ì´ì–´', watt: 1300, hours: 0.15, days: 28, category: 'ìƒí™œ' },
  { name: 'ê³ ë°ê¸°', watt: 60, hours: 0.2, days: 20, category: 'ìƒí™œ' },
  { name: 'ë¹„ë°', watt: 80, hours: 12, days: 30, category: 'ìƒí™œ' },
  { name: 'ì •ìˆ˜ê¸°(ëƒ‰ì˜¨)', watt: 120, hours: 24, days: 30, category: 'ìƒí™œ' },
  { name: 'ì •ìˆ˜ê¸°(ì§ìˆ˜)', watt: 35, hours: 24, days: 30, category: 'ìƒí™œ' },
  { name: 'ì–´í•­ í•„í„°/íˆí„°', watt: 60, hours: 24, days: 30, category: 'ì·¨ë¯¸' },
  { name: 'ëŸ¬ë‹ë¨¸ì‹ ', watt: 1000, hours: 0.8, days: 16, category: 'ìš´ë™' },
  { name: 'ì‹¤ë‚´ìì „ê±°', watt: 80, hours: 0.8, days: 18, category: 'ìš´ë™' },
  { name: 'ì „ê¸°ì°¨ ì™„ì†ì¶©ì „(1íšŒ)', watt: 7000, hours: 2, days: 8, category: 'ì°¨ëŸ‰' },
  { name: 'ìš•ì‹¤ ë‚œë°©ê¸°', watt: 1200, hours: 0.6, days: 20, category: 'ë‚œë°©' },
  { name: 'ì‹ê¸°ì„¸ì²™ê¸°', watt: 1700, hours: 1, days: 16, category: 'ì£¼ë°©' },
  { name: 'ìŒì‹ë¬¼ì²˜ë¦¬ê¸°', watt: 500, hours: 0.5, days: 20, category: 'ì£¼ë°©' },
  { name: 'ìº í•‘ìš© ì „ê¸°ë§¤íŠ¸', watt: 70, hours: 5, days: 10, category: 'ì·¨ë¯¸' },
  { name: 'ë°˜ë ¤ë™ë¬¼ ì˜¨ì—´ë§¤íŠ¸', watt: 40, hours: 10, days: 30, category: 'ë°˜ë ¤' },
  { name: 'ë°˜ë ¤ë™ë¬¼ ë“œë¼ì´ë£¸', watt: 1000, hours: 0.4, days: 8, category: 'ë°˜ë ¤' },
  { name: 'CCTV 4ì±„ë„', watt: 18, hours: 24, days: 30, category: 'ë³´ì•ˆ' },
  { name: 'NAS ì„œë²„', watt: 55, hours: 24, days: 30, category: 'IT' },
  { name: '3D í”„ë¦°í„°', watt: 120, hours: 1, days: 16, category: 'ì·¨ë¯¸' },
  { name: 'ë¯¸ë‹ˆë¹” í”„ë¡œì í„°', watt: 120, hours: 2, days: 14, category: 'ë¯¸ë””ì–´' },
  { name: 'ì½˜ì†”+TV ì„¸íŠ¸', watt: 290, hours: 2.5, days: 20, category: 'ë¯¸ë””ì–´' },
  { name: 'íœ´ëŒ€í° ì¶©ì „ê¸° 2ëŒ€', watt: 12, hours: 3, days: 30, category: 'IT' },
  { name: 'íƒœë¸”ë¦¿ ì¶©ì „', watt: 18, hours: 2, days: 20, category: 'IT' },
  { name: 'ì „ë™ì¹«ì†” ì¶©ì „', watt: 4, hours: 1, days: 30, category: 'ìƒí™œ' },
  { name: 'ë¬´ì„ ì²­ì†Œê¸° ì¶©ì „', watt: 60, hours: 1, days: 20, category: 'ìƒí™œ' },
  { name: 'ì‹¤ë§íŒ¬', watt: 45, hours: 6, days: 20, category: 'ëƒ‰ë°©' },
  { name: 'ë°”ë‹¥ë¶„ìˆ˜ íŒí”„', watt: 90, hours: 4, days: 20, category: 'ì·¨ë¯¸' },
  { name: 'ì¡°ëª… ì „ì²´(LED)', watt: 200, hours: 6, days: 30, category: 'ì¡°ëª…' },
  { name: 'ì¡°ëª… ì „ì²´(í˜•ê´‘)', watt: 420, hours: 6, days: 30, category: 'ì¡°ëª…' }
];

// ===========================
// Tariff model (ë‹¨ìˆœí™”)
// ===========================
function getTariffBySeason(season) {
  // ëˆ„ì§„ êµ¬ê°„ ê²½ê³„ (kWh)
  // ì‹¤ì œ ì •ì±… ë³€ë™ ê°€ëŠ¥ì„± ìˆìœ¼ë¯€ë¡œ ì¶”ì • ëª¨ë¸
  let tier1Limit = 200;
  let tier2Limit = 400;

  if (season === 'summer') {
    tier1Limit = 300;
    tier2Limit = 450;
  } else if (season === 'winter') {
    tier1Limit = 200;
    tier2Limit = 400;
  }

  return {
    tier1Limit,
    tier2Limit,
    baseCharge: [910, 1600, 7300],
    energyRate: [120.0, 214.6, 307.3] // ì›/kWh
  };
}

function splitUsage(kwh, season) {
  const tariff = getTariffBySeason(season);
  const t1 = Math.min(kwh, tariff.tier1Limit);
  const t2 = Math.min(Math.max(kwh - tariff.tier1Limit, 0), tariff.tier2Limit - tariff.tier1Limit);
  const t3 = Math.max(kwh - tariff.tier2Limit, 0);
  return { t1, t2, t3, tariff };
}

function calcBill(kwh, season, options={}) {
  const {
    fuelAdj = 5,
    envCharge = 9,
    vatRate = 10,
    fundRate = 3.7,
    discount = 0,
    doRound = true
  } = options;

  const { t1, t2, t3, tariff } = splitUsage(kwh, season);

  const tierCost1 = t1 * tariff.energyRate[0];
  const tierCost2 = t2 * tariff.energyRate[1];
  const tierCost3 = t3 * tariff.energyRate[2];
  const energyCharge = tierCost1 + tierCost2 + tierCost3;

  let base = tariff.baseCharge[0];
  if (kwh > tariff.tier1Limit && kwh <= tariff.tier2Limit) base = tariff.baseCharge[1];
  if (kwh > tariff.tier2Limit) base = tariff.baseCharge[2];

  const fuelAdjFee = kwh * fuelAdj;
  const envFee = kwh * envCharge;

  const preTax = base + energyCharge + fuelAdjFee + envFee;
  const vat = preTax * (vatRate / 100);
  const fund = preTax * (fundRate / 100);

  let total = preTax + vat + fund - discount;
  if (doRound) {
    total = Math.round(total / 10) * 10;
  }

  return {
    kwh,
    season,
    tiers: { t1, t2, t3 },
    tierCosts: { tierCost1, tierCost2, tierCost3 },
    base,
    energyCharge,
    fuelAdjFee,
    envFee,
    preTax,
    vat,
    fund,
    discount,
    total,
    tariff
  };
}

// ===========================
// UI helpers
// ===========================
function fmtWon(n) {
  return Math.round(n).toLocaleString('ko-KR') + 'ì›';
}

function fmtKwh(n) {
  return Number(n).toFixed(1).replace(/\.0$/, '') + 'kWh';
}

function switchTab(tab, ev) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('panel-' + tab).classList.add('active');
  if (ev) ev.currentTarget.classList.add('active');

  if (tab === 'saved') renderSavedScenarios();
}

function setKwhPreset(v) {
  document.getElementById('monthlyKwh').value = v;
  calcDirect();
}

function getDirectInputs() {
  return {
    kwh: Math.max(0, parseFloat(document.getElementById('monthlyKwh').value) || 0),
    season: document.getElementById('season').value,
    fuelAdj: parseFloat(document.getElementById('fuelAdj').value) || 0,
    envCharge: parseFloat(document.getElementById('envCharge').value) || 0,
    vatRate: parseFloat(document.getElementById('vatRate').value) || 0,
    fundRate: parseFloat(document.getElementById('fundRate').value) || 0,
    discount: parseFloat(document.getElementById('discount').value) || 0,
    doRound: document.getElementById('roundToggle').checked
  };
}

function autoDirect() {
  clearTimeout(directAutoTimer);
  directAutoTimer = setTimeout(() => {
    if (!document.getElementById('directResult').classList.contains('hidden')) {
      calcDirect();
    }
  }, 250);
}

function resetDirect() {
  document.getElementById('monthlyKwh').value = 320;
  document.getElementById('season').value = 'normal';
  document.getElementById('fuelAdj').value = 5.0;
  document.getElementById('envCharge').value = 9.0;
  document.getElementById('vatRate').value = 10;
  document.getElementById('fundRate').value = 3.7;
  document.getElementById('discount').value = 0;
  document.getElementById('roundToggle').checked = true;
  calcDirect();
}

function calcDirect() {
  const input = getDirectInputs();
  const result = calcBill(input.kwh, input.season, input);
  lastDirectResult = result;

  document.getElementById('heroTotal').textContent = fmtWon(result.total);
  document.getElementById('heroSub').textContent = `${fmtKwh(result.kwh)} Â· ${seasonLabel(result.season)} Â· ëˆ„ì§„ ${tierName(result.kwh, result.tariff)}`;

  const avgPerKwh = result.kwh > 0 ? (result.total / result.kwh) : 0;
  const nextTierWarning = getNextTierWarning(result.kwh, result.tariff);

  document.getElementById('sumGrid').innerHTML = `
    <div class="sum-box highlight">
      <div class="k">ì „ë ¥ëŸ‰ìš”ê¸ˆ</div>
      <div class="v">${fmtWon(result.energyCharge)}</div>
    </div>
    <div class="sum-box">
      <div class="k">ê¸°ë³¸ìš”ê¸ˆ</div>
      <div class="v">${fmtWon(result.base)}</div>
    </div>
    <div class="sum-box">
      <div class="k">ë¶€ê°€ìš”ê¸ˆ(í™˜ê²½+ì—°ë£Œ)</div>
      <div class="v">${fmtWon(result.envFee + result.fuelAdjFee)}</div>
    </div>
    <div class="sum-box warn">
      <div class="k">í‰ê·  ë‹¨ê°€</div>
      <div class="v">${Math.round(avgPerKwh).toLocaleString()}ì›/kWh</div>
    </div>
  `;

  const rows = [
    ['ê¸°ë³¸ìš”ê¸ˆ', `ëˆ„ì§„ë‹¨ê³„ ê¸°ì¤€ (${tierName(result.kwh, result.tariff)})`, result.base],
    ['1ë‹¨ê³„ ì „ë ¥ëŸ‰ìš”ê¸ˆ', `${fmtKwh(result.tiers.t1)} Ã— ${result.tariff.energyRate[0]}ì›`, result.tierCosts.tierCost1],
    ['2ë‹¨ê³„ ì „ë ¥ëŸ‰ìš”ê¸ˆ', `${fmtKwh(result.tiers.t2)} Ã— ${result.tariff.energyRate[1]}ì›`, result.tierCosts.tierCost2],
    ['3ë‹¨ê³„ ì „ë ¥ëŸ‰ìš”ê¸ˆ', `${fmtKwh(result.tiers.t3)} Ã— ${result.tariff.energyRate[2]}ì›`, result.tierCosts.tierCost3],
    ['ê¸°í›„í™˜ê²½ìš”ê¸ˆ', `${fmtKwh(result.kwh)} Ã— ${(parseFloat(document.getElementById('envCharge').value)||0).toFixed(1)}ì›`, result.envFee],
    ['ì—°ë£Œë¹„ì¡°ì •ì•¡', `${fmtKwh(result.kwh)} Ã— ${(parseFloat(document.getElementById('fuelAdj').value)||0).toFixed(1)}ì›`, result.fuelAdjFee],
    ['ì†Œê³„(ì„¸ì „)', 'ê¸°ë³¸+ì „ë ¥ëŸ‰+ë¶€ê°€ìš”ê¸ˆ', result.preTax],
    ['ë¶€ê°€ê°€ì¹˜ì„¸', `${(parseFloat(document.getElementById('vatRate').value)||0).toFixed(1)}%`, result.vat],
    ['ì „ë ¥ì‚°ì—…ê¸°ë°˜ê¸°ê¸ˆ', `${(parseFloat(document.getElementById('fundRate').value)||0).toFixed(1)}%`, result.fund],
    ['í• ì¸/ê°€ì‚°', 'ì…ë ¥ê°’ ë°˜ì˜', -result.discount],
    ['ìµœì¢… ì²­êµ¬ì•¡', input.doRound ? '10ì› ë‹¨ìœ„ ë°˜ì˜¬ë¦¼' : 'ë°˜ì˜¬ë¦¼ ì—†ìŒ', result.total]
  ];

  document.getElementById('detailBody').innerHTML = rows.map((r, i) => `
    <tr>
      <td>${r[0]}</td>
      <td>${r[1]}</td>
      <td><strong>${fmtWon(r[2])}</strong></td>
    </tr>
  `).join('');

  renderTierChart(result);
  renderTips(result, nextTierWarning);

  document.getElementById('directResult').classList.remove('hidden');
  saveLastInput();
}

function seasonLabel(s) {
  if (s === 'summer') return 'ì—¬ë¦„';
  if (s === 'winter') return 'ê²¨ìš¸';
  return 'ì¼ë°˜';
}

function tierName(kwh, tariff) {
  if (kwh <= tariff.tier1Limit) return '1ë‹¨ê³„';
  if (kwh <= tariff.tier2Limit) return '2ë‹¨ê³„';
  return '3ë‹¨ê³„';
}

function getNextTierWarning(kwh, tariff) {
  if (kwh <= tariff.tier1Limit) {
    return {
      msg: `2ë‹¨ê³„ê¹Œì§€ ${Math.max(0, tariff.tier1Limit - kwh).toFixed(1)}kWh ë‚¨ìŒ`,
      severity: 'low'
    };
  }
  if (kwh <= tariff.tier2Limit) {
    return {
      msg: `3ë‹¨ê³„ê¹Œì§€ ${Math.max(0, tariff.tier2Limit - kwh).toFixed(1)}kWh ë‚¨ìŒ`,
      severity: 'mid'
    };
  }
  return { msg: 'ì´ë¯¸ 3ë‹¨ê³„ ëˆ„ì§„ êµ¬ê°„ì…ë‹ˆë‹¤.', severity: 'high' };
}

function renderTips(result, nextTierWarning) {
  const tips = [];
  tips.push(`í˜„ì¬ ì›” ì‚¬ìš©ëŸ‰ì€ <strong>${fmtKwh(result.kwh)}</strong>, ${nextTierWarning.msg}`);

  if (result.kwh > result.tariff.tier2Limit) {
    tips.push(`3ë‹¨ê³„ ì‚¬ìš©ëŸ‰(<strong>${fmtKwh(result.tiers.t3)}</strong>)ì´ í½ë‹ˆë‹¤. ëƒ‰ë‚œë°© ì‹œê°„ 1ì‹œê°„ ì¶•ì†Œ ì‹œ ì²´ê° ì ˆê°ì´ í½ë‹ˆë‹¤.`);
  }

  const avgPerDay = result.kwh / 30;
  tips.push(`ì¼ í‰ê·  ì‚¬ìš©ëŸ‰ì€ ì•½ <strong>${avgPerDay.toFixed(1)}kWh</strong> ì…ë‹ˆë‹¤. í•˜ë£¨ ëª©í‘œë¥¼ ${Math.max(0, avgPerDay - 1).toFixed(1)}kWhë¡œ ë‚®ì¶°ë³´ì„¸ìš”.`);

  const saving30 = calcBill(Math.max(0, result.kwh - 30), result.season, {
    fuelAdj: parseFloat(document.getElementById('fuelAdj').value)||0,
    envCharge: parseFloat(document.getElementById('envCharge').value)||0,
    vatRate: parseFloat(document.getElementById('vatRate').value)||0,
    fundRate: parseFloat(document.getElementById('fundRate').value)||0,
    discount: parseFloat(document.getElementById('discount').value)||0,
    doRound: document.getElementById('roundToggle').checked
  });

  tips.push(`ì›” ì‚¬ìš©ëŸ‰ì„ 30kWh ì¤„ì´ë©´ ì•½ <strong>${fmtWon(result.total - saving30.total)}</strong> ì ˆê° ê°€ëŠ¥(ì¶”ì •).`);

  if (result.kwh >= 400) {
    tips.push(`ëƒ‰ë°©ê¸° í•„í„° ì²­ì†Œ, ë¬¸ì—´ë¦¼ ìµœì†Œí™”, ëŒ€ê¸°ì „ë ¥ ì°¨ë‹¨ ë©€í‹°íƒ­ ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.`);
  } else {
    tips.push(`ì´ë¯¸ ì‚¬ìš©ëŸ‰ì´ ì–‘í˜¸í•œ í¸ì…ë‹ˆë‹¤. ëŒ€ê¸°ì „ë ¥ ê´€ë¦¬ë§Œìœ¼ë¡œë„ ì¶”ê°€ ì ˆê°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
  }

  document.getElementById('tipsList').innerHTML = tips.map(t => `<li>${t}</li>`).join('');
}

function renderTierChart(result) {
  const canvas = document.getElementById('tierChart');
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  ctx.clearRect(0, 0, rect.width, rect.height);

  const w = rect.width;
  const h = rect.height;
  const pad = { top: 20, right: 20, bottom: 45, left: 56 };
  const cw = w - pad.left - pad.right;
  const ch = h - pad.top - pad.bottom;

  const values = [result.tiers.t1, result.tiers.t2, result.tiers.t3];
  const labels = ['1ë‹¨ê³„', '2ë‹¨ê³„', '3ë‹¨ê³„'];
  const colors = ['#16a34a', '#ca8a04', '#ea580c'];

  const maxVal = Math.max(1, ...values);

  // grid
  ctx.strokeStyle = getCss('--border');
  ctx.fillStyle = getCss('--text-secondary');
  ctx.font = '11px -apple-system, sans-serif';

  for (let i = 0; i <= 4; i++) {
    const y = pad.top + (ch / 4) * i;
    const v = maxVal * (1 - i / 4);
    ctx.beginPath();
    ctx.moveTo(pad.left, y);
    ctx.lineTo(w - pad.right, y);
    ctx.stroke();
    ctx.fillText(v.toFixed(0), 8, y + 3);
  }

  const barW = Math.min(90, cw / 5);
  values.forEach((v, i) => {
    const x = pad.left + ((i + 0.5) * cw / 3) - (barW/2);
    const bh = (v / maxVal) * ch;
    const y = pad.top + ch - bh;

    ctx.fillStyle = colors[i];
    roundRect(ctx, x, y, barW, bh, 8, true, false);

    ctx.fillStyle = getCss('--text');
    ctx.textAlign = 'center';
    ctx.fillText(labels[i], x + barW/2, h - 18);

    ctx.fillStyle = colors[i];
    ctx.font = 'bold 12px -apple-system, sans-serif';
    ctx.fillText(v.toFixed(1) + 'kWh', x + barW/2, y - 8);
    ctx.font = '11px -apple-system, sans-serif';
  });
}

function getCss(v) {
  return getComputedStyle(document.documentElement).getPropertyValue(v).trim();
}

function roundRect(ctx, x, y, w, h, r, fill, stroke) {
  if (w < 2 * r) r = w / 2;
  if (h < 2 * r) r = h / 2;
  ctx.beginPath();
  ctx.moveTo(x+r, y);
  ctx.arcTo(x+w, y, x+w, y+h, r);
  ctx.arcTo(x+w, y+h, x, y+h, r);
  ctx.arcTo(x, y+h, x, y, r);
  ctx.arcTo(x, y, x+w, y, r);
  ctx.closePath();
  if (fill) ctx.fill();
  if (stroke) ctx.stroke();
}

// ===========================
// Appliance logic
// ===========================
function buildPresetSelect() {
  const sel = document.getElementById('presetSelect');
  const grouped = {};
  APPLIANCE_PRESETS.forEach(p => {
    grouped[p.category] = grouped[p.category] || [];
    grouped[p.category].push(p);
  });

  let html = '<option value="">ê°€ì „ í”„ë¦¬ì…‹ ì„ íƒ...</option>';
  Object.keys(grouped).sort().forEach(cat => {
    html += `<optgroup label="${cat}">`;
    grouped[cat].forEach((p, idx) => {
      const id = APPLIANCE_PRESETS.indexOf(p);
      html += `<option value="${id}">${p.name} (${p.watt}W)</option>`;
    });
    html += '</optgroup>';
  });
  sel.innerHTML = html;
}

function addPresetAppliance() {
  const idx = parseInt(document.getElementById('presetSelect').value, 10);
  if (Number.isNaN(idx)) {
    alert('í”„ë¦¬ì…‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
    return;
  }
  const p = APPLIANCE_PRESETS[idx];
  applianceItems.push({
    id: cryptoRandomId(),
    name: p.name,
    watt: p.watt,
    hours: p.hours,
    days: p.days
  });
  renderApplianceList();
}

function addCustomAppliance() {
  applianceItems.push({
    id: cryptoRandomId(),
    name: 'ìƒˆ ê°€ì „',
    watt: 100,
    hours: 1,
    days: 30
  });
  renderApplianceList();
}

function removeAppliance(id) {
  applianceItems = applianceItems.filter(x => x.id !== id);
  renderApplianceList();
}

function clearAppliances() {
  if (!confirm('ê°€ì „ ëª©ë¡ì„ ëª¨ë‘ ì‚­ì œí• ê¹Œìš”?')) return;
  applianceItems = [];
  renderApplianceList();
}

function renderApplianceList() {
  const wrap = document.getElementById('applianceList');
  if (applianceItems.length === 0) {
    wrap.innerHTML = '<p class="muted">ê°€ì „ì´ ì—†ìŠµë‹ˆë‹¤. í”„ë¦¬ì…‹ ì¶”ê°€ ë˜ëŠ” ì§ì ‘ ì¶”ê°€ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</p>';
    saveAppliances();
    return;
  }

  wrap.innerHTML = applianceItems.map(item => {
    const monthly = (item.watt * item.hours * item.days) / 1000;
    return `
      <div class="appliance-row">
        <div class="appliance-grid">
          <input type="text" value="${escapeHtml(item.name)}" onchange="updateAppliance('${item.id}','name',this.value)" />
          <div class="input-wrap">
            <input class="has-suffix" type="number" min="0" step="1" value="${item.watt}" onchange="updateAppliance('${item.id}','watt',this.value)" />
            <span class="suffix">W</span>
          </div>
          <div class="input-wrap">
            <input class="has-suffix" type="number" min="0" step="0.1" value="${item.hours}" onchange="updateAppliance('${item.id}','hours',this.value)" />
            <span class="suffix">h/ì¼</span>
          </div>
          <div class="input-wrap">
            <input class="has-suffix" type="number" min="0" step="1" value="${item.days}" onchange="updateAppliance('${item.id}','days',this.value)" />
            <span class="suffix">ì¼/ì›”</span>
          </div>
          <button class="btn danger remove-btn" onclick="removeAppliance('${item.id}')">ì‚­ì œ</button>
        </div>
        <div class="muted" style="margin-top:6px;">ì›” ì‚¬ìš©ëŸ‰ ì¶”ì •: <strong>${fmtKwh(monthly)}</strong></div>
      </div>
    `;
  }).join('');

  saveAppliances();
}

function updateAppliance(id, field, value) {
  const item = applianceItems.find(x => x.id === id);
  if (!item) return;
  if (field === 'name') {
    item.name = value || 'ê°€ì „';
  } else {
    const num = parseFloat(value);
    item[field] = Number.isFinite(num) ? num : 0;
  }
  renderApplianceList();
}

function calcFromAppliances() {
  if (applianceItems.length === 0) {
    alert('ê°€ì „ í•­ëª©ì„ ë¨¼ì € ì¶”ê°€í•´ì£¼ì„¸ìš”.');
    return;
  }

  const totals = applianceItems.map(x => ({
    ...x,
    monthlyKwh: (x.watt * x.hours * x.days) / 1000
  }));

  const sumKwh = totals.reduce((a,b) => a + b.monthlyKwh, 0);
  const daily = sumKwh / 30;

  const input = getDirectInputs();
  const bill = calcBill(sumKwh, input.season, input);

  document.getElementById('kpiKwh').textContent = fmtKwh(sumKwh);
  document.getElementById('kpiDaily').textContent = fmtKwh(daily);
  document.getElementById('kpiCost').textContent = fmtWon(bill.total);
  document.getElementById('kpiGuide').textContent = `${seasonLabel(input.season)} ê¸°ì¤€ ì¶”ì • Â· ì§ì ‘ ê³„ì‚° íƒ­ ë‹¨ê°€ ì ìš©`;

  document.getElementById('applianceDetailBody').innerHTML = totals
    .sort((a,b) => b.monthlyKwh - a.monthlyKwh)
    .map(t => {
      const p = sumKwh > 0 ? (t.monthlyKwh / sumKwh * 100) : 0;
      return `
        <tr>
          <td>${escapeHtml(t.name)}</td>
          <td>${Math.round(t.watt)}W</td>
          <td>${Number(t.hours).toFixed(1)}h</td>
          <td>${Math.round(t.days)}ì¼</td>
          <td><strong>${fmtKwh(t.monthlyKwh)}</strong></td>
          <td>${p.toFixed(1)}%</td>
        </tr>
      `;
    }).join('');

  // direct tabë¡œ í™œìš©í•˜ê¸° ìœ„í•œ ì„ì‹œ ì €ì¥
  localStorage.setItem('electricity-calc-last-appliance-kwh', String(sumKwh));
}

function copyToDirect() {
  const v = parseFloat(localStorage.getItem('electricity-calc-last-appliance-kwh') || '0');
  if (!v || v <= 0) {
    alert('ë¨¼ì € ê°€ì „ ì‚¬ìš©ëŸ‰ ê³„ì‚°ì„ ì‹¤í–‰í•˜ì„¸ìš”.');
    return;
  }
  document.getElementById('monthlyKwh').value = v.toFixed(1);
  switchTab('direct');
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelector('.tab-btn').classList.add('active');
  calcDirect();
}

// ===========================
// Save scenarios
// ===========================
function getSavedScenarios() {
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEYS.saved) || '[]');
  } catch(e) { return []; }
}

function saveScenario() {
  const input = getDirectInputs();
  const result = calcBill(input.kwh, input.season, input);
  const arr = getSavedScenarios();

  const name = prompt('ì‹œë‚˜ë¦¬ì˜¤ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”', `${seasonLabel(input.season)} ${input.kwh}kWh`);
  if (!name) return;

  arr.unshift({
    id: cryptoRandomId(),
    name,
    createdAt: new Date().toISOString(),
    input,
    total: result.total
  });

  if (arr.length > 50) arr.pop();
  localStorage.setItem(STORAGE_KEYS.saved, JSON.stringify(arr));
  alert('ì‹œë‚˜ë¦¬ì˜¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
}

function renderSavedScenarios() {
  const arr = getSavedScenarios();
  const wrap = document.getElementById('savedList');
  if (arr.length === 0) {
    wrap.innerHTML = '<p class="muted">ì €ì¥ëœ ì‹œë‚˜ë¦¬ì˜¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
    return;
  }

  wrap.innerHTML = arr.map(s => `
    <div class="saved-item">
      <div>
        <div class="saved-name">${escapeHtml(s.name)}</div>
        <div class="saved-meta">${new Date(s.createdAt).toLocaleString('ko-KR')} Â· ${seasonLabel(s.input.season)} Â· ${fmtKwh(s.input.kwh)} Â· ${fmtWon(s.total)}</div>
      </div>
      <div class="actions">
        <button class="btn ghost" onclick="loadScenario('${s.id}')">ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button class="btn danger" onclick="deleteScenario('${s.id}')">ì‚­ì œ</button>
      </div>
    </div>
  `).join('');
}

function loadScenario(id) {
  const arr = getSavedScenarios();
  const s = arr.find(x => x.id === id);
  if (!s) return;
  document.getElementById('monthlyKwh').value = s.input.kwh;
  document.getElementById('season').value = s.input.season;
  document.getElementById('fuelAdj').value = s.input.fuelAdj;
  document.getElementById('envCharge').value = s.input.envCharge;
  document.getElementById('vatRate').value = s.input.vatRate;
  document.getElementById('fundRate').value = s.input.fundRate;
  document.getElementById('discount').value = s.input.discount;
  document.getElementById('roundToggle').checked = !!s.input.doRound;

  switchTab('direct');
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelector('.tab-btn').classList.add('active');
  calcDirect();
}

function deleteScenario(id) {
  if (!confirm('ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚­ì œí• ê¹Œìš”?')) return;
  const arr = getSavedScenarios().filter(x => x.id !== id);
  localStorage.setItem(STORAGE_KEYS.saved, JSON.stringify(arr));
  renderSavedScenarios();
}

function clearSavedAll() {
  if (!confirm('ì €ì¥ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì „ë¶€ ì‚­ì œí• ê¹Œìš”?')) return;
  localStorage.removeItem(STORAGE_KEYS.saved);
  renderSavedScenarios();
}

function exportSaved() {
  const arr = getSavedScenarios();
  const blob = new Blob([JSON.stringify(arr, null, 2)], { type: 'application/json;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'electricity-scenarios.json';
  a.click();
  URL.revokeObjectURL(url);
}

function importSavedPrompt() {
  const raw = prompt('JSON ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”');
  if (!raw) return;
  try {
    const arr = JSON.parse(raw);
    if (!Array.isArray(arr)) throw new Error('array required');
    localStorage.setItem(STORAGE_KEYS.saved, JSON.stringify(arr.slice(0, 100)));
    renderSavedScenarios();
    alert('ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ');
  } catch(e) {
    alert('JSON í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
  }
}

// ===========================
// Persistence
// ===========================
function saveLastInput() {
  localStorage.setItem(STORAGE_KEYS.lastInput, JSON.stringify(getDirectInputs()));
}

function loadLastInput() {
  try {
    const d = JSON.parse(localStorage.getItem(STORAGE_KEYS.lastInput) || 'null');
    if (!d) return;
    document.getElementById('monthlyKwh').value = d.kwh;
    document.getElementById('season').value = d.season;
    document.getElementById('fuelAdj').value = d.fuelAdj;
    document.getElementById('envCharge').value = d.envCharge;
    document.getElementById('vatRate').value = d.vatRate;
    document.getElementById('fundRate').value = d.fundRate;
    document.getElementById('discount').value = d.discount;
    document.getElementById('roundToggle').checked = !!d.doRound;
  } catch(e) {}
}

function saveAppliances() {
  localStorage.setItem(STORAGE_KEYS.appliances, JSON.stringify(applianceItems));
}

function loadAppliances() {
  try {
    const arr = JSON.parse(localStorage.getItem(STORAGE_KEYS.appliances) || '[]');
    if (Array.isArray(arr)) applianceItems = arr;
  } catch(e) {}
}

// ===========================
// Misc
// ===========================
function escapeHtml(str) {
  return String(str)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function cryptoRandomId() {
  return 'id-' + Math.random().toString(36).slice(2, 10);
}

window.addEventListener('resize', () => {
  if (lastDirectResult) renderTierChart(lastDirectResult);
});

// init
window.addEventListener('DOMContentLoaded', () => {
  buildPresetSelect();
  loadLastInput();
  loadAppliances();
  renderApplianceList();
  calcDirect();
});
</script>

<!--
ì „ê¸°ìš”ê¸ˆ ê³„ì‚°ê¸° v1.0

ì„¤ê³„ ì˜ë„:
- ë‹¨ì¼ HTMLë¡œ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥
- ëª¨ë°”ì¼ ë°˜ì‘í˜•
- í•œêµ­ ê°€ì •ìš© ëˆ„ì§„ ìš”ê¸ˆ êµ¬ì¡°ë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‹œê°í™”
- ê°€ì „ë³„ ì‚¬ìš©ëŸ‰ í•©ì‚° ê¸°ëŠ¥
- localStorage ê¸°ë°˜ ì €ì¥ ê¸°ëŠ¥

===============================================
ìš”ê¸ˆ êµ¬ì¡° ì„¤ëª…(ë‹¨ìˆœí™” ëª¨ë¸)
===============================================
1) ê¸°ë³¸ìš”ê¸ˆ
   - ì‚¬ìš©ëŸ‰ì´ ë†’ì€ êµ¬ê°„ì¼ìˆ˜ë¡ ê¸°ë³¸ìš”ê¸ˆ ë‹¨ê³„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.

2) ì „ë ¥ëŸ‰ìš”ê¸ˆ
   - 1ë‹¨ê³„/2ë‹¨ê³„/3ë‹¨ê³„ ëˆ„ì§„ ë‹¨ê°€ ì ìš©
   - ê³„ì ˆ(ì—¬ë¦„/ê²¨ìš¸/ì¼ë°˜)ì— ë”°ë¼ êµ¬ê°„ ê²½ê³„ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ

3) ê¸°í›„í™˜ê²½ìš”ê¸ˆ
   - kWh ë‹¹ ë¶€ê³¼ë˜ëŠ” ìš”ê¸ˆ

4) ì—°ë£Œë¹„ì¡°ì •ì•¡
   - kWh ë‹¹ +/- ì¡°ì • ë‹¨ê°€

5) ì„¸ê¸ˆ ë° ê¸°ê¸ˆ
   - ë¶€ê°€ê°€ì¹˜ì„¸(VAT)
   - ì „ë ¥ì‚°ì—…ê¸°ë°˜ê¸°ê¸ˆ

===============================================
ì‹¤ì „ ì ˆì•½ íŒ (ê°€ì •ìš©)
===============================================
- ì—ì–´ì»¨:
  1) ì‹¤ë‚´ì™¸ ì˜¨ë„ì°¨ ê³¼ë„í•˜ê²Œ ë‘ì§€ ì•Šê¸°(26~27â„ƒ ê¶Œì¥)
  2) í•„í„° ì²­ì†Œ ì›” 1íšŒ
  3) ì²˜ìŒ ê°•í’ í›„ ìœ ì§€ ìš´ì „
  4) ë¬¸/ì°½ë¬¸ ë‹¨ì—´ ë³´ê°•
  5) ì„œí˜ë ˆì´í„° ë³‘í–‰ ìš´ì „

- ë‚œë°©:
  1) ì „ê¸°íˆí„° ì—°ì†ìš´ì „ë³´ë‹¤ ë‚œë°©ë³´ì¡° ìš©ë„ë¡œ ì‚¬ìš©
  2) ì „ê¸°ì¥íŒì€ íƒ€ì´ë¨¸ í™œìš©
  3) ì™¸ì¶œ ëª¨ë“œ ì ê·¹ í™œìš©

- ì£¼ë°©:
  1) ë°¥ì†¥ ë³´ì˜¨ì‹œê°„ ì¤„ì´ê¸°
  2) ì „ê¸°í¬íŠ¸ëŠ” í•„ìš”í•œ ë§Œí¼ë§Œ
  3) ëƒ‰ì¥ê³  ë¬¸ ì—´ë¦¼ ìµœì†Œí™”
  4) ëƒ‰ì¥ê³  ë’¤ ë²½ê³¼ ê°„ê²© í™•ë³´

- ìƒí™œ:
  1) ëŒ€ê¸°ì „ë ¥ ì°¨ë‹¨ ë©€í‹°íƒ­ ì‚¬ìš©
  2) LED ì¡°ëª… ì „í™˜
  3) ì„¸íƒ/ê±´ì¡°ëŠ” ëª¨ì•„ì„œ í•œ ë²ˆì—
  4) ê³µê¸°ì²­ì •ê¸° ìë™ëª¨ë“œ í™œìš©

===============================================
ì°¸ê³ : ì›” ì‚¬ìš©ëŸ‰ ì²´ê° ê°€ì´ë“œ
===============================================
- 150kWh: 1ì¸ ë˜ëŠ” ì ˆì „í˜• ì†Œí˜• ê°€êµ¬
- 250kWh: 1~2ì¸ ê°€êµ¬ í‰ê· ëŒ€
- 350kWh: 3~4ì¸ ê°€êµ¬ í‰ê· ëŒ€
- 450kWh: ëƒ‰ë‚œë°©/ê°€ì „ ì‚¬ìš©ëŸ‰ ë†’ì€ í¸
- 600kWh+: ëˆ„ì§„ 3ë‹¨ê³„ ë¹„ì¤‘ì´ ì»¤ì ¸ ìš”ê¸ˆ ê¸‰ì¦ ê°€ëŠ¥

===============================================
í™•ì¥ ê°€ì „ ì°¸ê³ í‘œ (êµìœ¡ìš© ë°ì´í„°)
===============================================
ì¹´í…Œê³ ë¦¬/ê¸°ê¸°/ì†Œë¹„ì „ë ¥ ëŒ€ëµê°’

[ëƒ‰ë°©]
- ë²½ê±¸ì´ ì—ì–´ì»¨: 700~1200W
- ìŠ¤íƒ ë“œ ì—ì–´ì»¨: 1300~2500W
- ì´ë™ì‹ ì—ì–´ì»¨: 900~1400W
- ì„ í’ê¸°: 30~60W
- ì„œí˜ë ˆì´í„°: 25~50W

[ë‚œë°©]
- ì „ê¸°íˆí„°: 800~2200W
- ì˜¨í’ê¸°: 1000~2500W
- ì „ê¸°ì¥íŒ: 60~200W
- ìš•ì‹¤ ë‚œë°©ê¸°: 800~1800W

[ì£¼ë°©]
- ì¸ë•ì…˜ 1êµ¬: 1200~2000W
- ì „ìë ˆì¸ì§€: 700~1500W
- ì—ì–´í”„ë¼ì´ì–´: 1300~2000W
- ì „ê¸°ì˜¤ë¸: 1500~2800W
- ë°¥ì†¥ ì·¨ì‚¬: 600~1300W
- ë°¥ì†¥ ë³´ì˜¨: 30~100W
- ì „ê¸°í¬íŠ¸: 1200~2200W

[ì„¸íƒ]
- ì„¸íƒê¸°: 300~700W
- ê±´ì¡°ê¸°: 1800~3000W
- ì˜ë¥˜ê´€ë¦¬ê¸°: 1200~1700W

[IT/ë¯¸ë””ì–´]
- ë°ìŠ¤í¬íƒ‘: 150~500W
- ê²Œì´ë°PC: 400~900W
- ë…¸íŠ¸ë¶: 35~120W
- ëª¨ë‹ˆí„°: 20~60W
- TV: 70~250W
- ì…‹í†±ë°•ìŠ¤: 8~20W
- ê³µìœ ê¸°: 6~15W

[ìƒí™œ]
- ê³µê¸°ì²­ì •ê¸°: 20~80W
- ì œìŠµê¸°: 200~450W
- ê°€ìŠµê¸°: 20~60W
- ë¹„ë°: 40~120W
- ì •ìˆ˜ê¸° ëƒ‰ì˜¨: 80~180W

===============================================
ì£¼ì˜ ì‚¬í•­
===============================================
- ë³¸ ë°ì´í„°ëŠ” ì œí’ˆ ëª¨ë¸/ë…¸í›„ë„/ëª¨ë“œ/ì‹¤ì‚¬ìš© íŒ¨í„´ì— ë”°ë¼ í¬ê²Œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì „ê¸°ìš”ê¸ˆ ì •ì±…ì€ ìˆ˜ì‹œë¡œ ë³€ë™ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìµœì‹  ê³µì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
- ë³¸ ê²°ê³¼ëŠ” ê°€ê³„ ì—ë„ˆì§€ ê´€ë¦¬ ì°¸ê³ ìš©ì…ë‹ˆë‹¤.

===============================================
ë²„ì „ íˆìŠ¤í† ë¦¬
===============================================
v1.0.0
- ì§ì ‘ ì›” ì‚¬ìš©ëŸ‰ ì…ë ¥ ê³„ì‚°
- ê°€ì „ ì‚¬ìš©ëŸ‰ í•©ì‚° ê³„ì‚°
- ëˆ„ì§„ êµ¬ê°„ ì‹œê°í™”
- ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
- JSON ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°

ì¶”ê°€ ë©”ëª¨:
- í–¥í›„ ê°œì„  ì•„ì´ë””ì–´
  1) ì‹œê°„ëŒ€ë³„ ìš”ê¸ˆ(TOU) ê³„ì•½ ì§€ì›
  2) íƒœì–‘ê´‘ ìê°€ì†Œë¹„ ë°˜ì˜
  3) ì¼ë³„ ì‚¬ìš©ëŸ‰ ê·¸ë˜í”„ ì…ë ¥
  4) OCR ê³ ì§€ì„œ íŒŒì‹±
  5) ì—ë„ˆì§€ ì ˆì•½ ì±Œë¦°ì§€ ê¸°ëŠ¥

ê°œë°œ: eastsea.monster tools
ë¼ì´ì„ ìŠ¤: MIT
ìµœì¢… ìˆ˜ì •: 2026-02-13

í™•ì¥ ë¶€ë¡: ê³„ì ˆë³„ ì—ë„ˆì§€ ê´€ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

[ì—¬ë¦„]
- ì‹¤ë‚´ ì„¤ì •ì˜¨ë„ 26~27ë„ ìœ ì§€
- ì œìŠµëª¨ë“œ/ì†¡í’ëª¨ë“œ ì ì ˆíˆ í™œìš©
- ëƒ‰ë°© ì‹œì‘ 10ë¶„ ê°•í’ í›„ ìœ ì§€ ìš´ì „
- ì‹¤ì™¸ê¸° ì—´ë°°ì¶œ ê³µê°„ í™•ë³´
- ë¸”ë¼ì¸ë“œ/ì•”ë§‰ì»¤íŠ¼ìœ¼ë¡œ ì¼ì‚¬ëŸ‰ ì œì–´
- ëƒ‰ì¥ê³  ë¬¸íŒ¨í‚¹ ì ê²€
- ì„¸íƒ/ê±´ì¡°ëŠ” ë°¤ ì‹œê°„ëŒ€ ëª°ì•„ì„œ ìˆ˜í–‰

[ê²¨ìš¸]
- ì „ê¸°íˆí„° ë‹¨ë… ë‚œë°© ìµœì†Œí™”
- ì „ê¸°ì¥íŒ ì˜¨ë„ ë‹¨ê³„ ë‚®ì¶”ê³  íƒ€ì´ë¨¸ ì‚¬ìš©
- ë¬¸í’ì§€/ë‹¨ì—´ ì‹œíŠ¸ ì ê²€
- ì˜¨ìˆ˜ ì‚¬ìš© íŒ¨í„´ ìµœì í™”
- í™˜ê¸°ëŠ” ì§§ê³  ê°•í•˜ê²Œ

[ì‚¬ê³„ì ˆ ê³µí†µ]
- ëŒ€ê¸°ì „ë ¥ ë©€í‹°íƒ­ ë„ì…
- ì˜¤ë˜ëœ ëƒ‰ì¥ê³ /ì—ì–´ì»¨ êµì²´ ê²€í† 
- LED ì¡°ëª… ì „í™˜
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°© ì¡°ëª…/ê°€ì „ OFF
- ì›”ë³„ ì‚¬ìš©ëŸ‰ ê¸°ë¡ í›„ ì¶”ì„¸ í™•ì¸
- ê³ ë¹„ìš© ê¸°ê¸°(ëƒ‰ë‚œë°©/ê±´ì¡°ê¸°) ì‚¬ìš©ì‹œê°„ ìƒí•œ ì„¤ì •

ê°€ì „ êµì²´ ì‹œ ê¸°ëŒ€ ì ˆê° ì˜ˆì‹œ(ëŒ€ëµ)
- í˜•ê´‘ë“± â†’ LED: ì¡°ëª… ì „ë ¥ 40~60% ì ˆê°
- êµ¬í˜• ëƒ‰ì¥ê³ (15ë…„+) â†’ ê³ íš¨ìœ¨ ì‹ í˜•: ì—° 100~300kWh ì ˆê° ê°€ëŠ¥
- êµ¬í˜• ì—ì–´ì»¨ â†’ ì¸ë²„í„°í˜•: ì‚¬ìš© íŒ¨í„´ì— ë”°ë¼ 20~40% ì ˆê° ê°€ëŠ¥
- ìœ ì„ ì²­ì†Œê¸°(ê³ ì¶œë ¥) â†’ íš¨ìœ¨í˜•/ë¡œë´‡ì²­ì†Œê¸° í˜¼í•© ìš´ìš©: ì›” 5~20kWh ì ˆê° ê°€ëŠ¥

ê³ ì§€ì„œ í™•ì¸ í¬ì¸íŠ¸
1) ê²€ì¹¨ ì‹œì‘ì¼/ì¢…ë£Œì¼
2) ì‚¬ìš©ì¼ìˆ˜
3) ê³„ì•½ì¢…ë³„(ì£¼íƒìš© ì €ì••/ê³ ì••)
4) í• ì¸ ì ìš© ì—¬ë¶€(ë³µì§€, ë‹¤ìë…€ ë“±)
5) ì—°ë£Œë¹„ì¡°ì •ë‹¨ê°€
6) ë¶€ê°€ì„¸/ê¸°ê¸ˆ ê³„ì‚° ê¸°ì¤€

ë³¸ ê³„ì‚°ê¸°ëŠ” êµìœ¡ìš©Â·ê´€ë¦¬ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.
ì •í™•í•œ ì²­êµ¬ ë¬¸ì˜ëŠ” í•œì „ ê³ ê°ì„¼í„° ë° ê³ ì§€ì„œ ì›ë¬¸ì„ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

-->
</body>
</html>