<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„±ê¸° | ì›¹ ë„êµ¬ ëª¨ìŒ</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --accent: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --border: #dee2e6;
            --shadow: rgba(0, 0, 0, 0.1);
            --card-bg: #ffffff;
        }
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #121212;
            --text-primary: #f8f9fa;
            --text-secondary: #adb5bd;
            --border: #444;
            --shadow: rgba(0, 0, 0, 0.3);
            --card-bg: #2d2d2d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header {
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 30px;
        }
        .back-btn {
            text-decoration: none; color: var(--text-secondary);
            display: flex; align-items: center; gap: 5px; font-weight: 500;
        }
        .back-btn:hover { color: var(--text-primary); }
        .theme-toggle { background: none; border: none; cursor: pointer; font-size: 1.5rem; }
        .card {
            background: var(--card-bg); border-radius: 20px; padding: 30px;
            box-shadow: 0 10px 30px var(--shadow); border: 1px solid var(--border);
            margin-bottom: 20px;
        }
        h1 {
            font-size: 1.8rem; margin-bottom: 10px;
            background: var(--accent); -webkit-background-clip: text;
            background-clip: text; -webkit-text-fill-color: transparent;
        }
        .desc { color: var(--text-secondary); margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 6px; font-size: 0.9rem; }
        select, input, textarea {
            width: 100%; padding: 12px; border: 2px solid var(--border);
            border-radius: 12px; background: var(--bg-primary);
            color: var(--text-primary); font-size: 1rem; outline: none;
            font-family: inherit; margin-bottom: 16px;
        }
        select:focus, input:focus, textarea:focus { border-color: #667eea; }
        textarea { resize: vertical; height: 80px; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .output-box {
            background: var(--bg-secondary); border: 1px solid var(--border);
            border-radius: 12px; padding: 16px; font-family: 'Courier New', monospace;
            font-size: 0.95rem; white-space: pre-wrap; word-break: break-all;
            min-height: 60px; position: relative;
        }
        .copy-btn {
            position: absolute; top: 10px; right: 10px;
            padding: 6px 12px; background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 8px; cursor: pointer; font-size: 0.8rem; color: var(--text-primary);
        }
        .copy-btn:hover { background: var(--bg-primary); }
        .type-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 8px; margin-bottom: 16px;
        }
        .type-btn {
            padding: 10px 8px; border: 2px solid var(--border); border-radius: 10px;
            background: var(--bg-primary); cursor: pointer; text-align: center;
            font-size: 0.85rem; color: var(--text-primary); transition: all 0.2s;
        }
        .type-btn:hover { border-color: #667eea; }
        .type-btn.active { border-color: #667eea; background: rgba(102,126,234,0.1); }
        .type-emoji { font-size: 1.2rem; display: block; margin-bottom: 2px; }
        .breaking-toggle {
            display: flex; align-items: center; gap: 10px; margin-bottom: 16px;
        }
        .breaking-toggle input[type="checkbox"] { width: auto; margin: 0; }
        .preview-label { font-weight: 700; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px; }
        @media (max-width: 600px) {
            .row { grid-template-columns: 1fr; }
            .type-grid { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
        </header>

        <div class="card">
            <h1>ğŸ“ Git ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„±ê¸°</h1>
            <p class="desc">Conventional Commits ì»¨ë²¤ì…˜ì— ë§ëŠ” ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì‰½ê²Œ ìƒì„±í•©ë‹ˆë‹¤.</p>

            <label>Type (ì»¤ë°‹ ìœ í˜•)</label>
            <div class="type-grid" id="typeGrid"></div>

            <div class="row">
                <div>
                    <label for="scope">Scope (ë²”ìœ„, ì„ íƒ)</label>
                    <input type="text" id="scope" placeholder="ì˜ˆ: auth, api, ui" oninput="generate()">
                </div>
                <div>
                    <label for="ticket">Ticket (ì´ìŠˆ ë²ˆí˜¸, ì„ íƒ)</label>
                    <input type="text" id="ticket" placeholder="ì˜ˆ: JIRA-123, #42" oninput="generate()">
                </div>
            </div>

            <label for="subject">Subject (ì œëª©, í•„ìˆ˜)</label>
            <input type="text" id="subject" placeholder="ë³€ê²½ ì‚¬í•­ì„ ê°„ê²°í•˜ê²Œ ìš”ì•½ (50ì ì´ë‚´ ê¶Œì¥)" maxlength="72" oninput="generate()">
            <div style="text-align:right;font-size:0.8rem;color:var(--text-secondary);margin-top:-12px;margin-bottom:12px;">
                <span id="charCount">0</span>/72
            </div>

            <label for="body">Body (ë³¸ë¬¸, ì„ íƒ)</label>
            <textarea id="body" placeholder="ë³€ê²½ ì´ìœ , ìƒì„¸ ì„¤ëª… ë“±" oninput="generate()"></textarea>

            <div class="breaking-toggle">
                <input type="checkbox" id="breaking" onchange="generate()">
                <label for="breaking" style="margin:0;font-weight:400;">âš ï¸ Breaking Change</label>
            </div>

            <label for="breakingDesc">Breaking Change ì„¤ëª… (ì„ íƒ)</label>
            <input type="text" id="breakingDesc" placeholder="ì´ì „ ë²„ì „ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë³€ê²½ ì‚¬í•­" oninput="generate()">
        </div>

        <div class="card">
            <div class="preview-label">ğŸ“‹ ìƒì„±ëœ ì»¤ë°‹ ë©”ì‹œì§€</div>
            <div class="output-box" id="output">
                íƒ€ì…ì„ ì„ íƒí•˜ê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”...
                <button class="copy-btn" onclick="copyOutput()">ë³µì‚¬</button>
            </div>
        </div>
    </div>

    <script>
        const TYPES = [
            { key: 'feat', emoji: 'âœ¨', label: 'feat', desc: 'ìƒˆ ê¸°ëŠ¥' },
            { key: 'fix', emoji: 'ğŸ›', label: 'fix', desc: 'ë²„ê·¸ ìˆ˜ì •' },
            { key: 'docs', emoji: 'ğŸ“š', label: 'docs', desc: 'ë¬¸ì„œ ë³€ê²½' },
            { key: 'style', emoji: 'ğŸ’', label: 'style', desc: 'í¬ë§·íŒ…' },
            { key: 'refactor', emoji: 'â™»ï¸', label: 'refactor', desc: 'ë¦¬íŒ©í† ë§' },
            { key: 'perf', emoji: 'âš¡', label: 'perf', desc: 'ì„±ëŠ¥ ê°œì„ ' },
            { key: 'test', emoji: 'ğŸ§ª', label: 'test', desc: 'í…ŒìŠ¤íŠ¸' },
            { key: 'build', emoji: 'ğŸ”§', label: 'build', desc: 'ë¹Œë“œ' },
            { key: 'ci', emoji: 'ğŸ‘·', label: 'ci', desc: 'CI ì„¤ì •' },
            { key: 'chore', emoji: 'ğŸ”¨', label: 'chore', desc: 'ê¸°íƒ€ ì‘ì—…' },
            { key: 'revert', emoji: 'âª', label: 'revert', desc: 'ë˜ëŒë¦¬ê¸°' },
        ];

        let selectedType = '';

        function initTypeGrid() {
            const grid = document.getElementById('typeGrid');
            TYPES.forEach(t => {
                const btn = document.createElement('button');
                btn.className = 'type-btn';
                btn.dataset.type = t.key;
                btn.innerHTML = `<span class="type-emoji">${t.emoji}</span>${t.label}<br><small style="color:var(--text-secondary)">${t.desc}</small>`;
                btn.onclick = () => selectType(t.key);
                grid.appendChild(btn);
            });
        }

        function selectType(type) {
            selectedType = type;
            document.querySelectorAll('.type-btn').forEach(b => {
                b.classList.toggle('active', b.dataset.type === type);
            });
            generate();
        }

        function generate() {
            const scope = document.getElementById('scope').value.trim();
            const subject = document.getElementById('subject').value.trim();
            const body = document.getElementById('body').value.trim();
            const breaking = document.getElementById('breaking').checked;
            const breakingDesc = document.getElementById('breakingDesc').value.trim();
            const ticket = document.getElementById('ticket').value.trim();

            document.getElementById('charCount').textContent = subject.length;

            if (!selectedType || !subject) {
                document.getElementById('output').innerHTML = 'íƒ€ì…ì„ ì„ íƒí•˜ê³  ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”...<button class="copy-btn" onclick="copyOutput()">ë³µì‚¬</button>';
                return;
            }

            let header = selectedType;
            if (scope) header += `(${scope})`;
            if (breaking) header += '!';
            header += `: ${subject}`;

            let msg = header;
            if (body) msg += `\n\n${body}`;
            if (breaking && breakingDesc) msg += `\n\nBREAKING CHANGE: ${breakingDesc}`;
            if (ticket) msg += `\n\nRefs: ${ticket}`;

            document.getElementById('output').innerHTML = escapeHtml(msg) + '<button class="copy-btn" onclick="copyOutput()">ë³µì‚¬</button>';
        }

        function escapeHtml(text) {
            return text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        }

        function copyOutput() {
            const el = document.getElementById('output');
            const text = el.textContent.replace('ë³µì‚¬', '').replace('ë³µì‚¬ë¨!', '').trim();
            navigator.clipboard.writeText(text).then(() => {
                const btn = el.querySelector('.copy-btn');
                btn.textContent = 'ë³µì‚¬ë¨!';
                setTimeout(() => btn.textContent = 'ë³µì‚¬', 1500);
            });
        }

        function toggleTheme() {
            const html = document.documentElement;
            const t = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        }
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');

        initTypeGrid();
    </script>
</body>
</html>
