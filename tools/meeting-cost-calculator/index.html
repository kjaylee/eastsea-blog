<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meeting Cost Calculator | ë¯¸íŒ… ë¹„ìš© ê³„ì‚°ê¸°</title>
  <meta name="description" content="ì°¸ê°€ìë³„ ì‹œê°„ë‹¹ ë¹„ìš©ìœ¼ë¡œ ì‹¤ì‹œê°„ íšŒì˜ ë¹„ìš©ì„ ê³„ì‚°í•˜ëŠ” ë„êµ¬" />
  <style>
    :root{--bg:#0b1020;--card:#151d38;--line:#2c3d6b;--text:#eef3ff;--muted:#a8b4d8;--acc:#758dff;--ok:#29d089;--warn:#ffb24d;}
    *{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;background:radial-gradient(circle at 20% 0%,#23336a 0%,#0b1020 46%);color:var(--text)}
    .wrap{max-width:980px;margin:0 auto;padding:18px 14px 60px}.head{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:12px}
    h1{margin:0;font-size:clamp(1.15rem,2.8vw,1.65rem)}.sub{color:var(--muted);font-size:.9rem;margin-top:6px}
    .home{text-decoration:none;color:#d7dfff;border:1px solid var(--line);padding:8px 11px;border-radius:12px;background:#111936;font-size:.86rem;white-space:nowrap}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}.card{background:linear-gradient(165deg,#1a254b,#151d38);border:1px solid var(--line);border-radius:15px;padding:13px}
    .card h2{margin:0 0 9px;font-size:1rem}label{display:block;font-size:.79rem;color:var(--muted);margin-bottom:6px}
    input,select,button{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#111936;color:var(--text);font-size:.91rem}
    button{border:none;background:linear-gradient(135deg,var(--acc),#566cf6);font-weight:700;cursor:pointer}.soft{background:#1a274d;border:1px solid var(--line);font-weight:600}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:8px}.rows{display:grid;gap:8px}.row{display:grid;grid-template-columns:1.2fr .9fr 42px;gap:8px}
    .stats{display:grid;grid-template-columns:1fr 1fr;gap:8px}.pill{border:1px solid var(--line);border-radius:12px;padding:9px;background:#0e1634}.k{font-size:.75rem;color:var(--muted);margin-bottom:4px}.v{font-weight:800}.live{font-size:1.28rem;color:#43ddff}
    .timer{margin-top:9px;border:1px solid var(--line);border-radius:12px;padding:11px;background:#0f1836}.time{font-size:1.75rem;font-weight:800;letter-spacing:1px}
    .bar-wrap{height:10px;background:#1a264e;border:1px solid #344c84;border-radius:999px;overflow:hidden;margin-top:8px}.bar{height:100%;width:0;background:linear-gradient(90deg,var(--ok),#6ce9b1)}
    .btns{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:9px}.sessions{margin-top:10px;display:grid;gap:7px;max-height:180px;overflow:auto}
    .item{border:1px solid var(--line);border-radius:10px;padding:8px;background:#101a39}.item small{color:var(--muted)}
    @media(max-width:860px){.grid{grid-template-columns:1fr}.btns{grid-template-columns:repeat(2,1fr)}}
  </style>
</head>
<body>
  <main class="wrap">
    <div class="head">
      <div><h1>ğŸ’¼ ë¯¸íŒ… ë¹„ìš© ê³„ì‚°ê¸°</h1><div class="sub">íšŒì˜ ì‹œê°„ = ë¹„ìš©. ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œëª¨ ê¸ˆì•¡ì„ ì¶”ì í•˜ì„¸ìš”.</div></div>
      <a class="home" href="/tools/">ì „ì²´ ë„êµ¬</a>
    </div>

    <section class="grid">
      <article class="card">
        <h2>ê¸°ë³¸ ì„¤ì •</h2>
        <div class="two">
          <div><label>ë¯¸íŒ… ì œëª©</label><input id="title" value="ì£¼ê°„ ì œí’ˆ íšŒì˜" /></div>
          <div><label>í†µí™”</label><select id="currency"><option>KRW</option><option>USD</option><option>EUR</option><option>JPY</option></select></div>
          <div><label>ì˜ˆìƒ ì‹œê°„(ë¶„)</label><input id="planned" type="number" min="1" value="45" /></div>
          <div><label>ê°„ì ‘ë¹„ìœ¨(%)</label><input id="overhead" type="number" min="0" value="25" /></div>
        </div>
        <h2 style="margin-top:12px">ì°¸ê°€ì</h2>
        <div id="rows" class="rows"></div>
        <button id="add" class="soft" type="button">+ ì°¸ê°€ì ì¶”ê°€</button>
      </article>

      <article class="card">
        <h2>ì‹¤ì‹œê°„ ê³„ì‚°</h2>
        <div class="stats">
          <div class="pill"><div class="k">íŒ€ ì‹œê°„ë‹¹ ë¹„ìš©</div><div id="hourly" class="v">-</div></div>
          <div class="pill"><div class="k">ë¶„ë‹¹ ì†Œëª¨</div><div id="perMin" class="v">-</div></div>
          <div class="pill"><div class="k">ì˜ˆìƒ ì´ë¹„ìš©</div><div id="forecast" class="v" style="color:var(--warn)">-</div></div>
          <div class="pill"><div class="k">í˜„ì¬ ëˆ„ì  ë¹„ìš©</div><div id="live" class="v live">-</div></div>
        </div>

        <div class="timer">
          <div id="time" class="time">00:00:00</div>
          <div class="bar-wrap"><div id="bar" class="bar"></div></div>
          <div class="btns">
            <button id="start" type="button">ì‹œì‘</button>
            <button id="pause" class="soft" type="button">ì¼ì‹œì •ì§€</button>
            <button id="reset" class="soft" type="button">ë¦¬ì…‹</button>
            <button id="save" class="soft" type="button">ê¸°ë¡ ì €ì¥</button>
            <button id="copy" class="soft" type="button">ìš”ì•½ ë³µì‚¬</button>
            <button id="end" type="button" style="background:linear-gradient(135deg,#ff7c82,#e04e57)">ì¢…ë£Œ</button>
          </div>
        </div>

        <h2 style="margin-top:10px">ìµœê·¼ ê¸°ë¡</h2>
        <div id="sessions" class="sessions"></div>
      </article>
    </section>
  </main>

  <script>
    const KEY='meeting-cost-calc:v1';const $=id=>document.getElementById(id);
    const E={title:$('title'),currency:$('currency'),planned:$('planned'),overhead:$('overhead'),rows:$('rows'),add:$('add'),hourly:$('hourly'),perMin:$('perMin'),forecast:$('forecast'),live:$('live'),time:$('time'),bar:$('bar'),start:$('start'),pause:$('pause'),reset:$('reset'),save:$('save'),copy:$('copy'),end:$('end'),sessions:$('sessions')};
    const S={participants:[{name:'ê¸°íš',rate:55000},{name:'ë””ìì¸',rate:50000},{name:'ê°œë°œ',rate:70000}],title:'ì£¼ê°„ ì œí’ˆ íšŒì˜',currency:'KRW',planned:45,overhead:25,sessions:[],running:false,startAt:0,elapsed:0};
    let raf=0;
    const fmt=v=>new Intl.NumberFormat(undefined,{style:'currency',currency:S.currency,maximumFractionDigits:(S.currency==='KRW'||S.currency==='JPY')?0:2}).format(v||0);
    const tstr=ms=>{const s=Math.floor(ms/1000),h=String(Math.floor(s/3600)).padStart(2,'0'),m=String(Math.floor((s%3600)/60)).padStart(2,'0'),ss=String(s%60).padStart(2,'0');return `${h}:${m}:${ss}`};
    const elapsed=()=>S.running?S.elapsed+(Date.now()-S.startAt):S.elapsed;
    const rates=()=>{const base=S.participants.reduce((a,b)=>a+(Number(b.rate)||0),0);const hourly=base*(1+(Number(S.overhead)||0)/100);return {hourly,perMin:hourly/60,perSec:hourly/3600}};
    function saveStore(){localStorage.setItem(KEY,JSON.stringify({participants:S.participants,title:S.title,currency:S.currency,planned:S.planned,overhead:S.overhead,sessions:S.sessions.slice(0,20)}))}
    function loadStore(){try{const d=JSON.parse(localStorage.getItem(KEY));if(!d)return;Object.assign(S,d)}catch{}}
    function renderRows(){E.rows.innerHTML='';S.participants.forEach((p,i)=>{const div=document.createElement('div');div.className='row';div.innerHTML=`<input data-i="${i}" data-k="name" value="${(p.name||'').replace(/"/g,'&quot;')}"><input data-i="${i}" data-k="rate" type="number" min="0" value="${Number(p.rate)||0}"><button data-del="${i}" class="soft" type="button">âœ•</button>`;E.rows.appendChild(div)})}
    function renderSessions(){E.sessions.innerHTML=S.sessions.length?S.sessions.map(v=>`<div class="item"><strong>${v.title}</strong><br><small>${new Date(v.savedAt).toLocaleString()} Â· ${v.time}</small><div style="font-weight:700;margin-top:4px">${fmt(v.cost)}</div></div>`).join(''):'<div style="color:var(--muted);font-size:.82rem">ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>'}
    function paint(){S.title=E.title.value.trim()||'ë¯¸íŒ…';S.currency=E.currency.value;S.planned=Math.max(1,Number(E.planned.value)||1);S.overhead=Math.max(0,Number(E.overhead.value)||0);const r=rates();const e=elapsed();const cost=r.perSec*e/1000;E.hourly.textContent=fmt(r.hourly);E.perMin.textContent=fmt(r.perMin);E.forecast.textContent=fmt(r.perMin*S.planned);E.live.textContent=fmt(cost);E.time.textContent=tstr(e);const p=Math.min(100,e/(S.planned*60000)*100);E.bar.style.width=p+'%';E.bar.style.background=p>=100?'linear-gradient(90deg,#ff7d87,#ff5d67)':'linear-gradient(90deg,#29d089,#6ce9b1)';saveStore()}
    function loop(){paint();if(S.running)raf=requestAnimationFrame(loop)}
    function start(){if(S.running)return;S.running=true;S.startAt=Date.now();loop()}
    function pause(){if(!S.running)return;S.elapsed=elapsed();S.running=false;cancelAnimationFrame(raf);paint()}
    function reset(){S.running=false;S.startAt=0;S.elapsed=0;cancelAnimationFrame(raf);paint()}
    function pushSession(){const r=rates();const item={title:S.title,time:tstr(elapsed()),cost:r.perSec*elapsed()/1000,savedAt:Date.now()};S.sessions.unshift(item);S.sessions=S.sessions.slice(0,20);renderSessions();saveStore()}
    async function copySummary(){const r=rates();const txt=[`[${S.title}]`,`ì°¸ê°€ì ${S.participants.length}ëª…`,`ì‹œê°„ë‹¹ ${fmt(r.hourly)}`,`ê²½ê³¼ ${tstr(elapsed())}`,`í˜„ì¬ ${fmt(r.perSec*elapsed()/1000)}`,`ì˜ˆìƒ(${S.planned}ë¶„) ${fmt(r.perMin*S.planned)}`].join('\n');try{await navigator.clipboard.writeText(txt);alert('ìš”ì•½ ë³µì‚¬ ì™„ë£Œ')}catch{alert('ë³µì‚¬ ê¶Œí•œ ì—†ìŒ')}}

    loadStore();E.title.value=S.title;E.currency.value=S.currency;E.planned.value=S.planned;E.overhead.value=S.overhead;renderRows();renderSessions();
    ['input','change'].forEach(ev=>[E.title,E.currency,E.planned,E.overhead].forEach(n=>n.addEventListener(ev,paint)));
    E.rows.addEventListener('input',e=>{const i=Number(e.target.dataset.i),k=e.target.dataset.k;if(!Number.isInteger(i)||!k)return;S.participants[i][k]=k==='rate'?Math.max(0,Number(e.target.value)||0):e.target.value;paint()});
    E.rows.addEventListener('click',e=>{const i=Number(e.target.dataset.del);if(!Number.isInteger(i))return;if(S.participants.length<=1)return alert('ìµœì†Œ 1ëª… í•„ìš”');S.participants.splice(i,1);renderRows();paint()});
    E.add.onclick=()=>{S.participants.push({name:`ì°¸ê°€ì ${S.participants.length+1}`,rate:50000});renderRows();paint()};
    E.start.onclick=start;E.pause.onclick=pause;E.reset.onclick=reset;E.save.onclick=pushSession;E.copy.onclick=copySummary;E.end.onclick=()=>{pause();pushSession();alert('ë¯¸íŒ… ì¢…ë£Œ ê¸°ë¡ ì €ì¥ë¨');reset()};
    paint();
  </script>
</body>
</html>
