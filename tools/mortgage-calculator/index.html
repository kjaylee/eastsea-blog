<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì£¼íƒë‹´ë³´ëŒ€ì¶œ ê³„ì‚°ê¸° | Mortgage Calculator</title>
<meta name="description" content="ì›ë¦¬ê¸ˆê· ë“±/ì›ê¸ˆê· ë“± ìƒí™˜ ë¹„êµ, ìƒí™˜ ìŠ¤ì¼€ì¤„ ì°¨íŠ¸, ë‹¤êµ­ì–´ í†µí™” ì§€ì›">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f0f2f5;--card:#fff;--text:#1a1a2e;--sub:#6b7280;--accent:#6366f1;--accent2:#818cf8;--border:#e5e7eb;--hover:#f9fafb;--green:#10b981;--red:#ef4444;--chart-principal:#6366f1;--chart-interest:#f59e0b}
[data-theme="dark"]{--bg:#0f172a;--card:#1e293b;--text:#f1f5f9;--sub:#94a3b8;--accent:#818cf8;--accent2:#a5b4fc;--border:#334155;--hover:#1e293b;--chart-principal:#818cf8;--chart-interest:#fbbf24}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:20px;transition:all .3s}
.container{max-width:1200px;margin:0 auto}
header{text-align:center;padding:30px 0}
h1{font-size:2.2rem;background:linear-gradient(135deg,#6366f1,#a855f7);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
.subtitle{color:var(--sub);font-size:1rem}
.theme-btn{position:fixed;top:16px;right:16px;background:var(--card);border:2px solid var(--border);border-radius:50%;width:44px;height:44px;cursor:pointer;font-size:1.3rem;display:flex;align-items:center;justify-content:center;z-index:100;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.back-link{display:inline-flex;align-items:center;gap:6px;color:var(--accent);text-decoration:none;font-size:.95rem;margin-bottom:20px}
.back-link:hover{text-decoration:underline}
.grid{display:grid;grid-template-columns:380px 1fr;gap:24px;margin-top:20px}
@media(max-width:860px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border-radius:16px;padding:24px;box-shadow:0 4px 20px rgba(0,0,0,.06);border:1px solid var(--border)}
.form-group{margin-bottom:18px}
.form-group label{display:block;font-weight:600;margin-bottom:6px;font-size:.9rem}
.form-group input,.form-group select{width:100%;padding:12px;border:2px solid var(--border);border-radius:10px;font-size:1rem;background:var(--bg);color:var(--text);transition:border .2s}
.form-group input:focus,.form-group select:focus{outline:none;border-color:var(--accent)}
.currency-input{display:flex;align-items:center;gap:0}
.currency-label{background:var(--accent);color:#fff;padding:12px 14px;border-radius:10px 0 0 10px;font-weight:700;font-size:1rem;white-space:nowrap}
.currency-input input{border-radius:0 10px 10px 0}
.method-toggle{display:flex;gap:0;margin-bottom:20px;border-radius:12px;overflow:hidden;border:2px solid var(--accent)}
.method-toggle button{flex:1;padding:12px;border:none;background:transparent;color:var(--accent);font-weight:700;cursor:pointer;font-size:.9rem;transition:all .2s}
.method-toggle button.active{background:var(--accent);color:#fff}
.calc-btn{width:100%;padding:14px;background:linear-gradient(135deg,#6366f1,#a855f7);color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .15s,box-shadow .15s}
.calc-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(99,102,241,.4)}
.results{display:none}
.result-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:24px}
.result-item{background:var(--bg);border-radius:12px;padding:16px;text-align:center}
.result-item .label{font-size:.8rem;color:var(--sub);margin-bottom:4px}
.result-item .value{font-size:1.5rem;font-weight:800;color:var(--accent)}
.result-item .value.green{color:var(--green)}
.result-item .value.red{color:var(--red)}
.compare-section{display:none;margin-top:24px}
.compare-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:600px){.compare-grid{grid-template-columns:1fr}}
.compare-card{background:var(--bg);border-radius:12px;padding:18px}
.compare-card h4{font-size:.95rem;margin-bottom:12px;color:var(--accent)}
.compare-card .row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border);font-size:.88rem}
.compare-card .row:last-child{border:none}
.chart-container{position:relative;width:100%;margin:20px 0}
canvas{width:100%!important;border-radius:12px}
.tab-bar{display:flex;gap:0;margin-bottom:16px;border-radius:10px;overflow:hidden;border:2px solid var(--border)}
.tab-bar button{flex:1;padding:10px;border:none;background:transparent;color:var(--sub);font-weight:600;cursor:pointer;font-size:.85rem;transition:all .2s}
.tab-bar button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.schedule-table{width:100%;border-collapse:collapse;font-size:.82rem;margin-top:16px;display:none}
.schedule-table.show{display:table}
.schedule-table th{background:var(--accent);color:#fff;padding:10px 8px;text-align:right;position:sticky;top:0}
.schedule-table th:first-child{text-align:center}
.schedule-table td{padding:8px;text-align:right;border-bottom:1px solid var(--border)}
.schedule-table td:first-child{text-align:center}
.schedule-table tr:hover td{background:var(--hover)}
.table-scroll{max-height:400px;overflow-y:auto;border-radius:12px;border:1px solid var(--border)}
.legend{display:flex;gap:20px;justify-content:center;margin:12px 0;font-size:.85rem;flex-wrap:wrap}
.legend span{display:flex;align-items:center;gap:6px}
.legend .dot{width:14px;height:14px;border-radius:4px}
footer{text-align:center;padding:30px;color:var(--sub);font-size:.85rem}
footer a{color:var(--accent);text-decoration:none}
</style>
</head>
<body>
<button class="theme-btn" onclick="toggleTheme()">ğŸŒ“</button>
<div class="container">
<a href="../" class="back-link">â† ë„êµ¬ ëª©ë¡ìœ¼ë¡œ</a>
<header>
<h1>ğŸ  ì£¼íƒë‹´ë³´ëŒ€ì¶œ ê³„ì‚°ê¸°</h1>
<p class="subtitle">ì›ë¦¬ê¸ˆê· ë“± / ì›ê¸ˆê· ë“± ìƒí™˜ ë¹„êµ & ìŠ¤ì¼€ì¤„ ì°¨íŠ¸</p>
</header>
<div class="grid">
<div>
<div class="card">
<div class="form-group">
<label>í†µí™”</label>
<select id="currency" onchange="updateCurrency()">
<option value="â‚©" data-locale="ko-KR" data-code="KRW">â‚© í•œêµ­ ì› (KRW)</option>
<option value="$" data-locale="en-US" data-code="USD">$ ë¯¸êµ­ ë‹¬ëŸ¬ (USD)</option>
<option value="â‚¬" data-locale="de-DE" data-code="EUR">â‚¬ ìœ ë¡œ (EUR)</option>
<option value="Â¥" data-locale="ja-JP" data-code="JPY">Â¥ ì¼ë³¸ ì—” (JPY)</option>
</select>
</div>
<div class="form-group">
<label>ëŒ€ì¶œ ê¸ˆì•¡</label>
<div class="currency-input">
<span class="currency-label" id="currSymbol">â‚©</span>
<input type="text" id="principal" placeholder="300,000,000" oninput="formatNumber(this)" value="300,000,000">
</div>
</div>
<div class="form-group">
<label>ì—° ì´ììœ¨ (%)</label>
<input type="number" id="rate" step="0.01" value="3.5" min="0" max="30">
</div>
<div class="form-group">
<label>ëŒ€ì¶œ ê¸°ê°„ (ë…„)</label>
<input type="number" id="years" value="30" min="1" max="50">
</div>
<div class="method-toggle">
<button class="active" onclick="setMethod('equal_payment',this)">ì›ë¦¬ê¸ˆê· ë“±</button>
<button onclick="setMethod('equal_principal',this)">ì›ê¸ˆê· ë“±</button>
<button onclick="setMethod('compare',this)">ë¹„êµ</button>
</div>
<button class="calc-btn" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>
</div>
</div>
<div>
<div class="card results" id="results">
<div class="result-cards" id="resultCards"></div>
<div class="tab-bar">
<button class="active" onclick="showTab('chart',this)">ğŸ“Š ì°¨íŠ¸</button>
<button onclick="showTab('schedule',this)">ğŸ“‹ ìƒí™˜í‘œ</button>
</div>
<div id="chartPanel">
<div class="legend">
<span><span class="dot" style="background:var(--chart-principal)"></span>ì›ê¸ˆ</span>
<span><span class="dot" style="background:var(--chart-interest)"></span>ì´ì</span>
</div>
<div class="chart-container"><canvas id="chart"></canvas></div>
</div>
<div id="schedulePanel" style="display:none">
<div class="table-scroll">
<table class="schedule-table show" id="scheduleTable">
<thead><tr><th>íšŒì°¨</th><th>ì›” ìƒí™˜ì•¡</th><th>ì›ê¸ˆ</th><th>ì´ì</th><th>ì”ì•¡</th></tr></thead>
<tbody id="scheduleBody"></tbody>
</table>
</div>
</div>
</div>
<div class="card compare-section" id="compareSection">
<h3 style="margin-bottom:16px">ğŸ“Š ìƒí™˜ ë°©ì‹ ë¹„êµ</h3>
<div class="compare-grid">
<div class="compare-card">
<h4>ì›ë¦¬ê¸ˆê· ë“± ìƒí™˜</h4>
<div id="compareEP"></div>
</div>
<div class="compare-card">
<h4>ì›ê¸ˆê· ë“± ìƒí™˜</h4>
<div id="comparePE"></div>
</div>
</div>
<div class="chart-container" style="margin-top:20px">
<div class="legend">
<span><span class="dot" style="background:#6366f1"></span>ì›ë¦¬ê¸ˆê· ë“± ì”ì•¡</span>
<span><span class="dot" style="background:#f59e0b"></span>ì›ê¸ˆê· ë“± ì”ì•¡</span>
</div>
<canvas id="compareChart"></canvas>
</div>
</div>
</div>
</div>
<footer><a href="../">â† ë„êµ¬ ëª©ë¡</a> | Made with â¤ï¸</footer>
</div>
<script>
let method='equal_payment';let currSymbol='â‚©';let currLocale='ko-KR';let currCode='KRW';
function toggleTheme(){const t=document.documentElement;t.setAttribute('data-theme',t.getAttribute('data-theme')==='dark'?'light':'dark');localStorage.setItem('mortgage-theme',t.getAttribute('data-theme'))}
(()=>{const s=localStorage.getItem('mortgage-theme')||'light';document.documentElement.setAttribute('data-theme',s)})();
function updateCurrency(){const s=document.getElementById('currency');const o=s.options[s.selectedIndex];currSymbol=o.value;currLocale=o.dataset.locale;currCode=o.dataset.code;document.getElementById('currSymbol').textContent=currSymbol}
function formatNumber(el){let v=el.value.replace(/[^\d]/g,'');el.value=v?Number(v).toLocaleString():''}
function fmt(n){try{return new Intl.NumberFormat(currLocale,{style:'currency',currency:currCode,maximumFractionDigits:0}).format(Math.round(n))}catch(e){return currSymbol+Math.round(n).toLocaleString()}}
function setMethod(m,btn){method=m;document.querySelectorAll('.method-toggle button').forEach(b=>b.classList.remove('active'));btn.classList.add('active')}
function showTab(tab,btn){document.querySelectorAll('.tab-bar button').forEach(b=>b.classList.remove('active'));btn.classList.add('active');document.getElementById('chartPanel').style.display=tab==='chart'?'block':'none';document.getElementById('schedulePanel').style.display=tab==='schedule'?'block':'none'}
function calcEqualPayment(P,r,n){if(r===0)return Array.from({length:n},(_,i)=>({month:i+1,payment:P/n,principal:P/n,interest:0,balance:P-P/n*(i+1)}));const mp=r/12;const pay=P*mp*Math.pow(1+mp,n)/(Math.pow(1+mp,n)-1);let bal=P;return Array.from({length:n},(_,i)=>{const interest=bal*mp;const principal=pay-interest;bal-=principal;return{month:i+1,payment:pay,principal,interest,balance:Math.max(bal,0)}})}
function calcEqualPrincipal(P,r,n){const mp=r/12;const princ=P/n;let bal=P;return Array.from({length:n},(_,i)=>{const interest=bal*mp;const payment=princ+interest;bal-=princ;return{month:i+1,payment,principal:princ,interest,balance:Math.max(bal,0)}})}
function calculate(){const P=Number(document.getElementById('principal').value.replace(/[^\d]/g,''));const r=Number(document.getElementById('rate').value)/100;const y=Number(document.getElementById('years').value);const n=y*12;if(!P||r<0||!y){alert('ì˜¬ë°”ë¥¸ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”');return}
const res=document.getElementById('results');res.style.display='block';const comp=document.getElementById('compareSection');
if(method==='compare'){comp.style.display='block';const ep=calcEqualPayment(P,r,n);const pp=calcEqualPrincipal(P,r,n);showResults(ep);showSchedule(ep);drawChart(ep);showCompare(ep,pp,P,n);drawCompareChart(ep,pp,n)}else{comp.style.display='none';const data=method==='equal_payment'?calcEqualPayment(P,r,n):calcEqualPrincipal(P,r,n);showResults(data);showSchedule(data);drawChart(data)}}
function showResults(data){const totalPay=data.reduce((s,d)=>s+d.payment,0);const totalInt=data.reduce((s,d)=>s+d.interest,0);const P=Number(document.getElementById('principal').value.replace(/[^\d]/g,''));document.getElementById('resultCards').innerHTML=`
<div class="result-item"><div class="label">ì›” ìƒí™˜ì•¡ (ì²«ë‹¬)</div><div class="value">${fmt(data[0].payment)}</div></div>
<div class="result-item"><div class="label">ì´ ìƒí™˜ì•¡</div><div class="value">${fmt(totalPay)}</div></div>
<div class="result-item"><div class="label">ì´ ì´ì</div><div class="value red">${fmt(totalInt)}</div></div>
<div class="result-item"><div class="label">ì´ì ë¹„ìœ¨</div><div class="value">${(totalInt/P*100).toFixed(1)}%</div></div>`}
function showSchedule(data){const body=document.getElementById('scheduleBody');body.innerHTML=data.map(d=>`<tr><td>${d.month}</td><td>${fmt(d.payment)}</td><td>${fmt(d.principal)}</td><td>${fmt(d.interest)}</td><td>${fmt(d.balance)}</td></tr>`).join('')}
function showCompare(ep,pp,P,n){const epTotal=ep.reduce((s,d)=>s+d.payment,0);const ppTotal=pp.reduce((s,d)=>s+d.payment,0);const epInt=ep.reduce((s,d)=>s+d.interest,0);const ppInt=pp.reduce((s,d)=>s+d.interest,0);
document.getElementById('compareEP').innerHTML=`
<div class="row"><span>ì²«ë‹¬ ìƒí™˜ì•¡</span><span>${fmt(ep[0].payment)}</span></div>
<div class="row"><span>ë§ˆì§€ë§‰ ë‹¬</span><span>${fmt(ep[n-1].payment)}</span></div>
<div class="row"><span>ì´ ìƒí™˜ì•¡</span><span>${fmt(epTotal)}</span></div>
<div class="row"><span>ì´ ì´ì</span><span style="color:var(--red)">${fmt(epInt)}</span></div>`;
document.getElementById('comparePE').innerHTML=`
<div class="row"><span>ì²«ë‹¬ ìƒí™˜ì•¡</span><span>${fmt(pp[0].payment)}</span></div>
<div class="row"><span>ë§ˆì§€ë§‰ ë‹¬</span><span>${fmt(pp[n-1].payment)}</span></div>
<div class="row"><span>ì´ ìƒí™˜ì•¡</span><span>${fmt(ppTotal)}</span></div>
<div class="row"><span>ì´ ì´ì</span><span style="color:var(--red)">${fmt(ppInt)}</span></div>
<div class="row"><span>ì´ì ì ˆì•½</span><span style="color:var(--green);font-weight:700">${fmt(epInt-ppInt)}</span></div>`}
// Chart drawing with Canvas API
let chartInstance=null;let compareChartInstance=null;
function drawChart(data){const canvas=document.getElementById('chart');const ctx=canvas.getContext('2d');const dpr=window.devicePixelRatio||1;const w=canvas.parentElement.clientWidth;const h=Math.min(350,w*0.55);canvas.width=w*dpr;canvas.height=h*dpr;canvas.style.height=h+'px';ctx.scale(dpr,dpr);ctx.clearRect(0,0,w,h);
const pad={top:20,right:20,bottom:40,left:60};const cw=w-pad.left-pad.right;const ch=h-pad.top-pad.bottom;
const maxPay=Math.max(...data.map(d=>d.payment))*1.1;
// stacked bar chart: principal + interest per month (sampled)
const step=Math.max(1,Math.floor(data.length/60));const sampled=data.filter((_,i)=>i%step===0);const barW=Math.max(2,cw/sampled.length-1);
const isDark=document.documentElement.getAttribute('data-theme')==='dark';
const principalColor=isDark?'#818cf8':'#6366f1';const interestColor=isDark?'#fbbf24':'#f59e0b';
// Y axis
ctx.strokeStyle=isDark?'#475569':'#e5e7eb';ctx.lineWidth=1;ctx.font='11px system-ui';ctx.fillStyle=isDark?'#94a3b8':'#6b7280';ctx.textAlign='right';
for(let i=0;i<=5;i++){const y=pad.top+ch-ch*(i/5);ctx.beginPath();ctx.moveTo(pad.left,y);ctx.lineTo(w-pad.right,y);ctx.stroke();ctx.fillText(shortFmt(maxPay*i/5),pad.left-6,y+4)}
// Bars
sampled.forEach((d,i)=>{const x=pad.left+i*(cw/sampled.length);const pH=ch*(d.principal/maxPay);const iH=ch*(d.interest/maxPay);ctx.fillStyle=principalColor;ctx.fillRect(x,pad.top+ch-pH-iH,barW,pH);ctx.fillStyle=interestColor;ctx.fillRect(x,pad.top+ch-iH,barW,iH)});
// X axis labels
ctx.fillStyle=isDark?'#94a3b8':'#6b7280';ctx.textAlign='center';ctx.font='11px system-ui';
const labelStep=Math.max(1,Math.floor(sampled.length/8));
sampled.forEach((d,i)=>{if(i%labelStep===0){const x=pad.left+i*(cw/sampled.length)+barW/2;ctx.fillText(d.month+'ê°œì›”',x,h-pad.bottom+20)}})}
function drawCompareChart(ep,pp,n){const canvas=document.getElementById('compareChart');const ctx=canvas.getContext('2d');const dpr=window.devicePixelRatio||1;const w=canvas.parentElement.clientWidth;const h=Math.min(300,w*0.5);canvas.width=w*dpr;canvas.height=h*dpr;canvas.style.height=h+'px';ctx.scale(dpr,dpr);ctx.clearRect(0,0,w,h);
const pad={top:20,right:20,bottom:40,left:60};const cw=w-pad.left-pad.right;const ch=h-pad.top-pad.bottom;
const P=Number(document.getElementById('principal').value.replace(/[^\d]/g,''));
const isDark=document.documentElement.getAttribute('data-theme')==='dark';
// Grid
ctx.strokeStyle=isDark?'#475569':'#e5e7eb';ctx.lineWidth=1;ctx.font='11px system-ui';ctx.fillStyle=isDark?'#94a3b8':'#6b7280';ctx.textAlign='right';
for(let i=0;i<=5;i++){const y=pad.top+ch-ch*(i/5);ctx.beginPath();ctx.moveTo(pad.left,y);ctx.lineTo(w-pad.right,y);ctx.stroke();ctx.fillText(shortFmt(P*i/5),pad.left-6,y+4)}
// Lines
function drawLine(data,color){ctx.strokeStyle=color;ctx.lineWidth=2.5;ctx.beginPath();data.forEach((d,i)=>{const x=pad.left+(i/n)*cw;const y=pad.top+ch-ch*(d.balance/P);i===0?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.stroke()}
drawLine(ep,'#6366f1');drawLine(pp,'#f59e0b');
// X axis
ctx.fillStyle=isDark?'#94a3b8':'#6b7280';ctx.textAlign='center';
for(let i=0;i<=5;i++){const month=Math.round(n*i/5);const x=pad.left+(month/n)*cw;ctx.fillText(Math.round(month/12)+'ë…„',x,h-pad.bottom+20)}}
function shortFmt(v){if(currCode==='KRW'){if(v>=100000000)return(v/100000000).toFixed(1)+'ì–µ';if(v>=10000)return(v/10000).toFixed(0)+'ë§Œ';return Math.round(v).toLocaleString()}if(v>=1000000)return currSymbol+(v/1000000).toFixed(1)+'M';if(v>=1000)return currSymbol+(v/1000).toFixed(0)+'K';return currSymbol+Math.round(v)}
// Auto calculate on load
window.addEventListener('load',()=>{calculate()});
window.addEventListener('resize',()=>{if(document.getElementById('results').style.display==='block')calculate()});
</script>
</body>
</html>