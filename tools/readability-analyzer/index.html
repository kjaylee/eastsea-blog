<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Readability Analyzer | ê°€ë…ì„± ë¶„ì„ê¸°</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f5f7fa;--surface:#fff;--text:#1a1a2e;--text2:#555;--accent:#10b981;--accent2:#06b6d4;--border:#e2e8f0;--shadow:0 4px 24px rgba(0,0,0,.08);--radius:12px;--easy:#22c55e;--medium:#f59e0b;--hard:#ef4444}
@media(prefers-color-scheme:dark){:root{--bg:#0f0f1a;--surface:#1a1a2e;--text:#e2e8f0;--text2:#94a3b8;--accent:#34d399;--accent2:#22d3ee;--border:#2d2d44;--shadow:0 4px 24px rgba(0,0,0,.3)}}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:20px;display:flex;flex-direction:column;align-items:center}
h1{font-size:1.8rem;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px}
.subtitle{color:var(--text2);margin-bottom:24px;font-size:.95rem}
.container{width:100%;max-width:960px}
.card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;margin-bottom:20px;border:1px solid var(--border)}
textarea{width:100%;min-height:200px;border:2px solid var(--border);border-radius:8px;padding:14px;font-size:1rem;line-height:1.7;background:var(--bg);color:var(--text);resize:vertical;font-family:inherit}
textarea:focus{outline:none;border-color:var(--accent)}
.btn-row{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
.btn{padding:10px 20px;border:none;border-radius:8px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;box-shadow:0 2px 12px rgba(16,185,129,.3)}
.btn-primary:hover{transform:translateY(-1px)}
.btn-outline{background:transparent;border:2px solid var(--border);color:var(--text)}
.btn-outline:hover{border-color:var(--accent);color:var(--accent)}
.scores-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-bottom:20px}
.score-card{background:var(--bg);border-radius:10px;padding:16px;text-align:center;border:1px solid var(--border)}
.score-card .label{font-size:.8rem;color:var(--text2);margin-bottom:6px;font-weight:600}
.score-card .value{font-size:2rem;font-weight:800}
.score-card .desc{font-size:.8rem;color:var(--text2);margin-top:4px}
.level-badge{display:inline-block;padding:4px 12px;border-radius:20px;font-size:.8rem;font-weight:700;color:#fff}
.level-easy{background:var(--easy)}.level-medium{background:var(--medium)}.level-hard{background:var(--hard)}
.stats-row{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:16px;font-size:.9rem;color:var(--text2)}
.stats-row span{background:var(--bg);padding:6px 12px;border-radius:8px}
.highlight-section{margin-top:16px}
.highlight-section h3{font-size:1rem;margin-bottom:10px}
.sentence{display:inline;line-height:2;padding:2px 0;border-radius:3px;cursor:help}
.sent-easy{background:rgba(34,197,94,.15)}.sent-medium{background:rgba(245,158,11,.15)}.sent-hard{background:rgba(239,68,68,.2)}
.suggestions{margin-top:20px}
.suggestions h3{margin-bottom:10px}
.suggestion{background:var(--bg);border-radius:8px;padding:12px 14px;margin-bottom:8px;font-size:.9rem;border-left:3px solid var(--accent);display:flex;gap:8px;align-items:flex-start}
.suggestion .icon{font-size:1.1rem;flex-shrink:0}
.lang-toggle{display:flex;gap:8px;margin-bottom:14px}
.lang-toggle button{padding:6px 14px;border:2px solid var(--border);border-radius:8px;background:transparent;color:var(--text);cursor:pointer;font-size:.85rem;font-weight:600}
.lang-toggle button.active{border-color:var(--accent);color:var(--accent);background:rgba(16,185,129,.08)}
.hidden{display:none}
@media(max-width:600px){h1{font-size:1.4rem}.card{padding:16px}textarea{min-height:150px}.scores-grid{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ“– Readability Analyzer</h1>
  <p class="subtitle">í…ìŠ¤íŠ¸ì˜ ê°€ë…ì„±ì„ ë¶„ì„í•˜ê³  ê°œì„  ë°©ë²•ì„ ì œì•ˆí•©ë‹ˆë‹¤</p>

  <div class="card">
    <div class="lang-toggle">
      <button class="active" data-lang="auto">ğŸŒ ìë™ ê°ì§€</button>
      <button data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
      <button data-lang="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
    </div>
    <textarea id="inputText" placeholder="ë¶„ì„í•  í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...&#10;&#10;Paste your text here for readability analysis..."></textarea>
    <div class="btn-row">
      <button class="btn btn-primary" id="analyzeBtn">ğŸ” ë¶„ì„í•˜ê¸°</button>
      <button class="btn btn-outline" id="sampleBtn">ğŸ“ ìƒ˜í”Œ í…ìŠ¤íŠ¸</button>
      <button class="btn btn-outline" id="clearBtn">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
    </div>
  </div>

  <div class="card hidden" id="resultCard">
    <h2 style="margin-bottom:14px;font-size:1.2rem">ğŸ“Š ë¶„ì„ ê²°ê³¼</h2>
    <div class="stats-row" id="statsRow"></div>
    <div class="scores-grid" id="scoresGrid"></div>
    <div class="highlight-section">
      <h3>ğŸ¨ ë¬¸ì¥ë³„ ë³µì¡ë„</h3>
      <p style="font-size:.8rem;color:var(--text2);margin-bottom:8px">
        <span class="sentence sent-easy" style="padding:2px 8px">ì‰¬ì›€</span>
        <span class="sentence sent-medium" style="padding:2px 8px">ë³´í†µ</span>
        <span class="sentence sent-hard" style="padding:2px 8px">ì–´ë ¤ì›€</span>
      </p>
      <div id="highlightedText" style="line-height:2"></div>
    </div>
    <div class="suggestions" id="suggestionsDiv"></div>
  </div>
</div>

<script>
(function(){
  const $ = s => document.querySelector(s);
  const inputText = $('#inputText');
  let lang = 'auto';

  // Lang toggle
  document.querySelectorAll('.lang-toggle button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.lang-toggle button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      lang = btn.dataset.lang;
    });
  });

  // Sample texts
  const samples = {
    en: "The quick brown fox jumps over the lazy dog. This is a simple sentence that most people can understand easily. However, the implementation of sophisticated algorithms for natural language processing requires extensive knowledge of computational linguistics, statistical modeling, and machine learning paradigms. Furthermore, the epistemological implications of artificial intelligence raise profound philosophical questions about consciousness, sentience, and the fundamental nature of human cognition.",
    ko: "ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì¢‹ë‹¤. ê³µì›ì—ì„œ ì‚°ì±…ì„ í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ í˜„ëŒ€ ì‚¬íšŒì—ì„œ ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì˜ ê¸‰ì†í•œ ë°œì „ì€ ë…¸ë™ ì‹œì¥ì˜ êµ¬ì¡°ì  ë³€í™”ì™€ ì‚¬íšŒê²½ì œì  ë¶ˆí‰ë“±ì˜ ì‹¬í™”ë¼ëŠ” ë³µí•©ì ì¸ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ê³  ìˆìœ¼ë©°, ì´ì— ëŒ€í•œ í¬ê´„ì ì´ê³  ë‹¤ì¸µì ì¸ ì •ì±…ì  ëŒ€ì‘ì´ ì‹œê¸‰í•˜ê²Œ ìš”êµ¬ë˜ê³  ìˆë‹¤. ë‚˜ëŠ” ë°¥ì„ ë¨¹ì—ˆë‹¤."
  };

  $('#sampleBtn').addEventListener('click', () => {
    inputText.value = samples.en + '\n\n' + samples.ko;
  });
  $('#clearBtn').addEventListener('click', () => {
    inputText.value = '';
    $('#resultCard').classList.add('hidden');
  });

  function detectLang(text){
    if(lang !== 'auto') return lang;
    const korean = (text.match(/[\uAC00-\uD7AF]/g) || []).length;
    const latin = (text.match(/[a-zA-Z]/g) || []).length;
    return korean > latin * 0.3 ? 'ko' : 'en';
  }

  function splitSentences(text){
    // Split on sentence-ending punctuation
    return text.split(/(?<=[.!?ã€‚\n])\s*/).filter(s => s.trim().length > 0);
  }

  function countSyllablesEN(word){
    word = word.toLowerCase().replace(/[^a-z]/g, '');
    if(word.length <= 2) return 1;
    let count = 0;
    const vowels = 'aeiouy';
    let prevVowel = false;
    for(let i = 0; i < word.length; i++){
      const isVowel = vowels.includes(word[i]);
      if(isVowel && !prevVowel) count++;
      prevVowel = isVowel;
    }
    if(word.endsWith('e') && count > 1) count--;
    if(word.endsWith('le') && word.length > 2 && !vowels.includes(word[word.length-3])) count++;
    return Math.max(1, count);
  }

  function countSyllablesKO(word){
    return (word.match(/[\uAC00-\uD7AF]/g) || []).length || 1;
  }

  function getWords(text, detectedLang){
    if(detectedLang === 'ko'){
      // Korean: split by spaces, but also count character-based length
      return text.split(/\s+/).filter(w => w.length > 0);
    }
    return text.split(/\s+/).filter(w => w.replace(/[^a-zA-Z0-9]/g,'').length > 0);
  }

  function isComplexWord(word, detectedLang){
    if(detectedLang === 'ko'){
      return word.length >= 6; // 6+ chars considered complex for Korean
    }
    return countSyllablesEN(word) >= 3;
  }

  function analyze(text){
    const detected = detectLang(text);
    const sentences = splitSentences(text);
    const words = getWords(text, detected);
    const totalSentences = sentences.length;
    const totalWords = words.length;

    if(totalWords < 3 || totalSentences < 1){
      alert('ë¶„ì„í•˜ë ¤ë©´ ìµœì†Œ 3ë‹¨ì–´ ì´ìƒì˜ í…ìŠ¤íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.');
      return null;
    }

    let totalSyllables = 0, complexWords = 0, polyWords = 0;
    words.forEach(w => {
      const s = detected === 'ko' ? countSyllablesKO(w) : countSyllablesEN(w);
      totalSyllables += s;
      if(isComplexWord(w, detected)) complexWords++;
      if(s >= 3) polyWords++;
    });

    const avgWordsPerSent = totalWords / totalSentences;
    const avgSyllPerWord = totalSyllables / totalWords;

    // Flesch-Kincaid Grade Level
    const fkGrade = 0.39 * avgWordsPerSent + 11.8 * avgSyllPerWord - 15.59;

    // Flesch Reading Ease
    const fkEase = 206.835 - 1.015 * avgWordsPerSent - 84.6 * avgSyllPerWord;

    // Gunning Fog
    const fog = 0.4 * (avgWordsPerSent + 100 * complexWords / totalWords);

    // Coleman-Liau
    const L = (text.match(/[a-zA-Z\uAC00-\uD7AF]/g) || []).length / totalWords * 100;
    const S = totalSentences / totalWords * 100;
    const cli = 0.0588 * L - 0.296 * S - 15.8;

    // SMOG
    const smog = totalSentences >= 3 ? 1.0430 * Math.sqrt(polyWords * (30 / totalSentences)) + 3.1291 : 0;

    // Sentence complexity
    const sentenceData = sentences.map(s => {
      const sw = getWords(s, detected);
      const wc = sw.length;
      let complexity = 'easy';
      if(detected === 'ko'){
        if(wc > 15 || s.length > 80) complexity = 'hard';
        else if(wc > 8 || s.length > 40) complexity = 'medium';
      } else {
        if(wc > 25) complexity = 'hard';
        else if(wc > 15) complexity = 'medium';
      }
      return {text: s, words: wc, complexity};
    });

    return {
      detected, totalSentences, totalWords, totalSyllables, complexWords,
      avgWordsPerSent: avgWordsPerSent.toFixed(1),
      fkGrade: Math.max(0, fkGrade).toFixed(1),
      fkEase: Math.min(100, Math.max(0, fkEase)).toFixed(1),
      fog: Math.max(0, fog).toFixed(1),
      cli: Math.max(0, cli).toFixed(1),
      smog: smog > 0 ? smog.toFixed(1) : 'N/A',
      sentenceData
    };
  }

  function getLevelInfo(fkEase){
    const e = parseFloat(fkEase);
    if(e >= 70) return {label:'ì‰¬ì›€ (Easy)', cls:'level-easy'};
    if(e >= 40) return {label:'ë³´í†µ (Medium)', cls:'level-medium'};
    return {label:'ì–´ë ¤ì›€ (Hard)', cls:'level-hard'};
  }

  function renderResults(r){
    const card = $('#resultCard');
    card.classList.remove('hidden');

    // Stats
    const langLabel = r.detected === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : 'ğŸ‡ºğŸ‡¸ English';
    $('#statsRow').innerHTML = `
      <span>ğŸ“ ${r.totalWords}ë‹¨ì–´</span>
      <span>ğŸ“„ ${r.totalSentences}ë¬¸ì¥</span>
      <span>ğŸ”¤ ${r.totalSyllables}ìŒì ˆ</span>
      <span>ğŸ“Š í‰ê·  ${r.avgWordsPerSent}ë‹¨ì–´/ë¬¸ì¥</span>
      <span>${langLabel}</span>
    `;

    // Scores
    const level = getLevelInfo(r.fkEase);
    $('#scoresGrid').innerHTML = `
      <div class="score-card">
        <div class="label">ì „ì²´ ë‚œì´ë„</div>
        <div class="value"><span class="level-badge ${level.cls}">${level.label}</span></div>
      </div>
      <div class="score-card">
        <div class="label">Flesch Reading Ease</div>
        <div class="value" style="color:var(--accent)">${r.fkEase}</div>
        <div class="desc">ë†’ì„ìˆ˜ë¡ ì‰¬ì›€ (0-100)</div>
      </div>
      <div class="score-card">
        <div class="label">Flesch-Kincaid Grade</div>
        <div class="value">${r.fkGrade}</div>
        <div class="desc">ë¯¸êµ­ í•™ë…„ ìˆ˜ì¤€</div>
      </div>
      <div class="score-card">
        <div class="label">Gunning Fog Index</div>
        <div class="value">${r.fog}</div>
        <div class="desc">ì´í•´ì— í•„ìš”í•œ êµìœ¡ ì—°ìˆ˜</div>
      </div>
      <div class="score-card">
        <div class="label">Coleman-Liau Index</div>
        <div class="value">${r.cli}</div>
        <div class="desc">ë¬¸ì ê¸°ë°˜ í•™ë…„ ìˆ˜ì¤€</div>
      </div>
      <div class="score-card">
        <div class="label">SMOG Index</div>
        <div class="value">${r.smog}</div>
        <div class="desc">${r.smog === 'N/A' ? '30ë¬¸ì¥ ì´ìƒ í•„ìš”' : 'ì´í•´ì— í•„ìš”í•œ êµìœ¡ ì—°ìˆ˜'}</div>
      </div>
    `;

    // Highlighted sentences
    const ht = $('#highlightedText');
    ht.innerHTML = r.sentenceData.map(s =>
      `<span class="sentence sent-${s.complexity}" title="${s.words}ë‹¨ì–´ â€” ${s.complexity === 'easy' ? 'ì‰¬ì›€' : s.complexity === 'medium' ? 'ë³´í†µ' : 'ì–´ë ¤ì›€'}">${escapeHtml(s.text)} </span>`
    ).join('');

    // Suggestions
    const suggestions = [];
    const isKo = r.detected === 'ko';
    const longSents = r.sentenceData.filter(s => s.complexity === 'hard');
    if(longSents.length > 0){
      suggestions.push({icon:'âœ‚ï¸', text: isKo ? `ê¸´ ë¬¸ì¥ì´ ${longSents.length}ê°œ ìˆìŠµë‹ˆë‹¤. ì§§ê²Œ ë‚˜ëˆ„ë©´ ê°€ë…ì„±ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.` : `${longSents.length} long sentence(s) found. Consider breaking them into shorter ones.`});
    }
    if(parseFloat(r.fog) > 12){
      suggestions.push({icon:'ğŸ“š', text: isKo ? 'ë³µì¡í•œ ë‹¨ì–´ ë¹„ìœ¨ì´ ë†’ìŠµë‹ˆë‹¤. ì‰¬ìš´ ë‹¨ì–´ë¡œ ëŒ€ì²´í•´ ë³´ì„¸ìš”.' : 'High ratio of complex words. Try using simpler alternatives.'});
    }
    if(parseFloat(r.avgWordsPerSent) > 20){
      suggestions.push({icon:'ğŸ“', text: isKo ? `í‰ê·  ë¬¸ì¥ ê¸¸ì´(${r.avgWordsPerSent}ë‹¨ì–´)ê°€ ê¹ë‹ˆë‹¤. 15ë‹¨ì–´ ì´í•˜ê°€ ì´ìƒì ì…ë‹ˆë‹¤.` : `Average sentence length (${r.avgWordsPerSent} words) is high. Aim for under 20 words.`});
    }
    if(parseFloat(r.fkEase) < 40){
      suggestions.push({icon:'ğŸ¯', text: isKo ? 'ì „ë°˜ì  ê°€ë…ì„±ì´ ë‚®ìŠµë‹ˆë‹¤. ëŠ¥ë™íƒœì™€ ê°„ê²°í•œ í‘œí˜„ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”.' : 'Overall readability is low. Use active voice and concise expressions.'});
    }
    if(r.complexWords / r.totalWords > 0.2){
      suggestions.push({icon:'ğŸ’¡', text: isKo ? 'ì „ë¬¸ ìš©ì–´ê°€ ë§ìŠµë‹ˆë‹¤. ë…ì ìˆ˜ì¤€ì— ë§ê²Œ í’€ì–´ ì„¤ëª…í•˜ì„¸ìš”.' : 'Many polysyllabic words detected. Consider adding explanations for jargon.'});
    }
    if(suggestions.length === 0){
      suggestions.push({icon:'âœ…', text: isKo ? 'ê°€ë…ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤! ì˜ ì“°ì…¨ì–´ìš”.' : 'Great readability! Your text is well-written.'});
    }

    $('#suggestionsDiv').innerHTML = '<h3>ğŸ’¡ ê°œì„  ì œì•ˆ</h3>' +
      suggestions.map(s => `<div class="suggestion"><span class="icon">${s.icon}</span><span>${s.text}</span></div>`).join('');
  }

  function escapeHtml(s){
    return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  $('#analyzeBtn').addEventListener('click', () => {
    const text = inputText.value.trim();
    if(!text){ alert('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.'); return; }
    const result = analyze(text);
    if(result) renderResults(result);
  });
})();
</script>
</body>
</html>
