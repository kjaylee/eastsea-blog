<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ì£¼íŒ”ì + í† ì •ë¹„ê²° ìš´ì„¸ | Eastsea Tools</title>
    <meta name="description" content="ë¬´ë£Œ ì‚¬ì£¼íŒ”ì ë° í† ì •ë¹„ê²° ìš´ì„¸ ì„œë¹„ìŠ¤. ìƒë…„ì›”ì¼ì‹œ ì…ë ¥ìœ¼ë¡œ ì •í™•í•œ ì‚¬ì£¼ ëª…ì‹ê³¼ ì˜¬í•´ ìš´ì„¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.">
    <meta name="keywords" content="ì‚¬ì£¼, ì‚¬ì£¼íŒ”ì, í† ì •ë¹„ê²°, ìš´ì„¸, ë§Œì„¸ë ¥, ë¬´ë£Œìš´ì„¸, ì‚¬ì£¼ë³´ê¸°">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #8B0000;
            --color-secondary: #FFD700;
            --color-dark: #1a0000;
            --color-light: #FFF8DC;
            --color-border: #8B0000;
            --shadow: 0 4px 20px rgba(139, 0, 0, 0.2);
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a0000 0%, #330000 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--color-light);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--color-secondary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--color-light);
            opacity: 0.9;
        }

        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 220, 0.95));
            border: 3px solid var(--color-border);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            color: var(--color-dark);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-primary);
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-secondary);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
        }

        .radio-label input {
            width: auto;
            margin-right: 8px;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--color-primary), #660000);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: var(--shadow);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(139, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result-section {
            display: none;
        }

        .result-section.show {
            display: block;
        }

        .saju-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: var(--shadow);
        }

        .saju-table th, .saju-table td {
            border: 2px solid var(--color-border);
            padding: 15px;
            text-align: center;
            font-size: 1.1rem;
        }

        .saju-table th {
            background: linear-gradient(135deg, var(--color-primary), #660000);
            color: white;
            font-weight: 700;
        }

        .saju-table td {
            background: white;
            font-weight: 600;
            font-size: 1.3rem;
        }

        .element-chart {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .element-item {
            text-align: center;
            padding: 15px;
            background: white;
            border: 2px solid var(--color-border);
            border-radius: 10px;
            min-width: 80px;
        }

        .element-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .element-name {
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 5px;
        }

        .element-count {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-secondary);
        }

        .fortune-text {
            line-height: 1.8;
            padding: 20px;
            background: white;
            border-left: 4px solid var(--color-secondary);
            border-radius: 5px;
            margin: 20px 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .tab.active {
            background: var(--color-primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            border: 2px solid var(--color-secondary);
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: rgba(255, 215, 0, 0.3);
        }

        .warning {
            background: #fff3cd;
            border: 2px solid #856404;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #856404;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .card {
                padding: 20px;
            }

            .saju-table th, .saju-table td {
                padding: 10px;
                font-size: 0.9rem;
            }

            .element-chart {
                gap: 10px;
            }

            .element-item {
                min-width: 60px;
                padding: 10px;
            }

            .tabs {
                gap: 5px;
            }

            .tab {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../" class="back-btn">â† ë„êµ¬ ëª©ë¡ìœ¼ë¡œ</a>

        <div class="header">
            <h1>ğŸ”® ì‚¬ì£¼íŒ”ì + í† ì •ë¹„ê²°</h1>
            <p class="subtitle">ìƒë…„ì›”ì¼ì‹œ ì…ë ¥ìœ¼ë¡œ ì‚¬ì£¼ ëª…ì‹ê³¼ ìš´ì„¸ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
        </div>

        <div class="card" id="input-section">
            <form id="saju-form">
                <div class="form-group">
                    <label>ìƒë…„ì›”ì¼</label>
                    <input type="date" id="birth-date" required max="2026-12-31" min="1900-01-01">
                </div>

                <div class="form-group">
                    <label>ìŒë ¥/ì–‘ë ¥</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="calendar" value="solar" checked>
                            ì–‘ë ¥
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="calendar" value="lunar">
                            ìŒë ¥
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>íƒœì–´ë‚œ ì‹œê°„ (ì‹œì£¼ ê³„ì‚°ìš©)</label>
                    <select id="birth-hour" required>
                        <option value="">ì‹œê°„ ì„ íƒ</option>
                        <option value="0">ìì‹œ (å­æ™‚) 23:30~01:29</option>
                        <option value="1">ì¶•ì‹œ (ä¸‘æ™‚) 01:30~03:29</option>
                        <option value="2">ì¸ì‹œ (å¯…æ™‚) 03:30~05:29</option>
                        <option value="3">ë¬˜ì‹œ (å¯æ™‚) 05:30~07:29</option>
                        <option value="4">ì§„ì‹œ (è¾°æ™‚) 07:30~09:29</option>
                        <option value="5">ì‚¬ì‹œ (å·³æ™‚) 09:30~11:29</option>
                        <option value="6">ì˜¤ì‹œ (åˆæ™‚) 11:30~13:29</option>
                        <option value="7">ë¯¸ì‹œ (æœªæ™‚) 13:30~15:29</option>
                        <option value="8">ì‹ ì‹œ (ç”³æ™‚) 15:30~17:29</option>
                        <option value="9">ìœ ì‹œ (é…‰æ™‚) 17:30~19:29</option>
                        <option value="10">ìˆ ì‹œ (æˆŒæ™‚) 19:30~21:29</option>
                        <option value="11">í•´ì‹œ (äº¥æ™‚) 21:30~23:29</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ì„±ë³„</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="M" checked>
                            ë‚¨ì„±
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="F">
                            ì—¬ì„±
                        </label>
                    </div>
                </div>

                <button type="submit" class="btn">ì‚¬ì£¼ ë³´ê¸° ğŸ”®</button>
            </form>

            <div class="warning">
                âš ï¸ ì°¸ê³ ìš© ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì‹¤ì œ ì˜ì‚¬ê²°ì •ì— ì „ì ìœ¼ë¡œ ì˜ì¡´í•˜ì§€ ë§ˆì„¸ìš”. ìŒë ¥ ë³€í™˜ ë° ì ˆê¸° ë³´ì •ì€ ê·¼ì‚¬ì¹˜ì…ë‹ˆë‹¤.
            </div>
        </div>

        <div class="result-section" id="result-section">
            <div class="card">
                <h2 style="text-align: center; color: var(--color-primary); margin-bottom: 30px;">ğŸ“œ ì‚¬ì£¼ ëª…ì‹</h2>
                
                <table class="saju-table">
                    <thead>
                        <tr>
                            <th>ë…„ì£¼ (å¹´æŸ±)</th>
                            <th>ì›”ì£¼ (æœˆæŸ±)</th>
                            <th>ì¼ì£¼ (æ—¥æŸ±)</th>
                            <th>ì‹œì£¼ (æ™‚æŸ±)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="year-gan-ji">ç”²å­</td>
                            <td id="month-gan-ji">ä¸™å¯…</td>
                            <td id="day-gan-ji">æˆŠè¾°</td>
                            <td id="hour-gan-ji">åºšåˆ</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="text-align: center; color: var(--color-primary); margin: 30px 0 20px;">ğŸŒŸ ì˜¤í–‰ ë¶„í¬</h3>
                <div class="element-chart">
                    <div class="element-item">
                        <div class="element-icon">ğŸŒ³</div>
                        <div class="element-name">æœ¨ (ëª©)</div>
                        <div class="element-count" id="wood-count">0</div>
                    </div>
                    <div class="element-item">
                        <div class="element-icon">ğŸ”¥</div>
                        <div class="element-name">ç« (í™”)</div>
                        <div class="element-count" id="fire-count">0</div>
                    </div>
                    <div class="element-item">
                        <div class="element-icon">ğŸ”ï¸</div>
                        <div class="element-name">åœŸ (í† )</div>
                        <div class="element-count" id="earth-count">0</div>
                    </div>
                    <div class="element-item">
                        <div class="element-icon">âš”ï¸</div>
                        <div class="element-name">é‡‘ (ê¸ˆ)</div>
                        <div class="element-count" id="metal-count">0</div>
                    </div>
                    <div class="element-item">
                        <div class="element-icon">ğŸ’§</div>
                        <div class="element-name">æ°´ (ìˆ˜)</div>
                        <div class="element-count" id="water-count">0</div>
                    </div>
                </div>

                <h3 style="color: var(--color-primary); margin: 30px 0 15px;">ğŸ“– ì¼ì£¼ë¡  (ì„±ê²© íŠ¹ì„±)</h3>
                <div class="fortune-text" id="day-analysis"></div>

                <h3 style="color: var(--color-primary); margin: 30px 0 15px;">ğŸ”® í† ì •ë¹„ê²° (2026ë…„ ìš´ì„¸)</h3>
                
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('overview')">ì´ë¡ </div>
                    <div class="tab" onclick="switchTab('monthly')">ì›”ë³„ ìš´ì„¸</div>
                </div>

                <div class="tab-content active" id="overview-content">
                    <div class="fortune-text" id="fortune-overview"></div>
                </div>

                <div class="tab-content" id="monthly-content">
                    <div id="monthly-fortune"></div>
                </div>

                <button class="btn" onclick="resetForm()" style="margin-top: 30px;">ë‹¤ì‹œ ë³´ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ===== ì²œê°„ì§€ì§€ ë°ì´í„° =====
        const HEAVENLY_STEMS = ['ê°‘(ç”²)', 'ì„(ä¹™)', 'ë³‘(ä¸™)', 'ì •(ä¸)', 'ë¬´(æˆŠ)', 'ê¸°(å·±)', 'ê²½(åºš)', 'ì‹ (è¾›)', 'ì„(å£¬)', 'ê³„(ç™¸)'];
        const EARTHLY_BRANCHES = ['ì(å­)', 'ì¶•(ä¸‘)', 'ì¸(å¯…)', 'ë¬˜(å¯)', 'ì§„(è¾°)', 'ì‚¬(å·³)', 'ì˜¤(åˆ)', 'ë¯¸(æœª)', 'ì‹ (ç”³)', 'ìœ (é…‰)', 'ìˆ (æˆŒ)', 'í•´(äº¥)'];
        
        const HOUR_BRANCHES = ['ì(å­)', 'ì¶•(ä¸‘)', 'ì¸(å¯…)', 'ë¬˜(å¯)', 'ì§„(è¾°)', 'ì‚¬(å·³)', 'ì˜¤(åˆ)', 'ë¯¸(æœª)', 'ì‹ (ç”³)', 'ìœ (é…‰)', 'ìˆ (æˆŒ)', 'í•´(äº¥)'];

        // ì˜¤í–‰ ë§¤í•‘
        const ELEMENT_MAP = {
            'ê°‘(ç”²)': 'æœ¨', 'ì„(ä¹™)': 'æœ¨',
            'ë³‘(ä¸™)': 'ç«', 'ì •(ä¸)': 'ç«',
            'ë¬´(æˆŠ)': 'åœŸ', 'ê¸°(å·±)': 'åœŸ',
            'ê²½(åºš)': 'é‡‘', 'ì‹ (è¾›)': 'é‡‘',
            'ì„(å£¬)': 'æ°´', 'ê³„(ç™¸)': 'æ°´',
            'ì¸(å¯…)': 'æœ¨', 'ë¬˜(å¯)': 'æœ¨',
            'ì‚¬(å·³)': 'ç«', 'ì˜¤(åˆ)': 'ç«',
            'ì§„(è¾°)': 'åœŸ', 'ìˆ (æˆŒ)': 'åœŸ', 'ì¶•(ä¸‘)': 'åœŸ', 'ë¯¸(æœª)': 'åœŸ',
            'ì‹ (ç”³)': 'é‡‘', 'ìœ (é…‰)': 'é‡‘',
            'ì(å­)': 'æ°´', 'í•´(äº¥)': 'æ°´'
        };

        // ì¼ì£¼ë¡  ê°„ë‹¨ í•´ì„ (60ê°‘ì ì¤‘ ì¼ë¶€)
        const DAY_PILLAR_ANALYSIS = {
            'ê°‘ì': 'ì§€í˜œë¡­ê³  ì°½ì˜ì ì´ë‚˜ ë•Œë¡œ ê³ ì§‘ì´ ì…‰ë‹ˆë‹¤. ë¬¼ì˜ ìœ ì—°í•¨ê³¼ ë‚˜ë¬´ì˜ ì„±ì¥ì„±ì„ í•¨ê»˜ ê°€ì§„ íƒ€ì…ì…ë‹ˆë‹¤.',
            'ì„ì¶•': 'ì„±ì‹¤í•˜ê³  ê·¼ë©´í•˜ë©° ë•…ì— ë¿Œë¦¬ë‚´ë¦° ë“¯ ì•ˆì •ì ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ìœ¼ë¡œ ì„±ê³µí•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.',
            'ë³‘ì¸': 'ì—´ì •ì ì´ê³  í™œë™ì ì´ë‚˜ ë‹¤ì†Œ ì¡°ê¸‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ê°•í•˜ê³  ìƒˆë¡œìš´ ì¼ì„ ì‹œì‘í•˜ê¸¸ ì¢‹ì•„í•©ë‹ˆë‹¤.',
            'ì •ë¬˜': 'ì„¬ì„¸í•˜ê³  ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì˜¨í™”í•œ ì„±í’ˆìœ¼ë¡œ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ì‹ ë¢°ë¥¼ ì–»ìŠµë‹ˆë‹¤.',
            'ë¬´ì§„': 'í¬ìš©ë ¥ì´ í¬ê³  ì±…ì„ê°ì´ ê°•í•©ë‹ˆë‹¤. ì¤‘ì¬ ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©° ì‹ ì¤‘í•œ íŒë‹¨ì„ ë‚´ë¦½ë‹ˆë‹¤.',
            'ê¸°ì‚¬': 'ì§€í˜œë¡­ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚˜ë‚˜ ë•Œë¡œ ìš°ìœ ë¶€ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³€í™”ë¥¼ í†µí•´ ì„±ì¥í•©ë‹ˆë‹¤.',
            'ê²½ì˜¤': 'ê°•ì¸í•˜ê³  ê²°ë‹¨ë ¥ì´ ìˆìœ¼ë‚˜ ë‹¤ì†Œ ì§ì„¤ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ì˜ê°ì´ ê°•í•˜ê³  í–‰ë™ë ¥ì´ ë¹ ë¦…ë‹ˆë‹¤.',
            'ì‹ ë¯¸': 'ì„¬ì„¸í•˜ê³  ì˜ˆë¯¼í•˜ë©° ë¯¸ì  ê°ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì´í•´í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.',
            'ì„ì‹ ': 'í™œë™ì ì´ê³  ìˆœë°œë ¥ì´ ë›°ì–´ë‚˜ë‚˜ ë³€ë•ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ë¶„ì•¼ì— ì¬ëŠ¥ì„ ë³´ì…ë‹ˆë‹¤.',
            'ê³„ìœ ': 'ì°¨ë¶„í•˜ê³  ì‹ ì¤‘í•˜ë©° ë¶„ì„ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë‚´ë©´ì˜ í˜ì´ ê°•í•œ íƒ€ì…ì…ë‹ˆë‹¤.',
            'ê°‘ìˆ ': 'ì±…ì„ê°ì´ ê°•í•˜ê³  í¬ìš©ë ¥ì´ ìˆìœ¼ë‚˜ ê³ ì§‘ì´ ì…€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¥ê¸°ì  ê³„íšì„ ì˜ ì„¸ì›ë‹ˆë‹¤.',
            'ì„í•´': 'ì§€í˜œë¡­ê³  ì˜¨í™”í•˜ë©° ì ì‘ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¬¼ íë¥´ë“¯ ìì—°ìŠ¤ëŸ¬ìš´ ì‚¶ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.',
            'default': 'ë‹¹ì‹ ë§Œì˜ ë…íŠ¹í•œ ê¸°ì§ˆê³¼ ì¥ì ì„ ê°€ì§„ íŠ¹ë³„í•œ ì‚¬ëŒì…ë‹ˆë‹¤. ìì‹ ë§Œì˜ ê¸¸ì„ ê°œì²™í•´ ë‚˜ê°€ì„¸ìš”.'
        };

        // í† ì •ë¹„ê²° 144ê´˜ ì¤‘ ìƒ˜í”Œ 12ê°œ (ì›”ë³„)
        const TOJEONG_FORTUNES = [
            { // 1ì›”
                overview: 'ìƒˆí•´ì˜ ì‹œì‘ì€ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ì§„í–‰í•˜ì‹œë˜, ë´„ê¸°ìš´ê³¼ í•¨ê»˜ ì¢‹ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤.',
                monthly: 'ìƒˆë¡œìš´ ê³„íšì„ ì„¸ìš°ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì†Œì¤‘íˆ í•˜ì„¸ìš”.'
            },
            { // 2ì›”
                overview: 'ì…ì¶˜ì´ ì§€ë‚˜ë©° ë§Œë¬¼ì´ ì†Œìƒí•˜ë“¯, ë‹¹ì‹ ì—ê²Œë„ ìƒˆë¡œìš´ ì‹œì‘ì˜ ê¸°ìš´ì´ ì˜µë‹ˆë‹¤.',
                monthly: 'ì¡°ê¸‰íˆ ì„œë‘ë¥´ì§€ ë§ê³  ì°¨ê·¼ì°¨ê·¼ ì¤€ë¹„í•˜ì„¸ìš”. ê±´ê°• ê´€ë¦¬ì— ìœ ì˜í•˜ì‹œê³ , ì¬ë¬¼ìš´ì€ ì¤‘ë°˜ ì´í›„ ì¢‹ì•„ì§‘ë‹ˆë‹¤.'
            },
            { // 3ì›”
                overview: 'ë´„ê¸°ìš´ì´ ì™„ì—°í•˜ë‹ˆ í™œë™ì ìœ¼ë¡œ ì›€ì§ì´ë˜, ì‘ì€ ì¼ì— ì‹ ê²½ ì“°ì§€ ë§ˆì„¸ìš”.',
                monthly: 'ì™¸ì¶œì´ë‚˜ ì—¬í–‰ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆëŠ” ì‹œê¸°ì´ë‹ˆ ì—´ë¦° ë§ˆìŒì„ ê°€ì§€ì„¸ìš”.'
            },
            { // 4ì›”
                overview: 'í™”ë ¤í•œ ë´„ê½ƒì²˜ëŸ¼ ì¢‹ì€ ì¼ì´ ë§ìœ¼ë‚˜, ì§€ì¶œì´ ëŠ˜ ìˆ˜ ìˆìœ¼ë‹ˆ ì ˆì œê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                monthly: 'ì‚¬ì—…ì´ë‚˜ í•™ì—…ì—ì„œ ì¢‹ì€ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ê±´ê°• ê´€ë¦¬ì— ì†Œí™€í•˜ì§€ ë§ˆì„¸ìš”.'
            },
            { // 5ì›”
                overview: 'ì…í•˜ë¥¼ ì§€ë‚˜ ì—¬ë¦„ì´ ì‹œì‘ë˜ë‹ˆ, í™œë™ì ìœ¼ë¡œ ì›€ì§ì´ë˜ ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.',
                monthly: 'ëŒ€ì¸ê´€ê³„ì—ì„œ ì‘ì€ ë§ˆì°°ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ë§ì¡°ì‹¬í•˜ì„¸ìš”. ì¬ë¬¼ìš´ì€ ì–‘í˜¸í•©ë‹ˆë‹¤.'
            },
            { // 6ì›”
                overview: 'ë”ìš´ ë‚ ì”¨ì— ì§€ì¹˜ê¸° ì‰¬ìš°ë‹ˆ íœ´ì‹ê³¼ ì¬ì¶©ì „ì˜ ì‹œê°„ì„ ê°€ì§€ì„¸ìš”.',
                monthly: 'ê¸‰í•œ ì¼ì€ í”¼í•˜ê³  ì²œì²œíˆ ì§„í–‰í•˜ì„¸ìš”. ê°€ì¡±ì´ë‚˜ ê°€ê¹Œìš´ ì‚¬ëŒê³¼ì˜ ì‹œê°„ì„ ì†Œì¤‘íˆ í•˜ì„¸ìš”.'
            },
            { // 7ì›”
                overview: 'ì¤‘ë³µì˜ ë”ìœ„ ì†ì—ì„œë„ ì°¨ë¶„íˆ ë‚´ì‹¤ì„ ë‹¤ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.',
                monthly: 'í° ê²°ì •ì€ ì‹ ì¤‘íˆ í•˜ì‹œê³ , ì‘ì€ ì¼ì—ì„œ ê¸°ì¨ì„ ì°¾ìœ¼ì„¸ìš”. ê±´ê°• ìš´ì€ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.'
            },
            { // 8ì›”
                overview: 'ì…ì¶”ê°€ ì§€ë‚˜ë©° ì„œëŠ˜í•œ ê¸°ìš´ì´ ì˜¤ë‹ˆ, ì¤€ë¹„í–ˆë˜ ì¼ë“¤ì´ ê²°ì‹¤ì„ ë§ºìŠµë‹ˆë‹¤.',
                monthly: 'ë…¸ë ¥ì˜ ê²°ê³¼ë¥¼ ë³´ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ê°ì‚¬í•˜ëŠ” ë§ˆìŒì„ ê°–ê³  ì£¼ë³€ì„ ëŒì•„ë³´ì„¸ìš”.'
            },
            { // 9ì›”
                overview: 'ì¶”ì„ì„ ë§ì•„ ê°€ì¡±ê³¼ì˜ í™”í•©ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¬ë¬¼ìš´ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.',
                monthly: 'í’ìš”ë¡œìš´ ì‹œê¸°ì´ë‚˜ ë‚˜ëˆ”ì„ ì‹¤ì²œí•˜ë©´ ë” í° ë³µì´ ì˜µë‹ˆë‹¤. ê°ì‚¬ì™€ ë² í’‚ì˜ ë‹¬ì…ë‹ˆë‹¤.'
            },
            { // 10ì›”
                overview: 'ê°€ì„ì˜ ìˆ˜í™•ê¸°ì²˜ëŸ¼ ê·¸ë™ì•ˆì˜ ë…¸ë ¥ì´ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.',
                monthly: 'ì¢‹ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜¤ë‹ˆ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”. ë‹¤ë§Œ ìš•ì‹¬ì„ ë‚´ë©´ í™”ë¥¼ ìì´ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
            },
            { // 11ì›”
                overview: 'ì…ë™ì„ ì§€ë‚˜ ê²¨ìš¸ì´ ì‹œì‘ë˜ë‹ˆ, ë‚´ë©´ì„ ëŒì•„ë³´ê³  ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°€ì§€ì„¸ìš”.',
                monthly: 'í° ë³€í™”ë³´ë‹¤ëŠ” í˜„ìƒ ìœ ì§€ê°€ ì¢‹ìŠµë‹ˆë‹¤. ê°€ê¹Œìš´ ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ëˆë…íˆ í•˜ì„¸ìš”.'
            },
            { // 12ì›”
                overview: 'í•œ í•´ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ê°ì‚¬í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ë§ˆìŒì„ ì •ë¦¬í•˜ì„¸ìš”.',
                monthly: 'ìƒˆí•´ ì¤€ë¹„ë¥¼ ì°¨ê·¼ì°¨ê·¼ í•˜ì‹œê³ , ë¬´ë¦¬í•œ íˆ¬ìë‚˜ í° ê²°ì •ì€ í”¼í•˜ì„¸ìš”. ê°€ì¡±ì˜ ê±´ê°•ì„ ì±™ê¸°ì„¸ìš”.'
            }
        ];

        // ===== ë©”ì¸ ë¡œì§ =====
        document.getElementById('saju-form').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateSaju();
        });

        function calculateSaju() {
            const birthDate = document.getElementById('birth-date').value;
            const birthHour = parseInt(document.getElementById('birth-hour').value);
            const calendar = document.querySelector('input[name="calendar"]:checked').value;
            const gender = document.querySelector('input[name="gender"]:checked').value;

            if (!birthDate || birthHour === '') {
                alert('ìƒë…„ì›”ì¼ê³¼ ì‹œê°„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const date = new Date(birthDate);
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();

            // ê°„ë‹¨í•œ ê°‘ì ê³„ì‚° (ì‹¤ì œë¡œëŠ” ì ˆê¸° ë³´ì • í•„ìš”)
            const yearGanJi = getYearGanJi(year);
            const monthGanJi = getMonthGanJi(year, month);
            const dayGanJi = getDayGanJi(year, month, day);
            const hourGanJi = getHourGanJi(dayGanJi, birthHour);

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('year-gan-ji').textContent = yearGanJi;
            document.getElementById('month-gan-ji').textContent = monthGanJi;
            document.getElementById('day-gan-ji').textContent = dayGanJi;
            document.getElementById('hour-gan-ji').textContent = hourGanJi;

            // ì˜¤í–‰ ë¶„ì„
            analyzeElements([yearGanJi, monthGanJi, dayGanJi, hourGanJi]);

            // ì¼ì£¼ë¡  í•´ì„
            const dayKey = dayGanJi.substring(0, 2);
            const analysis = DAY_PILLAR_ANALYSIS[dayKey] || DAY_PILLAR_ANALYSIS['default'];
            document.getElementById('day-analysis').textContent = analysis;

            // í† ì •ë¹„ê²° (ê°„ë‹¨í•œ í•´ì‹œ ê¸°ë°˜)
            const fortuneIndex = (year + month + day) % 12;
            const fortune = TOJEONG_FORTUNES[fortuneIndex];
            document.getElementById('fortune-overview').textContent = fortune.overview;

            // ì›”ë³„ ìš´ì„¸
            let monthlyHTML = '';
            TOJEONG_FORTUNES.forEach((f, i) => {
                monthlyHTML += `
                    <div class="fortune-text">
                        <strong style="color: var(--color-primary);">${i + 1}ì›”:</strong> ${f.monthly}
                    </div>
                `;
            });
            document.getElementById('monthly-fortune').innerHTML = monthlyHTML;

            // ê²°ê³¼ í™”ë©´ í‘œì‹œ
            document.getElementById('input-section').style.display = 'none';
            document.getElementById('result-section').classList.add('show');
            window.scrollTo(0, 0);
        }

        function getYearGanJi(year) {
            // 1984ë…„ì´ ê°‘ìë…„ (60ê°‘ì ì‹œì‘)
            const baseYear = 1984;
            const offset = (year - baseYear) % 60;
            const ganIndex = offset % 10;
            const jiIndex = offset % 12;
            return HEAVENLY_STEMS[ganIndex] + EARTHLY_BRANCHES[jiIndex];
        }

        function getMonthGanJi(year, month) {
            // ê°„ë‹¨í•œ ì›”ì£¼ ê³„ì‚° (ì‹¤ì œë¡œëŠ” ì ˆê¸° ê¸°ì¤€)
            const ganIndex = ((year - 1984) * 12 + month - 1) % 10;
            const jiIndex = (month + 1) % 12;
            return HEAVENLY_STEMS[ganIndex] + EARTHLY_BRANCHES[jiIndex];
        }

        function getDayGanJi(year, month, day) {
            // 1900ë…„ 1ì›” 1ì¼ ê¸°ì¤€ ì¼ì§„ ê³„ì‚° (ê·¼ì‚¬ì¹˜)
            const baseDate = new Date(1900, 0, 1);
            const targetDate = new Date(year, month - 1, day);
            const diffDays = Math.floor((targetDate - baseDate) / (1000 * 60 * 60 * 24));
            const ganIndex = (diffDays + 6) % 10;
            const jiIndex = (diffDays + 6) % 12;
            return HEAVENLY_STEMS[ganIndex] + EARTHLY_BRANCHES[jiIndex];
        }

        function getHourGanJi(dayGanJi, hourIndex) {
            // ì¼ê°„ ê¸°ì¤€ ì‹œê°„ ì²œê°„ ê³„ì‚°
            const dayGan = dayGanJi.substring(0, 3);
            const dayGanIndex = HEAVENLY_STEMS.indexOf(dayGan);
            
            // ì‹œê°„ ì²œê°„ ê³µì‹
            let hourGanIndex;
            if (dayGanIndex === 0 || dayGanIndex === 5) { // ê°‘, ê¸°ì¼
                hourGanIndex = hourIndex % 10;
            } else if (dayGanIndex === 1 || dayGanIndex === 6) { // ì„, ê²½ì¼
                hourGanIndex = (hourIndex + 2) % 10;
            } else if (dayGanIndex === 2 || dayGanIndex === 7) { // ë³‘, ì‹ ì¼
                hourGanIndex = (hourIndex + 4) % 10;
            } else if (dayGanIndex === 3 || dayGanIndex === 8) { // ì •, ì„ì¼
                hourGanIndex = (hourIndex + 6) % 10;
            } else { // ë¬´, ê³„ì¼
                hourGanIndex = (hourIndex + 8) % 10;
            }

            return HEAVENLY_STEMS[hourGanIndex] + HOUR_BRANCHES[hourIndex];
        }

        function analyzeElements(ganji) {
            const elements = { 'æœ¨': 0, 'ç«': 0, 'åœŸ': 0, 'é‡‘': 0, 'æ°´': 0 };
            
            ganji.forEach(gj => {
                for (let key in ELEMENT_MAP) {
                    if (gj.includes(key)) {
                        elements[ELEMENT_MAP[key]]++;
                    }
                }
            });

            document.getElementById('wood-count').textContent = elements['æœ¨'];
            document.getElementById('fire-count').textContent = elements['ç«'];
            document.getElementById('earth-count').textContent = elements['åœŸ'];
            document.getElementById('metal-count').textContent = elements['é‡‘'];
            document.getElementById('water-count').textContent = elements['æ°´'];
        }

        function switchTab(tab) {
            // íƒ­ ë²„íŠ¼ active ì „í™˜
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // ì»¨í…ì¸  ì „í™˜
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tab + '-content').classList.add('active');
        }

        function resetForm() {
            document.getElementById('input-section').style.display = 'block';
            document.getElementById('result-section').classList.remove('show');
            window.scrollTo(0, 0);
        }

        // ë‚ ì§œ ì…ë ¥ ê¸°ë³¸ê°’ ì„¤ì • (ì˜¤ëŠ˜ ë‚ ì§œ)
        const today = new Date();
        const defaultDate = today.toISOString().split('T')[0];
        document.getElementById('birth-date').value = defaultDate;
    </script>
</body>
</html>
