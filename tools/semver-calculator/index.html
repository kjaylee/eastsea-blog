<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SemVer ê³„ì‚°ê¸° | ì›¹ ë„êµ¬ ëª¨ìŒ</title>
    <style>
        :root {
            --bg-primary: #ffffff; --bg-secondary: #f8f9fa;
            --text-primary: #212529; --text-secondary: #6c757d;
            --accent: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --border: #dee2e6; --shadow: rgba(0,0,0,0.1); --card-bg: #ffffff;
        }
        [data-theme="dark"] {
            --bg-primary: #1a1a1a; --bg-secondary: #121212;
            --text-primary: #f8f9fa; --text-secondary: #adb5bd;
            --border: #444; --shadow: rgba(0,0,0,0.3); --card-bg: #2d2d2d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: var(--bg-secondary); color: var(--text-primary);
            line-height: 1.6; padding: 20px; min-height: 100vh;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; }
        .back-btn { text-decoration: none; color: var(--text-secondary); display: flex; align-items: center; gap: 5px; font-weight: 500; }
        .back-btn:hover { color: var(--text-primary); }
        .theme-toggle { background: none; border: none; cursor: pointer; font-size: 1.5rem; }
        .card {
            background: var(--card-bg); border-radius: 20px; padding: 30px;
            box-shadow: 0 10px 30px var(--shadow); border: 1px solid var(--border); margin-bottom: 20px;
        }
        h1 { font-size: 1.8rem; margin-bottom: 10px; background: var(--accent); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
        h2 { font-size: 1.2rem; margin-bottom: 16px; }
        .desc { color: var(--text-secondary); margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 6px; font-size: 0.9rem; }
        input, select {
            width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 12px;
            background: var(--bg-primary); color: var(--text-primary); font-size: 1rem;
            outline: none; font-family: inherit; margin-bottom: 16px;
        }
        input:focus, select:focus { border-color: #667eea; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .bump-btns { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
        .bump-btn {
            padding: 10px 18px; border: 2px solid var(--border); border-radius: 10px;
            background: var(--bg-primary); cursor: pointer; font-size: 0.9rem;
            color: var(--text-primary); transition: all 0.2s; font-weight: 500;
        }
        .bump-btn:hover { border-color: #667eea; background: rgba(102,126,234,0.1); }
        .version-display {
            font-family: 'Courier New', monospace; font-size: 2rem; font-weight: 700;
            text-align: center; padding: 20px; background: var(--bg-secondary);
            border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border);
        }
        .match-result {
            padding: 16px; border-radius: 12px; font-size: 1.1rem; text-align: center;
            font-weight: 600; margin-top: 16px;
        }
        .match-yes { background: rgba(40,167,69,0.15); color: #28a745; border: 1px solid rgba(40,167,69,0.3); }
        .match-no { background: rgba(220,53,69,0.15); color: #dc3545; border: 1px solid rgba(220,53,69,0.3); }
        .range-examples {
            display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 16px;
        }
        .range-ex {
            padding: 8px 12px; background: var(--bg-secondary); border: 1px solid var(--border);
            border-radius: 8px; cursor: pointer; font-family: 'Courier New', monospace;
            font-size: 0.85rem; transition: all 0.15s;
        }
        .range-ex:hover { border-color: #667eea; }
        .compare-result { text-align: center; padding: 16px; font-size: 1.2rem; font-weight: 600; }
        @media (max-width: 600px) { .row { grid-template-columns: 1fr; } .range-examples { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ</a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
        </header>

        <div class="card">
            <h1>ğŸ“¦ SemVer ê³„ì‚°ê¸°</h1>
            <p class="desc">Semantic Versioning (Major.Minor.Patch) ë²„ì „ì„ ë²”í”„í•˜ê³ , ë²”ìœ„ ë§¤ì¹­ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>

            <h2>ë²„ì „ ë²”í”„</h2>
            <label for="currentVer">í˜„ì¬ ë²„ì „</label>
            <input type="text" id="currentVer" value="1.2.3" placeholder="ì˜ˆ: 1.2.3" oninput="updateBump()">

            <div class="bump-btns">
                <button class="bump-btn" onclick="bump('major')">ğŸ”´ Major</button>
                <button class="bump-btn" onclick="bump('minor')">ğŸŸ¡ Minor</button>
                <button class="bump-btn" onclick="bump('patch')">ğŸŸ¢ Patch</button>
                <button class="bump-btn" onclick="bump('pre-alpha')">ğŸ”µ Pre-alpha</button>
                <button class="bump-btn" onclick="bump('pre-beta')">ğŸŸ£ Pre-beta</button>
                <button class="bump-btn" onclick="bump('pre-rc')">âšª Pre-RC</button>
            </div>

            <div class="version-display" id="bumpResult">2.0.0</div>
        </div>

        <div class="card">
            <h2>ë²”ìœ„ ë§¤ì¹­ í…ŒìŠ¤íŠ¸</h2>
            <div class="row">
                <div>
                    <label for="rangeInput">ë²”ìœ„ (Range)</label>
                    <input type="text" id="rangeInput" value="^1.2.0" placeholder="ì˜ˆ: ^1.2.0, ~1.2.0, >=1.0.0" oninput="testRange()">
                </div>
                <div>
                    <label for="versionInput">ë²„ì „ (Version)</label>
                    <input type="text" id="versionInput" value="1.5.0" placeholder="ì˜ˆ: 1.5.0" oninput="testRange()">
                </div>
            </div>
            <div id="rangeResult" class="match-result match-yes">âœ… 1.5.0 ì€ ^1.2.0 ë²”ìœ„ì— í¬í•¨ë©ë‹ˆë‹¤</div>

            <div class="range-examples">
                <div class="range-ex" onclick="setRange('^1.2.3')">^1.2.3 (â‰¥1.2.3 &lt;2.0.0)</div>
                <div class="range-ex" onclick="setRange('~1.2.3')">~1.2.3 (â‰¥1.2.3 &lt;1.3.0)</div>
                <div class="range-ex" onclick="setRange('>=1.0.0 <2.0.0')">â‰¥1.0.0 &lt;2.0.0</div>
                <div class="range-ex" onclick="setRange('1.2.x')">1.2.x (â‰¥1.2.0 &lt;1.3.0)</div>
                <div class="range-ex" onclick="setRange('1.x')">1.x (â‰¥1.0.0 &lt;2.0.0)</div>
                <div class="range-ex" onclick="setRange('*')">* (ëª¨ë“  ë²„ì „)</div>
            </div>
        </div>

        <div class="card">
            <h2>ë²„ì „ ë¹„êµ</h2>
            <div class="row">
                <div>
                    <label for="verA">ë²„ì „ A</label>
                    <input type="text" id="verA" value="1.10.0" oninput="compare()">
                </div>
                <div>
                    <label for="verB">ë²„ì „ B</label>
                    <input type="text" id="verB" value="1.9.0" oninput="compare()">
                </div>
            </div>
            <div class="compare-result" id="compareResult">1.10.0 &gt; 1.9.0</div>
        </div>
    </div>

    <script>
        function parseSemVer(str) {
            str = str.trim();
            const m = str.match(/^v?(\d+)\.(\d+)\.(\d+)(?:-([a-zA-Z0-9.]+))?/);
            if (!m) return null;
            return { major: +m[1], minor: +m[2], patch: +m[3], pre: m[4] || '' };
        }

        function verToString(v) {
            let s = `${v.major}.${v.minor}.${v.patch}`;
            if (v.pre) s += `-${v.pre}`;
            return s;
        }

        function compareSemVer(a, b) {
            if (a.major !== b.major) return a.major - b.major;
            if (a.minor !== b.minor) return a.minor - b.minor;
            if (a.patch !== b.patch) return a.patch - b.patch;
            if (!a.pre && !b.pre) return 0;
            if (!a.pre) return 1;
            if (!b.pre) return -1;
            return a.pre < b.pre ? -1 : a.pre > b.pre ? 1 : 0;
        }

        function bump(type) {
            const v = parseSemVer(document.getElementById('currentVer').value);
            if (!v) { document.getElementById('bumpResult').textContent = 'ìœ íš¨í•˜ì§€ ì•Šì€ ë²„ì „'; return; }
            let result;
            switch(type) {
                case 'major': result = { major: v.major+1, minor: 0, patch: 0, pre: '' }; break;
                case 'minor': result = { major: v.major, minor: v.minor+1, patch: 0, pre: '' }; break;
                case 'patch': result = { major: v.major, minor: v.minor, patch: v.patch+1, pre: '' }; break;
                case 'pre-alpha': result = { ...v, pre: 'alpha.1' }; break;
                case 'pre-beta': result = { ...v, pre: 'beta.1' }; break;
                case 'pre-rc': result = { ...v, pre: 'rc.1' }; break;
            }
            document.getElementById('bumpResult').textContent = verToString(result);
        }

        function updateBump() { bump('major'); }

        function satisfiesRange(version, range) {
            const v = parseSemVer(version);
            if (!v) return false;
            range = range.trim();
            if (range === '*' || range === '') return true;

            // Handle x-ranges: 1.2.x, 1.x, 1.x.x
            if (/^\d+\.x(\.x)?$/i.test(range)) {
                const major = parseInt(range);
                return v.major === major;
            }
            if (/^\d+\.\d+\.x$/i.test(range)) {
                const parts = range.split('.');
                return v.major === +parts[0] && v.minor === +parts[1];
            }

            // Handle ^ (caret)
            if (range.startsWith('^')) {
                const r = parseSemVer(range.slice(1));
                if (!r) return false;
                if (v.major !== r.major) return false;
                if (r.major === 0) {
                    if (v.minor !== r.minor) return false;
                    return v.patch >= r.patch;
                }
                return compareSemVer(v, r) >= 0;
            }

            // Handle ~ (tilde)
            if (range.startsWith('~')) {
                const r = parseSemVer(range.slice(1));
                if (!r) return false;
                return v.major === r.major && v.minor === r.minor && v.patch >= r.patch;
            }

            // Handle compound (space separated): >=1.0.0 <2.0.0
            if (range.includes(' ')) {
                return range.split(/\s+/).every(part => satisfiesRange(version, part));
            }

            // Handle >=, <=, >, <, =
            const opMatch = range.match(/^(>=|<=|>|<|=)?\s*(.+)/);
            if (!opMatch) return false;
            const op = opMatch[1] || '=';
            const r = parseSemVer(opMatch[2]);
            if (!r) return false;
            const cmp = compareSemVer(v, r);
            switch (op) {
                case '>=': return cmp >= 0;
                case '<=': return cmp <= 0;
                case '>': return cmp > 0;
                case '<': return cmp < 0;
                case '=': return cmp === 0;
            }
            return false;
        }

        function testRange() {
            const range = document.getElementById('rangeInput').value;
            const version = document.getElementById('versionInput').value;
            const el = document.getElementById('rangeResult');
            if (!parseSemVer(version)) {
                el.className = 'match-result match-no';
                el.textContent = 'ìœ íš¨í•˜ì§€ ì•Šì€ ë²„ì „ í˜•ì‹';
                return;
            }
            const ok = satisfiesRange(version, range);
            el.className = `match-result ${ok ? 'match-yes' : 'match-no'}`;
            el.textContent = ok
                ? `âœ… ${version} ì€ ${range} ë²”ìœ„ì— í¬í•¨ë©ë‹ˆë‹¤`
                : `âŒ ${version} ì€ ${range} ë²”ìœ„ì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤`;
        }

        function setRange(r) {
            document.getElementById('rangeInput').value = r;
            testRange();
        }

        function compare() {
            const a = parseSemVer(document.getElementById('verA').value);
            const b = parseSemVer(document.getElementById('verB').value);
            const el = document.getElementById('compareResult');
            if (!a || !b) { el.textContent = 'ìœ íš¨í•œ ë²„ì „ì„ ì…ë ¥í•˜ì„¸ìš”'; return; }
            const cmp = compareSemVer(a, b);
            const sa = verToString(a), sb = verToString(b);
            if (cmp > 0) el.innerHTML = `<span style="color:#28a745">${sa}</span> &gt; <span style="color:#dc3545">${sb}</span>`;
            else if (cmp < 0) el.innerHTML = `<span style="color:#dc3545">${sa}</span> &lt; <span style="color:#28a745">${sb}</span>`;
            else el.innerHTML = `<span style="color:#667eea">${sa}</span> = <span style="color:#667eea">${sb}</span>`;
        }

        function toggleTheme() {
            const t = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', t);
            localStorage.setItem('theme', t);
        }
        document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');
        compare();
    </script>
</body>
</html>
