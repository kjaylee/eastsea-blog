<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒ€ì´í¬ê·¸ë˜í”¼ ìŠ¤ì¼€ì¼ ìƒì„±ê¸° | ì›¹ ë„êµ¬ ëª¨ìŒ</title>
    <style>
        :root{--bg-primary:#fff;--bg-secondary:#f8f9fa;--text-primary:#212529;--text-secondary:#6c757d;--accent:linear-gradient(135deg,#667eea 0%,#764ba2 100%);--border:#dee2e6;--shadow:rgba(0,0,0,.1);--card-bg:#fff}
        [data-theme="dark"]{--bg-primary:#1a1a1a;--bg-secondary:#121212;--text-primary:#f8f9fa;--text-secondary:#adb5bd;--border:#444;--shadow:rgba(0,0,0,.3);--card-bg:#2d2d2d}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:var(--bg-secondary);color:var(--text-primary);line-height:1.6;padding:20px;min-height:100vh}
        .container{max-width:900px;margin:0 auto}
        header{display:flex;align-items:center;justify-content:space-between;margin-bottom:30px}
        .back-btn{text-decoration:none;color:var(--text-secondary);display:flex;align-items:center;gap:5px;font-weight:500}.back-btn:hover{color:var(--text-primary)}
        .theme-toggle{background:none;border:none;cursor:pointer;font-size:1.5rem}
        .card{background:var(--card-bg);border-radius:20px;padding:30px;box-shadow:0 10px 30px var(--shadow);border:1px solid var(--border);margin-bottom:20px}
        h1{font-size:1.8rem;margin-bottom:10px;background:var(--accent);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
        .desc{color:var(--text-secondary);margin-bottom:20px}
        label{display:block;font-weight:600;margin-bottom:6px;font-size:.9rem}
        select,input{width:100%;padding:12px;border:2px solid var(--border);border-radius:12px;background:var(--bg-primary);color:var(--text-primary);font-size:1rem;outline:none;font-family:inherit;margin-bottom:16px}
        select:focus,input:focus{border-color:#667eea}
        .row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
        .scale-item{border:1px solid var(--border);border-radius:14px;padding:16px;margin-bottom:12px;transition:border-color .2s}
        .scale-item:hover{border-color:#667eea}
        .scale-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px}
        .scale-label{font-family:'Courier New',monospace;font-size:.8rem;color:var(--text-secondary);background:var(--bg-secondary);padding:2px 8px;border-radius:6px}
        .scale-size{font-family:'Courier New',monospace;font-size:.8rem;color:#667eea;font-weight:600}
        .scale-preview{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .output-box{background:var(--bg-secondary);border:1px solid var(--border);border-radius:12px;padding:16px;font-family:'Courier New',monospace;font-size:.85rem;white-space:pre-wrap;min-height:100px;position:relative;overflow:auto;max-height:400px}
        .copy-btn{position:absolute;top:10px;right:10px;padding:6px 12px;background:var(--card-bg);border:1px solid var(--border);border-radius:8px;cursor:pointer;font-size:.8rem;color:var(--text-primary)}
        .tab-row{display:flex;gap:4px;margin-bottom:12px}
        .tab{padding:8px 16px;border:1px solid var(--border);border-radius:10px;cursor:pointer;font-size:.85rem;background:var(--bg-secondary);color:var(--text-secondary)}
        .tab.active{background:var(--card-bg);color:var(--text-primary);font-weight:600;border-color:#667eea}
        .preset-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}
        .preset-btn{padding:8px 14px;border:1px solid var(--border);border-radius:10px;cursor:pointer;font-size:.8rem;background:var(--bg-primary);color:var(--text-primary);transition:all .2s}
        .preset-btn:hover{border-color:#667eea}
        .ratio-viz{display:flex;align-items:flex-end;gap:4px;height:120px;margin-bottom:20px}
        .ratio-bar{background:var(--accent);border-radius:6px 6px 0 0;min-width:30px;flex:1;transition:height .3s}
        .ratio-bar-label{text-align:center;font-size:.65rem;color:var(--text-secondary);margin-top:4px}
        @media(max-width:600px){.row{grid-template-columns:1fr}}
    </style>
</head>
<body>
<div class="container">
    <header>
        <a href="../" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ</a>
        <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
    </header>
    <div class="card">
        <h1>ğŸ”¤ íƒ€ì´í¬ê·¸ë˜í”¼ ìŠ¤ì¼€ì¼ ìƒì„±ê¸°</h1>
        <p class="desc">Modular Scale ê¸°ë°˜ìœ¼ë¡œ ì¡°í™”ë¡œìš´ íƒ€ì´í¬ê·¸ë˜í”¼ í¬ê¸° ì„¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
        <div class="preset-row">
            <button class="preset-btn" onclick="setPreset(16,1.25)">ğŸ“– Minor Third (1.2)</button>
            <button class="preset-btn" onclick="setPreset(16,1.333)">ğŸ“ Perfect Fourth (1.333)</button>
            <button class="preset-btn" onclick="setPreset(16,1.414)">âœ¨ Augmented Fourth (1.414)</button>
            <button class="preset-btn" onclick="setPreset(16,1.5)">ğŸµ Perfect Fifth (1.5)</button>
            <button class="preset-btn" onclick="setPreset(16,1.618)">ğŸŒ€ Golden Ratio (1.618)</button>
            <button class="preset-btn" onclick="setPreset(18,1.25)">ğŸ“± Mobile (18/1.25)</button>
        </div>
        <div class="row">
            <div>
                <label for="baseSize">ê¸°ë³¸ í¬ê¸° (px)</label>
                <input type="number" id="baseSize" value="16" min="8" max="32" step="1" oninput="generate()">
            </div>
            <div>
                <label for="ratio">ë¹„ìœ¨ (ratio)</label>
                <input type="number" id="ratio" value="1.25" min="1.05" max="2.5" step="0.001" oninput="generate()">
            </div>
            <div>
                <label for="steps">ë‹¨ê³„ ìˆ˜</label>
                <input type="number" id="steps" value="8" min="4" max="14" step="1" oninput="generate()">
            </div>
        </div>
        <div class="row">
            <div>
                <label for="unit">ë‹¨ìœ„</label>
                <select id="unit" onchange="generate()">
                    <option value="rem">rem</option>
                    <option value="px">px</option>
                    <option value="em">em</option>
                </select>
            </div>
            <div>
                <label for="lineHeight">ì¤„ ë†’ì´ (line-height)</label>
                <input type="number" id="lineHeight" value="1.5" min="1" max="2.5" step="0.05" oninput="generate()">
            </div>
            <div>
                <label for="fontFamily">í°íŠ¸</label>
                <select id="fontFamily" onchange="generate()">
                    <option value="system-ui, sans-serif">System UI</option>
                    <option value="Georgia, serif">Georgia (serif)</option>
                    <option value="'Courier New', monospace">Courier New (mono)</option>
                    <option value="Inter, sans-serif">Inter</option>
                </select>
            </div>
        </div>
    </div>

    <div class="card">
        <label>ë¹„ìœ¨ ì‹œê°í™”</label>
        <div class="ratio-viz" id="ratioViz"></div>
    </div>

    <div class="card">
        <label>ë¯¸ë¦¬ë³´ê¸°</label>
        <div id="preview"></div>
    </div>

    <div class="card">
        <div class="tab-row">
            <div class="tab active" onclick="showCode('css',this)">CSS</div>
            <div class="tab" onclick="showCode('tailwind',this)">Tailwind</div>
            <div class="tab" onclick="showCode('scss',this)">SCSS</div>
            <div class="tab" onclick="showCode('json',this)">JSON</div>
        </div>
        <div class="output-box" id="codeOutput"><button class="copy-btn" onclick="copyCode()">ë³µì‚¬</button></div>
    </div>
</div>
<script>
const LABELS = ['xs','sm','base','lg','xl','2xl','3xl','4xl','5xl','6xl','7xl','8xl','9xl','10xl'];
let scale = [];
let currentCodeTab = 'css';

function generate(){
    const base = parseFloat(document.getElementById('baseSize').value)||16;
    const ratio = parseFloat(document.getElementById('ratio').value)||1.25;
    const steps = parseInt(document.getElementById('steps').value)||8;
    const unit = document.getElementById('unit').value;
    const lh = parseFloat(document.getElementById('lineHeight').value)||1.5;
    const font = document.getElementById('fontFamily').value;

    scale = [];
    // 2 steps below base, rest above
    const belowSteps = 2;
    for(let i = -belowSteps; i < steps - belowSteps; i++){
        const px = base * Math.pow(ratio, i);
        const label = LABELS[i + belowSteps] || `step-${i + belowSteps}`;
        let val;
        if(unit==='rem') val = (px/16).toFixed(3).replace(/0+$/,'').replace(/\.$/,'');
        else if(unit==='em') val = (px/base).toFixed(3).replace(/0+$/,'').replace(/\.$/,'');
        else val = Math.round(px);
        // Adjust line-height for larger sizes
        const adjLh = i >= 2 ? Math.max(1.1, lh - i*0.05) : lh;
        scale.push({label, px, val: val + unit, lh: adjLh.toFixed(2), step: i});
    }

    // Render visualization
    const maxPx = Math.max(...scale.map(s=>s.px));
    document.getElementById('ratioViz').innerHTML = scale.map(s=>{
        const h = Math.round(s.px/maxPx*100);
        return `<div style="flex:1;text-align:center"><div class="ratio-bar" style="height:${h}%"></div><div class="ratio-bar-label">${s.label}<br>${s.val}</div></div>`;
    }).join('');

    // Render preview
    document.getElementById('preview').innerHTML = scale.map(s=>
        `<div class="scale-item">
            <div class="scale-header">
                <span class="scale-label">${s.label}</span>
                <span class="scale-size">${s.val} / ${Math.round(s.px)}px / lh: ${s.lh}</span>
            </div>
            <div class="scale-preview" style="font-size:${s.px}px;line-height:${s.lh};font-family:${font}">
                íƒ€ì´í¬ê·¸ë˜í”¼ Typography ê°€ë‚˜ë‹¤ ABC 123
            </div>
        </div>`
    ).join('');

    showCode(currentCodeTab);
}

function showCode(tab, el){
    currentCodeTab = tab;
    if(el){document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));el.classList.add('active')}
    let code = '';
    if(tab==='css'){
        code = ':root {\n';
        scale.forEach(s => code += `  --font-${s.label}: ${s.val};\n`);
        code += '}\n\n';
        scale.forEach(s => code += `.text-${s.label} {\n  font-size: var(--font-${s.label});\n  line-height: ${s.lh};\n}\n`);
    } else if(tab==='tailwind'){
        code = `// tailwind.config.js\nmodule.exports = {\n  theme: {\n    fontSize: {\n`;
        scale.forEach(s => code += `      '${s.label}': ['${s.val}', { lineHeight: '${s.lh}' }],\n`);
        code += '    },\n  },\n};';
    } else if(tab==='scss'){
        code = '// Typography Scale Variables\n';
        scale.forEach(s => code += `$font-${s.label}: ${s.val};\n`);
        code += '\n// Mixins\n';
        scale.forEach(s => code += `@mixin text-${s.label} {\n  font-size: $font-${s.label};\n  line-height: ${s.lh};\n}\n`);
    } else if(tab==='json'){
        const obj = {};
        scale.forEach(s => obj[s.label] = {fontSize:s.val, lineHeight:s.lh, px:Math.round(s.px)});
        code = JSON.stringify(obj, null, 2);
    }
    document.getElementById('codeOutput').innerHTML = esc(code) + '<button class="copy-btn" onclick="copyCode()">ë³µì‚¬</button>';
}

function setPreset(base, ratio){
    document.getElementById('baseSize').value = base;
    document.getElementById('ratio').value = ratio;
    generate();
}

function copyCode(){const el=document.getElementById('codeOutput');const t=el.textContent.replace('ë³µì‚¬','').replace('ë³µì‚¬ë¨!','').trim();navigator.clipboard.writeText(t).then(()=>{const b=el.querySelector('.copy-btn');b.textContent='ë³µì‚¬ë¨!';setTimeout(()=>b.textContent='ë³µì‚¬',1500)})}
function esc(t){return String(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}
function toggleTheme(){const h=document.documentElement;const t=h.getAttribute('data-theme')==='dark'?'light':'dark';h.setAttribute('data-theme',t);localStorage.setItem('theme',t)}
document.documentElement.setAttribute('data-theme',localStorage.getItem('theme')||'light');
generate();
</script>
</body>
</html>
