<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UUID ìƒì„±ê¸° | UUID Generator</title>
    <meta name="description" content="UUID v4, v7 ìƒì„± ë° ê²€ì¦ ë„êµ¬. Generate and validate UUIDs v4 and v7.">
    <style>
        :root {
            --bg-primary: #0f0f1a;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --text-primary: #eaeaea;
            --text-secondary: #8892b0;
            --accent: #64ffda;
            --accent2: #bd93f9;
            --border: #233554;
            --success: #50fa7b;
            --error: #ff5555;
            --warning: #f1fa8c;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: var(--bg-primary); color: var(--text-primary);
            line-height: 1.6; min-height: 100vh; padding: 16px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header {
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 24px; flex-wrap: wrap; gap: 8px;
        }
        .back-btn { text-decoration: none; color: var(--text-secondary); font-size: 14px; }
        .back-btn:hover { color: var(--accent); }
        h1 { font-size: 1.5rem; background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .lang-btn {
            background: var(--bg-card); border: 1px solid var(--border); color: var(--text-secondary);
            padding: 4px 12px; border-radius: 6px; cursor: pointer; font-size: 13px;
        }
        .card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .card h2 { font-size: 16px; margin-bottom: 12px; color: var(--accent); }
        .tabs { display: flex; gap: 4px; margin-bottom: 16px; flex-wrap: wrap; }
        .tab {
            padding: 8px 16px; border-radius: 8px; border: 1px solid var(--border);
            background: transparent; color: var(--text-secondary); cursor: pointer; font-size: 13px; transition: all 0.2s;
        }
        .tab.active { background: var(--accent); color: #0f0f1a; border-color: var(--accent); font-weight: 600; }
        .tab:hover:not(.active) { border-color: var(--accent); }
        .row { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 12px; align-items: flex-end; }
        label { display: block; font-size: 13px; color: var(--text-secondary); margin-bottom: 4px; }
        select, input[type="number"], input[type="text"] {
            background: var(--bg-card); border: 1px solid var(--border);
            color: var(--text-primary); padding: 10px 12px; border-radius: 8px;
            font-size: 14px; width: 100%; font-family: 'SF Mono', 'Fira Code', monospace;
        }
        input:focus, select:focus { outline: none; border-color: var(--accent); }
        .btn {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border: none; color: #0f0f1a; padding: 10px 20px; border-radius: 8px;
            font-size: 14px; cursor: pointer; font-weight: 700; transition: all 0.2s; white-space: nowrap;
        }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 15px rgba(100,255,218,0.3); }
        .btn-sm { padding: 6px 12px; font-size: 12px; }
        .btn-outline {
            background: transparent; border: 1px solid var(--border); color: var(--text-primary);
            padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;
        }
        .btn-outline:hover { border-color: var(--accent); color: var(--accent); }
        .btn-danger { background: var(--error); color: #fff; }
        .uuid-list { list-style: none; max-height: 400px; overflow-y: auto; }
        .uuid-item {
            display: flex; align-items: center; justify-content: space-between;
            padding: 8px 12px; border-radius: 8px; margin-bottom: 4px;
            background: var(--bg-card); border: 1px solid var(--border); gap: 8px;
            font-family: 'SF Mono', 'Fira Code', monospace; font-size: 13px;
            transition: border-color 0.2s;
        }
        .uuid-item:hover { border-color: var(--accent); }
        .uuid-item .uuid-text { flex: 1; word-break: break-all; user-select: all; }
        .uuid-item .copy-btn {
            background: none; border: none; color: var(--text-secondary);
            cursor: pointer; font-size: 16px; padding: 4px 8px; border-radius: 4px;
            flex-shrink: 0;
        }
        .uuid-item .copy-btn:hover { color: var(--accent); background: rgba(100,255,218,0.1); }
        .uuid-item.copied { border-color: var(--success); }
        .actions { display: flex; gap: 8px; flex-wrap: wrap; }
        .format-opts { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
        .format-opt {
            padding: 4px 12px; border-radius: 20px; border: 1px solid var(--border);
            background: transparent; color: var(--text-secondary); cursor: pointer; font-size: 12px;
        }
        .format-opt.active { background: var(--accent); color: #0f0f1a; border-color: var(--accent); font-weight: 600; }
        .validator-result {
            padding: 12px; border-radius: 8px; margin-top: 12px; font-size: 14px;
            font-family: 'SF Mono', 'Fira Code', monospace;
        }
        .valid { background: rgba(80,250,123,0.1); border: 1px solid var(--success); color: var(--success); }
        .invalid { background: rgba(255,85,85,0.1); border: 1px solid var(--error); color: var(--error); }
        .stat-bar {
            display: flex; gap: 16px; padding: 12px; background: var(--bg-card);
            border-radius: 8px; margin-bottom: 12px; flex-wrap: wrap;
        }
        .stat-bar span { font-size: 12px; color: var(--text-secondary); }
        .stat-bar strong { color: var(--accent); }
        .toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: var(--success); color: #0f0f1a; padding: 10px 24px; border-radius: 8px;
            font-size: 14px; font-weight: 600; z-index: 999; opacity: 0; transition: opacity 0.3s;
        }
        .toast.show { opacity: 1; }
        .hidden { display: none !important; }
        footer { text-align: center; margin-top: 32px; color: var(--text-secondary); font-size: 12px; }
        footer a { color: var(--accent); text-decoration: none; }
        @media (max-width: 640px) {
            .uuid-item { font-size: 11px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="/tools/" class="back-btn">â† <span data-i18n="back">ë„êµ¬ ëª©ë¡</span></a>
            <h1>ğŸ”‘ <span data-i18n="title">UUID ìƒì„±ê¸°</span></h1>
            <button class="lang-btn" onclick="toggleLang()">EN/KO</button>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="setTab('generate')" data-i18n="tabGen">ìƒì„±</button>
            <button class="tab" onclick="setTab('validate')" data-i18n="tabVal">ê²€ì¦</button>
            <button class="tab" onclick="setTab('history')" data-i18n="tabHist">íˆìŠ¤í† ë¦¬</button>
        </div>

        <!-- Generate Tab -->
        <div id="tabGenerate">
            <div class="card">
                <div class="row">
                    <div style="flex:1;min-width:120px">
                        <label data-i18n="version">ë²„ì „</label>
                        <select id="uuidVersion">
                            <option value="4">UUID v4 (Random)</option>
                            <option value="7">UUID v7 (Timestamp)</option>
                        </select>
                    </div>
                    <div style="flex:1;min-width:100px">
                        <label data-i18n="count">ê°œìˆ˜</label>
                        <input type="number" id="uuidCount" value="1" min="1" max="100">
                    </div>
                    <div style="display:flex;align-items:flex-end">
                        <button class="btn" onclick="generateUUIDs()" data-i18n="generate">ìƒì„±</button>
                    </div>
                </div>

                <label data-i18n="formatLabel" style="margin-top:8px">í˜•ì‹</label>
                <div class="format-opts">
                    <button class="format-opt active" onclick="setFormat('standard')">standard</button>
                    <button class="format-opt" onclick="setFormat('no-dash')">no dashes</button>
                    <button class="format-opt" onclick="setFormat('upper')">UPPERCASE</button>
                    <button class="format-opt" onclick="setFormat('lower')">lowercase</button>
                </div>
            </div>

            <div class="stat-bar">
                <span data-i18n="generated">ìƒì„±ëœ UUID:</span> <strong id="genCount">0</strong>
                <span>|</span>
                <span data-i18n="sessionTotal">ì„¸ì…˜ í•©ê³„:</span> <strong id="sessionCount">0</strong>
            </div>

            <div class="actions" style="margin-bottom:12px">
                <button class="btn-outline" onclick="copyAll()" data-i18n="copyAll">ëª¨ë‘ ë³µì‚¬</button>
                <button class="btn-outline" onclick="clearResults()" data-i18n="clear">ì§€ìš°ê¸°</button>
            </div>

            <ul class="uuid-list" id="uuidList"></ul>
        </div>

        <!-- Validate Tab -->
        <div id="tabValidate" class="hidden">
            <div class="card">
                <h2>ğŸ” <span data-i18n="validateTitle">UUID ê²€ì¦</span></h2>
                <input type="text" id="validateInput" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" oninput="validateUUID()">
                <div id="validateResult"></div>
            </div>
        </div>

        <!-- History Tab -->
        <div id="tabHistory" class="hidden">
            <div class="card">
                <h2>ğŸ“‹ <span data-i18n="historyTitle">ìƒì„± íˆìŠ¤í† ë¦¬</span></h2>
                <div class="actions" style="margin-bottom:12px">
                    <button class="btn-outline" onclick="copyHistory()" data-i18n="copyAll">ëª¨ë‘ ë³µì‚¬</button>
                    <button class="btn-outline btn-danger" onclick="clearHistory()" data-i18n="clearHist">íˆìŠ¤í† ë¦¬ ì‚­ì œ</button>
                </div>
                <ul class="uuid-list" id="historyList"></ul>
                <p id="historyEmpty" style="color:var(--text-secondary);text-align:center;padding:20px" data-i18n="noHistory">ìƒì„± íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>
    <footer><a href="/tools/">EastSea Tools</a> Â· <span data-i18n="footer">ëª¨ë“  ì²˜ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤</span></footer>

    <script>
    const i18n = {
        ko: { back:'ë„êµ¬ ëª©ë¡', title:'UUID ìƒì„±ê¸°', tabGen:'ìƒì„±', tabVal:'ê²€ì¦', tabHist:'íˆìŠ¤í† ë¦¬', version:'ë²„ì „', count:'ê°œìˆ˜', generate:'ìƒì„±', formatLabel:'í˜•ì‹', generated:'ìƒì„±ëœ UUID:', sessionTotal:'ì„¸ì…˜ í•©ê³„:', copyAll:'ëª¨ë‘ ë³µì‚¬', clear:'ì§€ìš°ê¸°', validateTitle:'UUID ê²€ì¦', historyTitle:'ìƒì„± íˆìŠ¤í† ë¦¬', clearHist:'íˆìŠ¤í† ë¦¬ ì‚­ì œ', noHistory:'ìƒì„± íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤', footer:'ëª¨ë“  ì²˜ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤', copied:'ë³µì‚¬ ì™„ë£Œ!', validMsg:'âœ… ìœ íš¨í•œ UUID', invalidMsg:'âŒ ìœ íš¨í•˜ì§€ ì•Šì€ UUID', version_label:'ë²„ì „', timestamp_label:'íƒ€ì„ìŠ¤íƒ¬í”„' },
        en: { back:'Back to Tools', title:'UUID Generator', tabGen:'Generate', tabVal:'Validate', tabHist:'History', version:'Version', count:'Count', generate:'Generate', formatLabel:'Format', generated:'Generated:', sessionTotal:'Session Total:', copyAll:'Copy All', clear:'Clear', validateTitle:'UUID Validator', historyTitle:'Generation History', clearHist:'Clear History', noHistory:'No history yet', footer:'All processing is done in your browser', copied:'Copied!', validMsg:'âœ… Valid UUID', invalidMsg:'âŒ Invalid UUID', version_label:'Version', timestamp_label:'Timestamp' }
    };
    let lang = 'ko';
    function toggleLang() {
        lang = lang === 'ko' ? 'en' : 'ko';
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (i18n[lang][key]) el.textContent = i18n[lang][key];
        });
    }

    let currentFormat = 'standard';
    let currentUUIDs = [];
    let history = [];
    let sessionTotal = 0;

    function setTab(tab) {
        document.querySelectorAll('.tab').forEach((t,i) => {
            t.classList.toggle('active', (i===0&&tab==='generate')||(i===1&&tab==='validate')||(i===2&&tab==='history'));
        });
        document.getElementById('tabGenerate').classList.toggle('hidden', tab !== 'generate');
        document.getElementById('tabValidate').classList.toggle('hidden', tab !== 'validate');
        document.getElementById('tabHistory').classList.toggle('hidden', tab !== 'history');
        if (tab === 'history') renderHistory();
    }

    function setFormat(fmt) {
        currentFormat = fmt;
        document.querySelectorAll('.format-opt').forEach(b => {
            b.classList.toggle('active', b.textContent.toLowerCase().includes(
                fmt === 'standard' ? 'standard' : fmt === 'no-dash' ? 'dash' : fmt === 'upper' ? 'upper' : 'lower'
            ));
        });
        renderUUIDs();
    }

    function formatUUID(uuid) {
        switch(currentFormat) {
            case 'no-dash': return uuid.replace(/-/g, '');
            case 'upper': return uuid.toUpperCase();
            case 'lower': return uuid.toLowerCase();
            default: return uuid;
        }
    }

    // UUID v4: random
    function uuidv4() {
        const bytes = new Uint8Array(16);
        crypto.getRandomValues(bytes);
        bytes[6] = (bytes[6] & 0x0f) | 0x40; // version 4
        bytes[8] = (bytes[8] & 0x3f) | 0x80; // variant 10
        const hex = Array.from(bytes, b => b.toString(16).padStart(2, '0')).join('');
        return hex.slice(0,8)+'-'+hex.slice(8,12)+'-'+hex.slice(12,16)+'-'+hex.slice(16,20)+'-'+hex.slice(20);
    }

    // UUID v7: timestamp-based (RFC 9562)
    function uuidv7() {
        const now = Date.now();
        const bytes = new Uint8Array(16);
        crypto.getRandomValues(bytes);
        // 48 bits of timestamp (ms)
        const ts = BigInt(now);
        bytes[0] = Number((ts >> 40n) & 0xFFn);
        bytes[1] = Number((ts >> 32n) & 0xFFn);
        bytes[2] = Number((ts >> 24n) & 0xFFn);
        bytes[3] = Number((ts >> 16n) & 0xFFn);
        bytes[4] = Number((ts >> 8n) & 0xFFn);
        bytes[5] = Number(ts & 0xFFn);
        bytes[6] = (bytes[6] & 0x0f) | 0x70; // version 7
        bytes[8] = (bytes[8] & 0x3f) | 0x80; // variant 10
        const hex = Array.from(bytes, b => b.toString(16).padStart(2, '0')).join('');
        return hex.slice(0,8)+'-'+hex.slice(8,12)+'-'+hex.slice(12,16)+'-'+hex.slice(16,20)+'-'+hex.slice(20);
    }

    function generateUUIDs() {
        const version = document.getElementById('uuidVersion').value;
        const count = Math.min(Math.max(parseInt(document.getElementById('uuidCount').value) || 1, 1), 100);
        currentUUIDs = [];
        for (let i = 0; i < count; i++) {
            const uuid = version === '7' ? uuidv7() : uuidv4();
            currentUUIDs.push(uuid);
            history.unshift({ uuid, version: 'v' + version, time: new Date().toLocaleTimeString() });
        }
        if (history.length > 500) history = history.slice(0, 500);
        sessionTotal += count;
        document.getElementById('genCount').textContent = count;
        document.getElementById('sessionCount').textContent = sessionTotal;
        renderUUIDs();
    }

    function renderUUIDs() {
        const list = document.getElementById('uuidList');
        list.innerHTML = '';
        currentUUIDs.forEach((uuid, i) => {
            const li = document.createElement('li');
            li.className = 'uuid-item';
            li.innerHTML = `<span class="uuid-text">${formatUUID(uuid)}</span><button class="copy-btn" onclick="copySingle(this, ${i})" title="Copy">ğŸ“‹</button>`;
            list.appendChild(li);
        });
    }

    function copySingle(btn, idx) {
        const text = formatUUID(currentUUIDs[idx]);
        navigator.clipboard.writeText(text).then(() => {
            btn.closest('.uuid-item').classList.add('copied');
            setTimeout(() => btn.closest('.uuid-item').classList.remove('copied'), 1000);
            showToast(i18n[lang].copied);
        });
    }

    function copyAll() {
        if (!currentUUIDs.length) return;
        const text = currentUUIDs.map(u => formatUUID(u)).join('\n');
        navigator.clipboard.writeText(text).then(() => showToast(i18n[lang].copied));
    }

    function clearResults() {
        currentUUIDs = [];
        document.getElementById('uuidList').innerHTML = '';
        document.getElementById('genCount').textContent = '0';
    }

    function validateUUID() {
        const input = document.getElementById('validateInput').value.trim();
        const result = document.getElementById('validateResult');
        if (!input) { result.innerHTML = ''; return; }

        const uuidRegex = /^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i;
        const normalized = input.replace(/-/g, '');

        if (uuidRegex.test(input) && normalized.length === 32) {
            const version = parseInt(normalized[12], 16);
            const variant = parseInt(normalized[16], 16);
            let info = `<strong>${i18n[lang].validMsg}</strong><br>`;
            info += `${i18n[lang].version_label}: ${version}<br>`;
            info += `Variant: ${(variant & 0xc) === 0x8 ? 'RFC 4122/9562' : 'Other'}`;
            if (version === 7) {
                const tsHex = normalized.slice(0, 12);
                const ts = parseInt(tsHex, 16);
                const date = new Date(ts);
                info += `<br>${i18n[lang].timestamp_label}: ${date.toISOString()}`;
            }
            result.innerHTML = `<div class="validator-result valid">${info}</div>`;
        } else {
            result.innerHTML = `<div class="validator-result invalid">${i18n[lang].invalidMsg}</div>`;
        }
    }

    function renderHistory() {
        const list = document.getElementById('historyList');
        const empty = document.getElementById('historyEmpty');
        list.innerHTML = '';
        if (history.length === 0) {
            empty.classList.remove('hidden');
            return;
        }
        empty.classList.add('hidden');
        history.forEach((item, i) => {
            const li = document.createElement('li');
            li.className = 'uuid-item';
            li.innerHTML = `<span class="uuid-text">${item.uuid}</span><small style="color:var(--text-secondary);flex-shrink:0">${item.version} ${item.time}</small><button class="copy-btn" onclick="copyHistoryItem(${i})" title="Copy">ğŸ“‹</button>`;
            list.appendChild(li);
        });
    }

    function copyHistoryItem(idx) {
        navigator.clipboard.writeText(history[idx].uuid).then(() => showToast(i18n[lang].copied));
    }

    function copyHistory() {
        if (!history.length) return;
        navigator.clipboard.writeText(history.map(h => h.uuid).join('\n')).then(() => showToast(i18n[lang].copied));
    }

    function clearHistory() {
        history = [];
        renderHistory();
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.textContent = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 1500);
    }

    // Generate one on load
    generateUUIDs();
    </script>
</body>
</html>